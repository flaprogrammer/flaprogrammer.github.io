{"version":3,"sources":["components/signup-page/face.png","components/signin-page/face.png","services/canvas.js","services/backend.js","reducers/preview.js","reducers/profile.js","reducers/index.js","components/spinner/Spinner.js","components/preview/Preview.js","components/download-success-modal/DownloadSuccessModal.js","services/validations.js","components/social-login/SocialLogin.js","components/signup-form/SignupForm.js","components/signin-form/SigninForm.js","components/download-modal/DownloadModal.js","components/button-actions/ButtonActions.js","components/tile/Tile.js","components/color-picker/ColorPicker.js","components/layer/Layer.js","components/main-tabs/MainTabs.js","components/app-header/AppHeader.js","components/app-menu/AppMenu.js","components/avatar-page/AvatarPage.js","components/signup-page/SignupPage.js","components/signin-page/SigninPage.js","components/downloads-page/DownloadsPage.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","canvas","document","createElement","context","getContext","IMG_WIDTH","IMG_HEIGHT","width","height","changeImageColor","url","color","Promise","resolve","reject","img","src","onload","clearRect","drawImage","alpha","imageSmoothingQuality","globalCompositeOperation","fillStyle","fillRect","colorize","toDataURL","API_URL","process","instance","backend","Backend","_this","this","Object","classCallCheck","authAxios","axiosInstance","token","signup","body","post","signupFacebook","then","response","setAxiosInstance","data","localStorage","setItem","catch","e","signupGoogle","signin","getProfileInfo","get","getDownloads","removeDownload","id","delete","getLayers","setId","getSets","login","saveImage","method","responseType","params","logOut","removeItem","getItem","axios","create","baseURL","headers","Content-Type","Authorization","initialState","partsDataOriginal","Map","partsData","PARTS","PARTS_WITH_COLORS","partSprites","previewIsLoading","layersAreLoading","savingIsLoading","sets","hiddenParts","conflicts","currentSet","current","nextCurrent","dispatch","type","payload","changeColor","part","getState","partsToInheritColor","preview","forEach","pd","index","inheritColorFrom","push","images","el","value","_id","inheritPart","getCurrentValues","createSelector","state","values","partValue","partId","find","zIndex","sort","a","b","map","v","getPreviewIsLoading","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","i","length","isLoading","err","return","reducer","handlers","arguments","action","hasOwnProperty","createReducer","SELECT_PART","_ref","_ref$payload","randomized","newCurrent","assign","conflictedPart","partData","objectSpread","defineProperty","SET_COLOR_START","_ref2","newPartsData","newPart","set","SET_COLOR","_ref3","_ref3$payload","newPartImages","concat","SET_PREVIEW_IS_LOADING","_ref4","GET_SETS_SUCCESS","_ref5","SET_CUSTOM_LAYERS","_ref6","LOAD_LAYERS_REQUEST","_ref7","LOAD_LAYERS_SUCCESS","_ref8","cloneDeep","partsMap","partIndex","unshift","conflictsWith","showOnStart","layer","filter","colors","SAVE_IMAGE_REQUEST","SAVE_IMAGE_SUCCESS","strategy","loginRequest","profile","downloads","downloadsAreLoading","deletingDownloads","GET_PROFILE_INFO_SUCCESS","GET_DOWNLOADS_REQUEST","GET_DOWNLOADS_SUCCESS","REMOVE_DOWNLOAD_REQUEST","REMOVE_DOWNLOAD_SUCCESS","_ref4$payload","download","LOGIN_SUCCESS","SIGNUP_SUCCESS","LOGOUT","combineReducers","Spinner","_ref$width","_ref$height","react_default","className","style","connect","items","classNames","item","backgroundImage","key","alt","DownloadSuccessModal","props","lib_default","isOpen","onRequestClose","closeModal","imgBase64","react_router_dom","to","Modal","setAppElement","required","minLength","email","test","google_login","clientId","buttonText","onSuccess","res","console","log","onSuccessGoogleLogin","access_token","accessToken","onFailure","facebook_login_render_props_default","appId","callback","onSuccessFacebookLogin","render","renderProps","onClick","ti_index_esm","initialValues","password","repeatPassword","validate","errors","emailError","passwordError","repeatPasswordError","valueToEqual","passwordsMatch","place","social_login_SocialLogin","formik_esm","validateOnChange","onSubmit","setSubmitting","onSuccessEmailLogin","toast","error","finally","formProps","touched","isSubmitting","handleChange","handleBlur","handleSubmit","htmlFor","name","placeholder","onChange","onBlur","disabled","href","preventDefault","onSignInClick","onSignUpClick","_useState","useState","_useState2","slicedToArray","currentPageSignIn","setCurrentPageSignIn","useEffect","onDownload","signin_form_SigninForm","signup_form_SignupForm","randomizeLayers","partsShuffled","Math","random","reduce","accum","includes","r","floor","toString","padStart","g","saveAs","Blob","modalSuccessIsOpen","setModalSuccessIsOpen","_useState3","_useState4","modalDownloadIsOpen","setModalDownloadIsOpen","_useState5","_useState6","setImgBase64","index_esm","download_modal_DownloadModal","reader","FileReader","readAsDataURL","onloadend","base64data","result","Tile","active","selectPart","showPicker","setShowPicker","currentColor","setCurrentColor","onBackgroundClick","window","addEventListener","removeEventListener","stopPropagation","backgroundColor","background","react_color_lib","disableAlpha","hex","color_picker_ColorPicker","esm","defaultIndex","title","layer_Layer","match","BurgerMenu","right","Fragment","loadLayers","force","entries","history","app_menu_AppMenu","app_header_AppHeader","preview_Preview","button_actions_ButtonActions","main_tabs_MainTabs","redirectBack","pushfa","face","setCustomLayers","layers","App","possibleConstructorReturn","getPrototypeOf","call","react_toastify","autoClose","hideProgressBar","react_router","path","exact","component","AvatarPage","DownloadsPage","SignupPage","SigninPage","React","Component","Boolean","location","hostname","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","ReactDOM","es","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dd3e269a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/face.2c39ddd4.png\";","module.exports = __webpack_public_path__ + \"static/media/face.6721bc4f.png\";","const canvas = document.createElement(\"canvas\"), // shared instance\r\n  context = canvas.getContext(\"2d\");\r\n\r\nconst IMG_WIDTH = 600;\r\nconst IMG_HEIGHT = 600;\r\n\r\n// set image pixel size and hex color\r\ncanvas.width = IMG_WIDTH;\r\ncanvas.height = IMG_HEIGHT;\r\n\r\nexport const changeImageColor = (url, color) => {\r\n\r\n  return new Promise((resolve, reject) => {\r\n    let img = document.createElement('img');\r\n    img.src = url;\r\n    img.onload = () => {\r\n\r\n      context.clearRect(0, 0, canvas.width, canvas.height);\r\n      context.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n      colorize(color, 1);\r\n\r\n      context.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n      resolve(canvas.toDataURL(\"image/png\", 0.7));\r\n    }\r\n  })\r\n\r\n\r\n  function colorize(color, alpha) {\r\n    context.imageSmoothingQuality = \"medium\";\r\n    context.globalCompositeOperation = \"source-atop\";\r\n    context.fillStyle = color;\r\n    context.fillRect(0, 0, canvas.width, canvas.height);\r\n    context.globalCompositeOperation = \"multiply\";\r\n  }\r\n}\r\n\r\nexport const createSprite = (base64Urls) => {\r\n  const spriteCanvas = document.createElement(\"canvas\"),\r\n    ctx = spriteCanvas.getContext(\"2d\");\r\n  spriteCanvas.width = base64Urls.length * IMG_WIDTH;\r\n  spriteCanvas.height = IMG_HEIGHT;\r\n\r\n  return new Promise((resolve) => {\r\n\r\n    let promisesArray = [];\r\n\r\n    for (let i = 0; i < base64Urls.length; i++) {\r\n      promisesArray.push(drawImg(base64Urls[i], i * IMG_WIDTH, 0));\r\n    }\r\n\r\n    Promise.all(promisesArray).then(() => {\r\n      resolve(spriteCanvas.toDataURL(\"image/png\", 1));\r\n    })\r\n  });\r\n\r\n  function drawImg(url, x, y) {\r\n    return new Promise((resolve) => {\r\n      let img = document.createElement('img');\r\n      img.src = url;\r\n      img.onload = () => {\r\n        ctx.drawImage(img, x, y, IMG_WIDTH, IMG_HEIGHT);\r\n        resolve();\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n","import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://lvh.me:3001/' || 'http://localhost:3001/';\r\n\r\n\r\nlet instance = null;\r\n\r\nclass Backend {\r\n  authAxios = null;\r\n  axiosInstance = null;\r\n  token = null;\r\n\r\n  constructor() {\r\n    if (!instance) {\r\n      instance = this;\r\n      let token = localStorage.getItem('token');\r\n      if (token) {\r\n        this.token = token;\r\n      }\r\n      this.setAxiosInstance(token);\r\n    }\r\n    return instance;\r\n  }\r\n\r\n\r\n  signup = (body) => {\r\n    return this.axiosInstance.post(API_URL + 'auth/sign-up', body);\r\n  }\r\n\r\n  signupFacebook = (body) => {\r\n    return new Promise((resolve, reject) => {\r\n      this.axiosInstance.post(API_URL + 'auth/facebook', body)\r\n        .then(response => {\r\n          this.setAxiosInstance(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          resolve(response);\r\n        })\r\n        .catch(e => reject(e));\r\n    });\r\n  }\r\n\r\n  signupGoogle = (body) => {\r\n    return new Promise((resolve, reject) => {\r\n      this.axiosInstance.post(API_URL + 'auth/google', body)\r\n        .then(response => {\r\n          this.setAxiosInstance(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          resolve(response);\r\n        })\r\n        .catch(e => reject(e));\r\n    });\r\n  }\r\n\r\n  signin = (body) => {\r\n    return new Promise((resolve, reject) => {\r\n      return this.axiosInstance.post(API_URL + 'auth/login', body)\r\n        .then(response => {\r\n          this.setAxiosInstance(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          resolve(response);\r\n        })\r\n        .catch(e => reject(e));\r\n    });\r\n  }\r\n\r\n  getProfileInfo = () => {\r\n    return this.authAxios.get(API_URL + 'profile/info');\r\n  }\r\n\r\n  getDownloads = () => {\r\n    return this.authAxios.get(API_URL + 'profile/downloads');\r\n  }\r\n\r\n  removeDownload = (id) => {\r\n    return this.authAxios.delete(API_URL + 'profile/downloads/' + id);\r\n  }\r\n\r\n  getLayers = (setId) => {\r\n    return this.axiosInstance.get(API_URL + 'face-parts/' + setId);\r\n  }\r\n\r\n  getSets = () => {\r\n    return this.axiosInstance.get(API_URL + 'face-parts/sets');\r\n  }\r\n\r\n  login = (body) => {\r\n    return this.axiosInstance.post(API_URL + 'face-parts/login', body);\r\n  }\r\n\r\n  saveImage = (setId, data) => {\r\n    return this.authAxios({\r\n      url: API_URL + 'save-image/' + setId,\r\n      method: 'GET',\r\n      responseType: 'blob', // important,\r\n      params: { data }\r\n    })\r\n  }\r\n\r\n  logOut = () => {\r\n    this.token = null;\r\n    localStorage.removeItem('token');\r\n  }\r\n\r\n\r\n  // SET INSTANCE\r\n  setAxiosInstance(token) {\r\n    this.axiosInstance = axios.create({\r\n      baseURL: API_URL,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      }\r\n    });\r\n    this.authAxios = axios.create({\r\n      baseURL: API_URL,\r\n      headers: {\r\n        Authorization: 'jwt ' + token,\r\n        'Content-Type': 'application/json',\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default new Backend();\r\n","import { createSelector } from 'reselect'\r\nimport { changeImageColor } from '../services/canvas'\r\nimport backend from '../services/backend'\r\nimport { cloneDeep, pickBy } from 'lodash'\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst TRANSPARENT_PIXEL = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\r\nconst TRANSPARENT_ID = 'transparent'\r\n\r\nconst initialState = {\r\n  partsDataOriginal: new Map(),\r\n  partsData: new Map(),\r\n  PARTS: [],\r\n  PARTS_WITH_COLORS: [],\r\n  partSprites: [],\r\n  previewIsLoading: false,\r\n  layersAreLoading: true,\r\n  savingIsLoading: false,\r\n  sets: [],\r\n  hiddenParts: [], // for conflicts\r\n  conflicts: {},\r\n  currentSet: null,\r\n  current: {},\r\n  nextCurrent: null\r\n};\r\n\r\nexport function createReducer(initialState, handlers) {\r\n  return function reducer(state = initialState, action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action)\r\n    } else {\r\n      return state\r\n    }\r\n  }\r\n}\r\n\r\n// ACTIONS\r\n\r\nexport const loadLayers = (setId, force) => (dispatch, getState) => {\r\n  if (setId === getState().preview.currentSet && !force) return;\r\n  dispatch({ type: 'LOAD_LAYERS_REQUEST' , payload: setId});\r\n  let nextCurrent = getState().preview.nextCurrent;\r\n  backend.getLayers(setId).then(response => {\r\n    dispatch({ type: 'LOAD_LAYERS_SUCCESS', payload: response });\r\n    if (nextCurrent) {\r\n      Object.entries(nextCurrent).forEach(layer => {\r\n        if (getState().preview.PARTS_WITH_COLORS.includes(layer[0])) {\r\n          dispatch(changeColor(layer[0], layer[1].color))\r\n          dispatch({type: 'SET_COLOR_START', payload: { part: layer[0] }})\r\n        }\r\n      })\r\n    }\r\n  }).catch(e => {\r\n    dispatch({ type: 'LOAD_LAYERS_FAILURE', payload: e });\r\n  })\r\n}\r\n\r\nexport const getSets = () => (dispatch) => {\r\n  dispatch({ type: 'GET_SETS_REQUEST' });\r\n  return new Promise(resolve => {\r\n    backend.getSets().then(response => {\r\n      dispatch({ type: 'GET_SETS_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'GET_SETS_FAILURE', payload: e });\r\n    })\r\n  })\r\n}\r\n\r\nexport const saveImage = (setId) => (dispatch, getState) => {\r\n  const data = getState().preview.current;\r\n  dispatch({ type: 'SAVE_IMAGE_REQUEST' });\r\n  return new Promise((resolve, reject) =>  {\r\n    backend.saveImage(setId, data).then(response => {\r\n      saveAs(new Blob([response.data]), 'image' + Math.floor(Math.random() * 100000 + 1) + '.png');\r\n      dispatch({ type: 'SAVE_IMAGE_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'SAVE_IMAGE_FAILURE', payload: e });\r\n      reject(e);\r\n    })\r\n  });\r\n}\r\n\r\nexport const changeColor = (part, color) => (dispatch, getState) => {\r\n  let partsToInheritColor = [];\r\n  getState().preview.partsDataOriginal.forEach((pd, index) => {\r\n    if (pd.inheritColorFrom === part) {\r\n      partsToInheritColor.push(index);\r\n    }\r\n  })\r\n  getState().preview.partsDataOriginal.get(part).images.forEach(el => {\r\n    changeImageColor(el.value, color).then((value) => {\r\n      dispatch({ type: 'SET_COLOR', payload: { _id: el._id, part, value, color } })\r\n    })\r\n  })\r\n  partsToInheritColor.forEach(inheritPart => {\r\n    getState().preview.partsDataOriginal.get(inheritPart).images.forEach(el => {\r\n      changeImageColor(el.value, color).then((value) => {\r\n        dispatch({ type: 'SET_COLOR', payload: { _id: el._id, part: inheritPart, value, color } })\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\n\r\nexport const randomizeLayers = () => (dispatch, getState) => {\r\n\r\n  let partsShuffled = [].concat(getState().preview.PARTS).sort(() => Math.random() - 0.5);\r\n  let conflicts = {}\r\n  partsShuffled.forEach(part => {\r\n    if (!getState().preview.partsData.get(part).images.length) return\r\n    let conflictedArray = Object.values(conflicts).reduce((accum, value) => accum.concat(value), []);\r\n    if (conflictedArray.includes(getState().preview.partsData.get(part)._id)) {\r\n      return dispatch({type: 'SELECT_PART', payload: {_id: TRANSPARENT_ID, part, randomized: true }})\r\n    };\r\n\r\n    if (getState().preview.PARTS_WITH_COLORS.includes(part)) {\r\n      let r = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n      let g = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n      let b = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n      dispatch(changeColor(part, '#' + r + g + b))\r\n      dispatch({type: 'SET_COLOR_START', payload: { part }})\r\n    }\r\n\r\n    let index = Math.floor(Math.random() * (getState().preview.partsData.get(part).images.length - 1)) + 1;\r\n    let _id = getState().preview.partsData.get(part).images[index]._id;\r\n    dispatch({type: 'SELECT_PART', payload: {_id, part, randomized: true }})\r\n    conflicts[part] = getState().preview.conflicts[getState().preview.partsData.get(part)._id];\r\n  })\r\n}\r\n\r\nexport const setCustomLayers = (current) => (dispatch, getState) => {\r\n\r\n  dispatch({type: 'SET_CUSTOM_LAYERS', payload: current});\r\n  Object.entries(current).forEach(layer => {\r\n    if (getState().preview.PARTS_WITH_COLORS.includes(layer[0])) {\r\n      dispatch(changeColor(layer[0], layer[1].color))\r\n      dispatch({type: 'SET_COLOR_START', payload: { part: layer[0] }})\r\n    }\r\n  })\r\n}\r\n\r\n\r\n\r\n\r\n// SELECTORS\r\n//\r\nexport const getCurrentValues = createSelector(\r\n  state => state.preview.partsData,\r\n  state => state.preview.current,\r\n  (partsData, current) => {\r\n    let values = [];\r\n    partsData.forEach((partValue, partId) => {\r\n      if (!current[partId]) return;\r\n      let value = partValue.images.find(el => el._id === current[partId]._id)\r\n      values.push({\r\n        zIndex: partValue.zIndex,\r\n        value\r\n      })\r\n    });\r\n    values = values.sort((a, b) => a.zIndex - b.zIndex)\r\n    values = values.map(v => v.value && v.value.value)\r\n    return values\r\n  }\r\n)\r\n\r\nexport const getPreviewIsLoading = createSelector(state => state.preview.partsData, partsData => {\r\n  if (!partsData) return true;\r\n  for (let part of partsData) {\r\n    for (let i = 0; i < part[1].images.length; i++) {\r\n      if (part[1].images[i].isLoading) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n});\r\n\r\n// REDUCER\r\n\r\nconst reducer = createReducer(initialState, {\r\n  SELECT_PART: function(state, { payload: { _id, part, randomized }}) {\r\n    let newCurrent = Object.assign({}, state.current);\r\n\r\n    if (!randomized && state.conflicts[part]) {\r\n      state.conflicts[part].forEach(conflictedPart => {\r\n        state.partsData.forEach(partData => {\r\n          if (partData._id === conflictedPart) {\r\n            newCurrent[partData._id] && (newCurrent[partData._id]._id = TRANSPARENT_ID);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    return {\r\n      ...state,\r\n      current: {\r\n        ...newCurrent,\r\n        [part]: {\r\n          ...state.current[part],\r\n          _id: _id,\r\n        }\r\n      }\r\n    }\r\n  },\r\n  SET_COLOR_START: function(state, { payload: { part }}) {\r\n    let newPartsData = new Map(state.partsData);\r\n    let newPart = Object.assign({}, newPartsData.get(part));\r\n    newPart.images && newPart.images.forEach(img => img.isLoading = true);\r\n    newPartsData.set(part, newPart)\r\n    return {\r\n      ...state,\r\n      partsData: newPartsData\r\n    }\r\n  },\r\n  SET_COLOR: function(state, { payload: {_id, part, value, color }}) {\r\n    let newPartsData = new Map(state.partsData);\r\n    let newPart = Object.assign({}, newPartsData.get(part));\r\n    let newPartImages = [].concat(state.partsData.get(part).images);\r\n    newPartImages.find(el => el._id === _id).value = value;\r\n    newPartImages.find(el => el._id === _id).isLoading = false;\r\n    newPart.images = newPartImages;\r\n    newPartsData.set(part, newPart)\r\n    return {\r\n      ...state,\r\n      partsData: newPartsData,\r\n      current: {\r\n        ...state.current,\r\n        [part]: {\r\n          ...state.current[part],\r\n          color\r\n        }\r\n      }\r\n    }\r\n  },\r\n  SET_PREVIEW_IS_LOADING: function(state, { value }) {\r\n    return {\r\n      ...state,\r\n      previewIsLoading: value\r\n    }\r\n  },\r\n  GET_SETS_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      sets: payload.data\r\n    }\r\n  },\r\n  SET_CUSTOM_LAYERS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      current: payload,\r\n      nextCurrent: payload\r\n    }\r\n  },\r\n  LOAD_LAYERS_REQUEST: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      current: {},\r\n      currentSet: payload,\r\n      partsDataOriginal: new Map(),\r\n      partsData: new Map(),\r\n      PARTS: [],\r\n      PARTS_WITH_COLORS: [],\r\n      layersAreLoading: true\r\n    }\r\n  },\r\n  LOAD_LAYERS_SUCCESS: function(state, { payload }) {\r\n    let newPartsData = cloneDeep(payload.data);\r\n    let newCurrent = Object.assign({}, state.current);\r\n    let conflicts = {};\r\n    let partsMap = new Map();\r\n    newPartsData.forEach((part, partIndex) => {\r\n      part.images.unshift({\r\n        _id: TRANSPARENT_ID,\r\n        value: TRANSPARENT_PIXEL\r\n      });\r\n      part.images.forEach(img => {\r\n        img.isLoading = false;\r\n      })\r\n      if (part.conflictsWith.length) {\r\n        if (conflicts[part._id]) conflicts[part._id].concat(part.conflictsWith);\r\n        else conflicts[part._id] = part.conflictsWith;\r\n        conflicts[part._id] = part.conflictsWith;\r\n        part.conflictsWith.forEach(conflictedPart => {\r\n          if (conflicts[conflictedPart]) conflicts[conflictedPart].push(part._id);\r\n          else conflicts[conflictedPart] = [part._id];\r\n        })\r\n      }\r\n      // set current\r\n      if (!state.nextCurrent) {\r\n        if (part.showOnStart) {\r\n          newCurrent[part._id] = {\r\n            _id: part.images[1]._id\r\n          };\r\n        } else {\r\n          newCurrent[part._id] = {\r\n            _id: TRANSPARENT_ID\r\n          };\r\n        }\r\n      } else {\r\n        newCurrent = Object.assign({}, state.nextCurrent);\r\n      }\r\n      partsMap.set(part._id, part);\r\n    })\r\n\r\n    return {\r\n      ...state,\r\n      conflicts,\r\n      partsData: partsMap,\r\n      partsDataOriginal: cloneDeep(partsMap),\r\n      PARTS: payload.data.map(layer => layer._id),\r\n      PARTS_WITH_COLORS: payload.data\r\n        .filter(layer => layer.colors && layer.colors.length)\r\n        .map(layer => layer._id),\r\n      layersAreLoading: false,\r\n      current: newCurrent,\r\n      nextCurrent: null\r\n    }\r\n  },\r\n  SAVE_IMAGE_REQUEST: function(state) {\r\n    return {\r\n      ...state,\r\n      savingIsLoading: true\r\n    }\r\n  },\r\n  SAVE_IMAGE_SUCCESS: function(state) {\r\n    return {\r\n      ...state,\r\n      savingIsLoading: false\r\n    }\r\n  }\r\n})\r\n\r\nexport default reducer\r\n","import { createSelector } from 'reselect'\r\nimport backend from '../services/backend'\r\nimport { cloneDeep, pickBy } from 'lodash'\r\n\r\n\r\nconst initialState = {\r\n  profile: null,\r\n  downloads: [],\r\n  downloadsAreLoading: false,\r\n  deletingDownloads: []\r\n};\r\n\r\nexport function createReducer(initialState, handlers) {\r\n  return function reducer(state = initialState, action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action)\r\n    } else {\r\n      return state\r\n    }\r\n  }\r\n}\r\n\r\n// ACTIONS\r\n\r\nexport const getProfileInfo = () => (dispatch) => {\r\n  if (!backend.token) return;\r\n  dispatch({ type: 'GET_PROFILE_INFO_REQUEST' });\r\n  return new Promise(resolve => {\r\n    backend.getProfileInfo().then(response => {\r\n      dispatch({ type: 'GET_PROFILE_INFO_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'GET_PROFILE_INFO_FAILURE', payload: e });\r\n    })\r\n  })\r\n}\r\n\r\nexport const getDownloads = () => (dispatch) => {\r\n  if (!backend.token) return;\r\n  dispatch({ type: 'GET_DOWNLOADS_REQUEST' });\r\n  return new Promise(resolve => {\r\n    backend.getDownloads().then(response => {\r\n      dispatch({ type: 'GET_DOWNLOADS_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'GET_DOWNLOADS_FAILURE', payload: e });\r\n    })\r\n  })\r\n}\r\n\r\nexport const removeDownload = (id) => (dispatch) => {\r\n  if (!backend.token) return;\r\n  dispatch({ type: 'REMOVE_DOWNLOAD_REQUEST', payload: { id } });\r\n  return new Promise(resolve => {\r\n    backend.removeDownload(id).then(response => {\r\n      dispatch({ type: 'REMOVE_DOWNLOAD_SUCCESS', payload: { response, id } });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'REMOVE_DOWNLOAD_FAILURE', payload: e });\r\n    })\r\n  })\r\n}\r\n\r\nexport const login = (body, strategy) => (dispatch) => {\r\n  dispatch({ type: 'LOGIN_REQUEST' });\r\n  let loginRequest = backend.signin;\r\n  if (strategy === 'facebook') {\r\n    loginRequest = backend.signupFacebook;\r\n  }\r\n  if (strategy === 'google') {\r\n    loginRequest = backend.signupGoogle;\r\n  }\r\n  return loginRequest(body).then(response => {\r\n    dispatch({ type: 'LOGIN_SUCCESS', payload: response });\r\n  }).catch(e => {\r\n    dispatch({ type: 'LOGIN_FAILURE', payload: e });\r\n  })\r\n}\r\n\r\nexport const signup = (body) => (dispatch) => {\r\n  dispatch({ type: 'SIGNUP_REQUEST' });\r\n  return backend.signup(body).then(response => {\r\n    dispatch({ type: 'SIGNUP_SUCCESS', payload: response });\r\n  }).catch(e => {\r\n    dispatch({ type: 'SIGNUP_FAILURE', payload: e });\r\n  })\r\n}\r\n\r\nexport const logOut = () => (dispatch) => {\r\n  backend.logOut();\r\n  dispatch({ type: 'LOGOUT'});\r\n\r\n}\r\n\r\n\r\n// REDUCER\r\n\r\nconst reducer = createReducer(initialState, {\r\n\r\n  GET_PROFILE_INFO_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      profile: payload.data\r\n    }\r\n  },\r\n  GET_DOWNLOADS_REQUEST: function(state) {\r\n    return {\r\n      ...state,\r\n      downloadsAreLoading: true\r\n    }\r\n  },\r\n  GET_DOWNLOADS_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      downloads: payload.data || [],\r\n      downloadsAreLoading: false\r\n    }\r\n  },\r\n  REMOVE_DOWNLOAD_REQUEST: function(state, { payload: { id } }) {\r\n    let deletingDownloads = [].concat(state.deletingDownloads);\r\n    deletingDownloads.push(id);\r\n    return {\r\n      ...state,\r\n      deletingDownloads\r\n    }\r\n  },\r\n  REMOVE_DOWNLOAD_SUCCESS: function(state, { payload: { response, id } }) {\r\n    let deletingDownloads = [].concat(state.deletingDownloads);\r\n    deletingDownloads = deletingDownloads.filter(download => download !== id);\r\n    return {\r\n      ...state,\r\n      downloads: response.data || [],\r\n      deletingDownloads\r\n    }\r\n  },\r\n  LOGIN_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      profile: payload.data\r\n    }\r\n  },\r\n  SIGNUP_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      profile: payload.data\r\n    }\r\n  },\r\n  LOGOUT: function(state) {\r\n    return {\r\n      ...state,\r\n      profile: null\r\n    }\r\n  }\r\n})\r\n\r\nexport default reducer\r\n","import { combineReducers } from 'redux';\r\nimport preview from './preview';\r\nimport profile from './profile';\r\n\r\n\r\nexport default combineReducers({\r\n  preview,\r\n  profile\r\n});\r\n","import React from 'react';\r\nimport './spinner.scss'\r\n\r\nexport default function Spinner ({width = 300, height = 300}) {\r\n  return (\r\n    <div className=\"spinner\" style={{width, height}}>Loading...</div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getCurrentValues, getPreviewIsLoading } from '../../reducers/preview'\r\nimport Spinner from '../spinner'\r\nimport classNames from 'classnames'\r\n\r\nimport './preview.scss'\r\n\r\nfunction Preview({ items, previewIsLoading, setId }) {\r\n  return (\r\n    <div className={classNames('Preview', previewIsLoading && 'isLoading')}>\r\n\r\n      <div className=\"images\">\r\n        {\r\n          items.map((item, index) => (\r\n            <div className=\"img\" style={{backgroundImage: 'url(' + item + ')'}} key={index} alt=\"\"/>\r\n          ))\r\n        }\r\n      </div>\r\n      <Spinner />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    items: getCurrentValues(state),\r\n    current: state.preview.current,\r\n    previewIsLoading: state.preview.layersAreLoading || getPreviewIsLoading(state) || state.preview.savingIsLoading\r\n  })\r\n)(Preview)\r\n","import React from 'react';\r\nimport './download-success-modal.scss'\r\nimport Modal from 'react-modal';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nModal.setAppElement('#root')\r\n\r\nexport default function DownloadSuccessModal(props) {\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={props.isOpen}\r\n      onRequestClose={props.closeModal}\r\n      className=\"download-success-modal\"\r\n    >\r\n      <h4>Great! Your download has been successful!</h4>\r\n      <img className=\"modal-image\" src={props.imgBase64} alt=\"\"/>\r\n      <h6>If you want to download images in high quality, you can <strong>become premium</strong></h6>\r\n      <h6>See all your downloaded avatars <Link to=\"/downloads\">here</Link></h6>\r\n    </Modal>\r\n  )\r\n}\r\n","export function required(value) {\r\n  if (!value) {\r\n    return 'Field is required'\r\n  }\r\n}\r\n\r\nexport function cleanText(value) {\r\n  const CLEAN_TEXT = /^[^`~!@#$%^&*()+=[{\\]}|\\\\'<,.>?\";:]+$/;\r\n  if (!CLEAN_TEXT.test(value)) {\r\n    return 'No special characters allowed'\r\n  }\r\n}\r\n\r\nexport function minLength(value, length) {\r\n  if (value.length < length) {\r\n    return `Min length have to be ${length}`;\r\n  }\r\n}\r\n\r\nexport function email(value) {\r\n  const EMAIL = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i;\r\n  if (!EMAIL.test(value)) {\r\n    return 'Invalid email address'\r\n  }\r\n}\r\n\r\nexport function passwordsMatch(value, valueToEqual) {\r\n  if (value !== valueToEqual) {\r\n    return 'Passwords does not match'\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport './social-login.scss'\r\nimport { GoogleLogin } from 'react-google-login';\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\r\nimport { TiSocialFacebookCircular } from 'react-icons/ti/';\r\nimport { login } from '../../reducers/profile';\r\n\r\n\r\n\r\nfunction SocialLogin(props) {\r\n\r\n  const onSuccessGoogleLogin = (res) => {\r\n    //console.log(res.profileObj);\r\n    console.log(res);\r\n    // props.login({ profile: res.profileObj });\r\n    props.onSuccessGoogleLogin({access_token: res.accessToken});\r\n  }\r\n\r\n  const onSuccessFacebookLogin = (res) => {\r\n    console.log(res);\r\n    props.onSuccessFacebookLogin({access_token: res.accessToken});\r\n    // props.login({ profile: res });\r\n  }\r\n\r\n  return (\r\n    <div className=\"SocialLogin\">\r\n\r\n      {props.profile ? (\r\n        <div>\r\n          You are logged in as {props.profile.email}\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <GoogleLogin\r\n            clientId=\"546998968320-0cn7qut7aklej8akfljup6hi9a7najba.apps.googleusercontent.com\"\r\n            buttonText=\"Sign in with Google\"\r\n            responseType=\"token\"\r\n            onSuccess={onSuccessGoogleLogin}\r\n            onFailure={(err) => console.log(err)}\r\n          />\r\n          {/*<a href=\"http://lvh.me:3001/auth/google\">GOOGLE</a>*/}\r\n          <FacebookLogin\r\n            appId=\"375214849866140\"\r\n            // autoLoad={true}\r\n            callback={onSuccessFacebookLogin}\r\n            // fields=\"name,email,picture\"\r\n            render={renderProps => (\r\n              <button className=\"fb-button\" onClick={renderProps.onClick}>\r\n                <TiSocialFacebookCircular />\r\n                Sign in with Facebook\r\n              </button>\r\n            )}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    profile: state.preview.profile\r\n  }),\r\n  {\r\n    login\r\n  }\r\n)(SocialLogin)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets } from '../../reducers/preview'\r\nimport { login, signup } from '../../reducers/profile'\r\nimport './signup-form.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport { Formik } from 'formik';\r\nimport { required, email, passwordsMatch, minLength } from '../../services/validations';\r\nimport classNames from 'classnames';\r\nimport backend from '../../services/backend'\r\nimport { toast } from 'react-toastify';\r\nimport SocialLogin from '../../components/social-login';\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  password: '',\r\n  repeatPassword: ''\r\n};\r\n\r\nconst validate = values => {\r\n  let errors = {};\r\n  let emailError = required(values.email) || email(values.email);\r\n  if (emailError) {\r\n    errors.email = emailError;\r\n  }\r\n  let passwordError = required(values.password) || minLength(values.password, 6);\r\n  if (passwordError) {\r\n    errors.password = passwordError;\r\n  }\r\n  let repeatPasswordError = required(values.repeatPassword) || passwordsMatch(values.repeatPassword, values.password);\r\n  if (repeatPasswordError) {\r\n    errors.repeatPassword = repeatPasswordError;\r\n  }\r\n\r\n  return errors\r\n};\r\n\r\n\r\nfunction SignupForm(props) {\r\n\r\n  function onSuccessFacebookLogin(res) {\r\n    props.login(res, 'facebook').then(() => {\r\n      backend.getProfileInfo().then(() => {\r\n        props.onSuccessFacebookLogin()\r\n      });\r\n    });\r\n  }\r\n  function onSuccessGoogleLogin(res) {\r\n    props.login(res, 'google').then((res) => {\r\n      backend.getProfileInfo().then(() => {\r\n        props.onSuccessGoogleLogin()\r\n      });\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className={ classNames('SignupForm', 'place-' + props.place) }>\r\n      {props.place === 'modal' && (\r\n        <h5 className=\"title\">Please sign up to download</h5>\r\n      )}\r\n      {props.place === 'page' && (\r\n        <h5 className=\"title\">Sign Up</h5>\r\n      )}\r\n      <SocialLogin\r\n        onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n        onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n      />\r\n      <Formik\r\n        initialValues={initialValues}\r\n        validate={validate}\r\n        validateOnChange={true}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n          props.signup(values)\r\n            .then(response => {\r\n              props.onSuccessEmailLogin();\r\n            })\r\n            .catch((e) => {\r\n              toast.error('Unexpected error. Try again later.')\r\n            })\r\n            .finally(() => setSubmitting(false))\r\n        }}\r\n      >\r\n        {formProps => {\r\n          const {\r\n            values,\r\n            errors,\r\n            touched,\r\n            isSubmitting,\r\n            handleChange,\r\n            handleBlur,\r\n            handleSubmit,\r\n          } = formProps;\r\n          return (\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"control form-group\">\r\n                <label htmlFor=\"email\" className=\"label\">Email</label>\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"text\"\r\n                  value={values.email}\r\n                  placeholder=\"Email\"\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  className={classNames('input form-control', touched.email && errors.email && 'error')}\r\n                />\r\n                { touched.email && errors.email &&\r\n                <div className=\"error-message\">{ errors.email }</div> }\r\n              </div>\r\n\r\n              <div className=\"control form-group\">\r\n                <label htmlFor=\"password\" className=\"label\">Password</label>\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  value={values.password}\r\n                  placeholder=\"Password\"\r\n                  onChange={handleChange}\r\n                  className={classNames('input form-control', touched.password && errors.password && 'error')}\r\n                />\r\n                { touched.password && errors.password &&\r\n                <div className=\"error-message\">{ errors.password }</div> }\r\n              </div>\r\n\r\n              <div className=\"control form-group\">\r\n                <label htmlFor=\"repeatPassword\" className=\"label\">Repeat your password</label>\r\n                <input\r\n                  id=\"repeatPassword\"\r\n                  name=\"repeatPassword\"\r\n                  type=\"password\"\r\n                  value={values.repeatPassword}\r\n                  placeholder=\"Repeat your password\"\r\n                  onChange={handleChange}\r\n                  className={classNames('input form-control', touched.password && errors.password && 'error')}\r\n                />\r\n                { touched.repeatPassword && errors.repeatPassword &&\r\n                <div className=\"error-message\">{ errors.repeatPassword }</div> }\r\n              </div>\r\n              <div className=\"control form-group\">\r\n                <input\r\n                  type=\"submit\"\r\n                  value=\"Sign Up\"\r\n                  disabled={isSubmitting}\r\n                  className=\"submit btn btn-block btn-lg btn-primary\"\r\n                />\r\n              </div>\r\n              <div className='signin'>\r\n                {props.place === 'page' ? (\r\n                  <Link to=\"signin\">Already have an account? Sign in now!</Link>\r\n                ) : (\r\n                  <a href=\"\" onClick={e => { e.preventDefault(); props.onSignInClick() }}>\r\n                    Already have an account? Sign in now!\r\n                  </a>\r\n                )}\r\n              </div>\r\n            </form>\r\n          );\r\n        }}\r\n      </Formik>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets\r\n  }),\r\n  {\r\n    getSets,\r\n    login,\r\n    signup\r\n  }\r\n)(SignupForm)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets } from '../../reducers/preview'\r\nimport { login } from '../../reducers/profile'\r\nimport './signin-form.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport { Formik } from 'formik';\r\nimport { required, email, minLength } from '../../services/validations';\r\nimport backend from '../../services/backend'\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport SocialLogin from '../social-login/SocialLogin'\r\nimport { toast } from 'react-toastify'\r\n\r\n\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  password: ''\r\n};\r\n\r\nconst validate = values => {\r\n  let errors = {};\r\n  let emailError = required(values.email) || email(values.email);\r\n  if (emailError) {\r\n    errors.email = emailError;\r\n  }\r\n  let passwordError = required(values.password) || minLength(values.password, 6);\r\n  if (passwordError) {\r\n    errors.password = passwordError;\r\n  }\r\n  return errors\r\n};\r\n\r\n\r\nfunction SigninForm(props) {\r\n\r\n  function onSuccessFacebookLogin(res) {\r\n    props.login(res, 'facebook').then(() => {\r\n      backend.getProfileInfo().then(() => {\r\n        props.onSuccessFacebookLogin();\r\n      });\r\n    });\r\n  }\r\n\r\n  function onSuccessGoogleLogin(res) {\r\n    props.login(res, 'google').then(() => {\r\n      backend.getProfileInfo().then(() => {\r\n        props.onSuccessGoogleLogin();\r\n      });\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"SigninForm\">\r\n      {props.place === 'modal' && (\r\n        <h5 className=\"title\">Please sign in to download</h5>\r\n      )}\r\n      {props.place === 'page' && (\r\n        <h5 className=\"title\">Sign In</h5>\r\n      )}\r\n      <SocialLogin\r\n        onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n        onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n      />\r\n      <Formik\r\n        initialValues={initialValues}\r\n        validate={validate}\r\n        validateOnChange={true}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n          props.login(values)\r\n            .then(response => {\r\n              props.onSuccessEmailLogin();\r\n            })\r\n            .catch(() => {\r\n              toast.error('Unexpected error. Try again later.')\r\n            })\r\n            .finally(() => setSubmitting(false))\r\n        }}\r\n      >\r\n        {formProps => {\r\n          const {\r\n            values,\r\n            errors,\r\n            touched,\r\n            isSubmitting,\r\n            handleChange,\r\n            handleBlur,\r\n            handleSubmit,\r\n          } = formProps;\r\n          return (\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"control form-group\">\r\n                <label htmlFor=\"email\" className=\"label\">Email</label>\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"text\"\r\n                  value={values.email}\r\n                  placeholder=\"Email\"\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  className={classNames('input form-control', touched.email && errors.email && 'error')}\r\n                />\r\n                { touched.email && errors.email &&\r\n                <div className=\"error-message\">{ errors.email }</div> }\r\n              </div>\r\n\r\n              <div className=\"control form-group\">\r\n                <label htmlFor=\"password\" className=\"label\">Password</label>\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  value={values.password}\r\n                  placeholder=\"Password\"\r\n                  onChange={handleChange}\r\n                  className={classNames('input form-control', touched.password && errors.password && 'error')}\r\n                />\r\n                { touched.password && errors.password &&\r\n                <div className=\"error-message\">{ errors.password }</div> }\r\n              </div>\r\n              <div className=\"control form-group\">\r\n                <input\r\n                  type=\"submit\"\r\n                  value=\"Sign In\"\r\n                  disabled={isSubmitting}\r\n                  className=\"submit btn btn-block btn-lg btn-primary\"\r\n                />\r\n              </div>\r\n              <div className='signup'>\r\n                {props.place === 'page' ? (\r\n                  <Link to=\"signup\">New to Avatar Maker? Sign up now!</Link>\r\n                ) : (\r\n                  <a href=\"\" onClick={e => { e.preventDefault(); props.onSignUpClick() }}>\r\n                    New to Avatar Maker? Sign up now!\r\n                  </a>\r\n                )}\r\n              </div>\r\n            </form>\r\n          );\r\n        }}\r\n      </Formik>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets\r\n  }),\r\n  {\r\n    getSets,\r\n    login\r\n  }\r\n)(SigninForm)\r\n","import React, { useEffect, useState } from 'react'\r\nimport './download-modal.scss'\r\nimport Modal from 'react-modal';\r\nimport { connect } from 'react-redux'\r\nimport Spinner from '../spinner';\r\nimport SignupFrom from '../signup-form';\r\nimport SigninFrom from '../signin-form';\r\n\r\nModal.setAppElement('#root')\r\n\r\nfunction DownloadModal(props) {\r\n\r\n  const [currentPageSignIn, setCurrentPageSignIn] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (props.profile && props.isOpen) {\r\n      props.onDownload();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.profile, props.isOpen])\r\n\r\n  function onSuccessFacebookLogin() {\r\n\r\n  }\r\n\r\n  function onSuccessGoogleLogin() {\r\n\r\n  }\r\n  function onSuccessEmailLogin() {\r\n\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={props.isOpen}\r\n      onRequestClose={props.closeModal}\r\n      className=\"download-modal\"\r\n    >\r\n      <div>\r\n        {props.profile ?\r\n          (\r\n            <div className=\"isDownloading\">\r\n              <div className=\"email\">\r\n                You are logged in as {props.profile.email}\r\n              </div>\r\n              <p>\r\n                Downloading...\r\n                <div className=\"spinner-wrapper\">\r\n                  <Spinner width={100} height={100} />\r\n                </div>\r\n              </p>\r\n            </div>\r\n          ) : currentPageSignIn ? (\r\n            <SigninFrom\r\n              place=\"modal\"\r\n              onSignUpClick={() => setCurrentPageSignIn(false)}\r\n              onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n              onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n              onSuccessEmailLogin={onSuccessEmailLogin}\r\n            />\r\n            ) : (\r\n            <SignupFrom\r\n              place=\"modal\"\r\n              onSignInClick={() => setCurrentPageSignIn(true)}\r\n              onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n              onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n              onSuccessEmailLogin={onSuccessEmailLogin}\r\n            />\r\n          )\r\n        }\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    profile: state.profile.profile\r\n  })\r\n)(DownloadModal)\r\n","import React, {useState} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getPreviewIsLoading, randomizeLayers, saveImage } from '../../reducers/preview'\r\nimport './button-actions.scss'\r\nimport { FaDownload, FaRandom } from 'react-icons/fa'\r\n\r\nimport DownloadSuccessModal from '../download-success-modal'\r\nimport DownloadModal from '../download-modal'\r\n\r\n\r\nfunction ButtonActions(props) {\r\n\r\n  let [modalSuccessIsOpen, setModalSuccessIsOpen] = useState(false);\r\n  let [modalDownloadIsOpen, setModalDownloadIsOpen] = useState(false);\r\n  let [imgBase64, setImgBase64] = useState(null);\r\n\r\n  function onDownload() {\r\n    props.saveImage(props.setId).then((response) => {\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(response.data);\r\n      reader.onloadend = function() {\r\n        let base64data = reader.result;\r\n        setImgBase64(base64data);\r\n        setModalSuccessIsOpen(true);\r\n        setModalDownloadIsOpen(false);\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"ButtonActions\">\r\n      <button\r\n        className=\"btn btn-primary btn-wide mb-2\"\r\n        onClick={props.randomizeLayers}\r\n        disabled={props.savingIsLoading || props.previewIsLoading}\r\n      >\r\n        <FaRandom />&nbsp;\r\n        <span className=\"button-text\">Random</span>\r\n      </button>\r\n      <br/>\r\n      <button\r\n        className=\"btn btn-primary btn-wide\"\r\n        onClick={() => setModalDownloadIsOpen(true)}\r\n        disabled={props.savingIsLoading || props.previewIsLoading}\r\n      >\r\n        <FaDownload />&nbsp;\r\n        <span className=\"button-text\">Download</span>\r\n      </button>\r\n      <DownloadModal\r\n        isOpen={modalDownloadIsOpen}\r\n        closeModal={() => setModalDownloadIsOpen(false)}\r\n        onDownload={onDownload}\r\n      />\r\n      <DownloadSuccessModal\r\n        isOpen={modalSuccessIsOpen}\r\n        closeModal={() => setModalSuccessIsOpen(false)}\r\n        imgBase64={imgBase64}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    savingIsLoading: state.preview.savingIsLoading,\r\n    previewIsLoading: state.preview.layersAreLoading || getPreviewIsLoading(state)\r\n  }),\r\n  dispatch => ({\r\n    randomizeLayers: () => dispatch(randomizeLayers()),\r\n    saveImage: (setId) => dispatch(saveImage(setId))\r\n  })\r\n)(ButtonActions)\r\n","import React from 'react';\r\nimport './tile.scss'\r\nimport classNames from 'classnames'\r\n\r\nexport default function Tile ({id, active, part, url, selectPart}) {\r\n  return (\r\n    <div className={classNames('Tile', active && 'active')} onClick={() => selectPart(id, part)}>\r\n      <img src={url} alt=\"\"/>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { changeColor } from '../../reducers/preview'\r\nimport './color-picker.scss'\r\nimport { ChromePicker } from 'react-color'\r\nimport { FaEyeDropper } from 'react-icons/fa'\r\n\r\n\r\nfunction ColorPicker({ part, changeColor, partsData, current }) {\r\n  const [showPicker, setShowPicker] = useState(false)\r\n  const [currentColor, setCurrentColor] = useState((current[part] && current[part].color) || '#ffffff');\r\n  const colors = partsData.get(part).colors;\r\n\r\n  const onBackgroundClick = () => {\r\n    setShowPicker(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('click', onBackgroundClick, false)\r\n    return function cleanup() {\r\n      window.removeEventListener('click', onBackgroundClick)\r\n    }\r\n  }, [])\r\n\r\n  if (!colors || !colors.length) return null;\r\n\r\n  return (\r\n    <div className=\"ColorPicker\" onClick={e => e.stopPropagation()}>\r\n      <div\r\n        className=\"color color-pipette\"\r\n        onClick={() => {\r\n          setShowPicker(!showPicker)\r\n        }}\r\n        style={{backgroundColor: (current[part] && current[part].color) || currentColor}}\r\n      >\r\n        <FaEyeDropper/>\r\n      </div>\r\n      {colors.map(color => (\r\n       <div className=\"color\"\r\n            style={{background: color}}\r\n            key={color}\r\n            onClick={() => changeColor(part, color)}>\r\n       </div>\r\n      ))}\r\n      { showPicker &&\r\n        <ChromePicker\r\n          className=\"chromePicker\"\r\n          disableAlpha={true}\r\n          color={(current[part] && current[part].color) || currentColor}\r\n\r\n          onChange={(color) => {\r\n            setCurrentColor(color.hex);\r\n            changeColor(part, color.hex);\r\n          }}\r\n        />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    partsData: state.preview.partsData,\r\n    current: state.preview.current\r\n  }),\r\n  dispatch => ({\r\n    changeColor: (part, color) => dispatch(changeColor(part, color)),\r\n  })\r\n)(ColorPicker)\r\n","import React from 'react';\r\nimport Tile from '../../components/tile';\r\nimport { connect } from 'react-redux'\r\nimport { changeColor } from '../../reducers/preview'\r\nimport ColorPicker from '../color-picker'\r\n\r\nfunction Layer({items, current, selectPart, part}) {\r\n  if (!(items && items.get(part) && items.get(part).images && items.get(part).images.length)) return 'No items on this layer'\r\n  return (\r\n    <div>\r\n      { items.get(part).images.map(item => (\r\n        <Tile\r\n          active={current && current[part] && (current[part]._id === item._id)}\r\n          key={item._id}\r\n          id={item._id}\r\n          part={part}\r\n          url={item.value}\r\n          selectPart={selectPart}\r\n        />\r\n      )) }\r\n      <br/>\r\n      { !items.get(part).inheritColorFrom && <ColorPicker part={part} /> }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    items: state.preview.partsData,\r\n    current: state.preview.current\r\n  }),\r\n  dispatch => ({\r\n    changeColor: (part, color) => dispatch(changeColor(part, color)),\r\n    selectPart: (_id, part) => dispatch({ type: 'SELECT_PART', payload: {_id, part} })\r\n  })\r\n)(Layer)\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './main-tabs.scss'\r\nimport { Tab, TabList, TabPanel, Tabs } from 'react-tabs'\r\nimport Layer from '../layer'\r\n\r\nfunction MainTabs({ PARTS, partsData }) {\r\n  if (!PARTS || !PARTS.length) {\r\n    return <div></div>\r\n  }\r\n  return (\r\n    <div className=\"MainTabs\">\r\n      <Tabs defaultIndex={0}>\r\n        <TabList>\r\n          {PARTS.map((part) => (\r\n            <Tab key={part}>{partsData.get(part).title}</Tab>\r\n          ))}\r\n        </TabList>\r\n\r\n        {PARTS.map((part) => (\r\n          <TabPanel key={part}>\r\n            <Layer part={part}/>\r\n          </TabPanel>\r\n        ))}\r\n\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    PARTS: state.preview.PARTS,\r\n    partsData: state.preview.partsData\r\n  })\r\n)(MainTabs)\r\n","import React from 'react'\r\nimport './app-header.scss'\r\nimport { FaGrinTongue } from 'react-icons/fa'\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nfunction AppHeader(props) {\r\n  return (\r\n    <div className=\"AppHeader\">\r\n      <div className=\"logo\">\r\n        <Link to='/'>\r\n          <FaGrinTongue />\r\n          Avatar Maker\r\n        </Link>\r\n      </div>\r\n      <ul className=\"menu-items\">\r\n        {props.sets.map((set, index) => (\r\n          <li key={index}>\r\n            { (props.match && (props.match.params.setId === set._id)) ? (\r\n              <Link to={set._id} onClick={e => e.preventDefault()} className='disabled'>\r\n                {set.name}\r\n              </Link>\r\n            ) : (\r\n              <Link to={set._id}>\r\n                {set.name}\r\n              </Link>\r\n            ) }\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      {\r\n        props.profile ? (\r\n          <div className=\"profile-name\">\r\n            {props.profile.email}\r\n          </div>\r\n        ) : (\r\n          <div className=\"signup-wrapper\">\r\n            <Link to='/signup'>\r\n              <button className=\"btn btn-info btn-sm\">SIGN UP</button>\r\n            </Link>\r\n          </div>\r\n        )\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets,\r\n    profile: state.profile.profile\r\n  })\r\n)(AppHeader)\r\n","import React from 'react'\r\nimport './app-menu.scss'\r\nimport { connect } from 'react-redux'\r\nimport { slide as Menu } from 'react-burger-menu'\r\nimport { Link } from 'react-router-dom'\r\nimport { FaSignInAlt, FaUserPlus, FaSignOutAlt, FaDownload } from 'react-icons/fa'\r\nimport { logOut } from '../../reducers/profile';\r\n\r\nfunction AppMenu(props) {\r\n\r\n  function logOut(e) {\r\n    e.preventDefault();\r\n    props.logOut();\r\n  }\r\n\r\n  return (\r\n    <div className=\"AppMenu\">\r\n      <Menu right width={ 280 }>\r\n        { props.profile ?\r\n          (\r\n            <React.Fragment>\r\n              <Link id=\"downloads\" className=\"menu-item\" to=\"/downloads\">\r\n                <FaDownload />&nbsp;<span>Downloads</span>\r\n              </Link>\r\n              <a id=\"logOut\" className=\"menu-item\" href=\"\" onClick={logOut}>\r\n                <FaSignOutAlt />&nbsp;<span>Log out</span>\r\n              </a>\r\n            </React.Fragment>\r\n          ) :\r\n          (\r\n            <React.Fragment>\r\n              <Link id=\"signUp\" className=\"menu-item\" to=\"/signup\">\r\n                <FaUserPlus />&nbsp;<span>Sign Up</span>\r\n              </Link>\r\n              <Link id=\"signIn\" className=\"menu-item\" to=\"/signin\">\r\n                <FaSignInAlt />&nbsp;<span>Log In</span>\r\n              </Link>\r\n            </React.Fragment>\r\n          )\r\n        }\r\n\r\n        <ul className=\"menu-items\">\r\n          {props.sets.map((set, index) => (\r\n            <li key={index}>\r\n              { (props.match && (props.match.params.setId === set._id)) ? (\r\n                <Link to={set._id} onClick={e => e.preventDefault()} className='disabled'>\r\n                  {set.name}\r\n                </Link>\r\n              ) : (\r\n                <Link to={set._id}>\r\n                  {set.name}\r\n                </Link>\r\n              ) }\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </Menu>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets,\r\n    profile: state.profile.profile\r\n  }),\r\n  {\r\n    logOut\r\n  }\r\n)(AppMenu)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport './avatar-page.scss'\r\n\r\nimport Preview from '../../components/preview'\r\nimport ButtonActions from '../../components/button-actions'\r\nimport { getSets, loadLayers } from '../../reducers/preview'\r\nimport MainTabs from '../../components/main-tabs'\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\n\r\n\r\nfunction AvatarPage(props) {\r\n\r\n  useEffect(() => {\r\n    props.getSets().then(response => {\r\n      if (!props.match.params.setId) {\r\n        props.history.push(response.data[0]._id);\r\n      }\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (props.match.params.setId) {\r\n      props.loadLayers(props.match.params.setId);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.match.params.setId]);\r\n\r\n  return (\r\n    <div className=\"AvatarPage\">\r\n      <AppMenu match={props.match}/>\r\n      <AppHeader match={props.match}/>\r\n      <aside className=\"App-left-col\">\r\n        <div className=\"left-col-container\">\r\n          <Preview setId={props.match.params.setId}/>\r\n          <br/>\r\n          <ButtonActions setId={props.match.params.setId}/>\r\n        </div>\r\n      </aside>\r\n      <main className=\"App-main\">\r\n        <MainTabs />\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets\r\n  }),\r\n  {\r\n    loadLayers,\r\n    getSets\r\n  }\r\n)(AvatarPage)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets } from '../../reducers/preview'\r\nimport { login } from '../../reducers/profile'\r\nimport './signup-page.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport face from './face.png';\r\nimport classNames from 'classnames';\r\nimport backend from '../../services/backend'\r\nimport { toast } from 'react-toastify';\r\nimport SignupForm from '../signup-form';\r\n\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\n\r\n\r\n\r\nfunction SignupPage(props) {\r\n\r\n  function onSuccessFacebookLogin(res) {\r\n    redirectBack();\r\n  }\r\n  function onSuccessGoogleLogin(res) {\r\n    redirectBack();\r\n  }\r\n  function onSuccessEmailLogin(res) {\r\n    redirectBack();\r\n  }\r\n\r\n  function redirectBack() {\r\n    if (props.currentSet) {\r\n      props.history.push('/' + props.currentSet);\r\n    } else {\r\n      props.history.pushfa('/');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"SignupPage\">\r\n      <AppHeader />\r\n      <AppMenu />\r\n      <div className=\"wrapper\">\r\n        <div className=\"left-col\">\r\n          <img src={face} alt=\"\"/>\r\n        </div>\r\n        <div className=\"right-col\">\r\n          <div className=\"form-wrapper\">\r\n            <SignupForm\r\n              place=\"page\"\r\n              onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n              onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n              onSuccessEmailLogin={onSuccessEmailLogin}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets,\r\n    currentSet: state.preview.currentSet\r\n  }),\r\n  {\r\n    getSets,\r\n    login\r\n  }\r\n)(SignupPage)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets } from '../../reducers/preview'\r\nimport { login } from '../../reducers/profile'\r\nimport './signin-page.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport face from './face.png';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\nimport SigninForm from '../signin-form';\r\n\r\n\r\n\r\nfunction SigninPage(props) {\r\n\r\n  function onSuccessFacebookLogin(res) {\r\n    redirectBack();\r\n  }\r\n  function onSuccessGoogleLogin(res) {\r\n    redirectBack();\r\n  }\r\n  function onSuccessEmailLogin(res) {\r\n    redirectBack();\r\n  }\r\n\r\n  function redirectBack() {\r\n    if (props.currentSet) {\r\n      props.history.push('/' + props.currentSet);\r\n    } else {\r\n      props.history.push('/');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"SigninPage\">\r\n      <AppHeader />\r\n      <AppMenu />\r\n      <div className=\"wrapper\">\r\n        <div className=\"left-col\">\r\n          <img src={face} alt=\"\"/>\r\n        </div>\r\n        <div className=\"right-col\">\r\n          <div className=\"form-wrapper\">\r\n            <SigninForm\r\n              place=\"page\"\r\n              onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n              onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n              onSuccessEmailLogin={onSuccessEmailLogin}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets,\r\n    currentSet: state.preview.currentSet\r\n  }),\r\n  {\r\n    getSets,\r\n    login\r\n  }\r\n)(SigninPage)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getDownloads, removeDownload } from '../../reducers/profile'\r\nimport { setCustomLayers } from '../../reducers/preview'\r\nimport './downloads-page.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport Spinner from '../spinner';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\n\r\n\r\nfunction DownloadsPage(props) {\r\n\r\n  useEffect(() => {\r\n    props.getDownloads()\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"DownloadsPage\">\r\n      <AppHeader />\r\n      <AppMenu />\r\n      <div className=\"wrapper\">\r\n        <div className=\"width-wrapper\">\r\n          <h4 className=\"title\">Downloads</h4>\r\n          {props.downloadsAreLoading ? (\r\n              <div className=\"spinner-wrapper\">\r\n                <Spinner height=\"300px\" width=\"300px\" />\r\n              </div>\r\n          ) : (\r\n            <div>\r\n            { (!props.downloads || !props.downloads.length) && <h6 className=\"no-downloads\">You have no downloads yet</h6> }\r\n            { props.downloads.length ? props.downloads.map(download => (\r\n              <div\r\n                key={download._id}\r\n                className={classNames(\"preview-tile\",\r\n                  props.deletingDownloads.includes(download._id) && 'deleting')}\r\n              >\r\n                {props.deletingDownloads.includes(download._id) && (\r\n                  <Spinner height=\"100px\" width=\"100px\" />\r\n                )}\r\n                <img src={download.preview} alt=\"\"/>\r\n                <Link\r\n                  className=\"btn btn-primary btn-sm\"\r\n                  to={ '/' + download.setId }\r\n                  onClick={() => props.setCustomLayers(download.layers)}\r\n                >Edit</Link>\r\n                <br/>\r\n                <button\r\n                  className=\"btn btn-danger btn-sm\"\r\n                  onClick={ () => props.removeDownload(download._id) }>Delete</button>\r\n              </div>\r\n            )) : ''}\r\n            </div>\r\n            )\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    downloads: state.profile.downloads,\r\n    downloadsAreLoading: state.profile.downloadsAreLoading,\r\n    deletingDownloads: state.profile.deletingDownloads,\r\n  }),\r\n  {\r\n    getDownloads,\r\n    removeDownload,\r\n    setCustomLayers\r\n  }\r\n)(DownloadsPage)\r\n","import React from 'react';\nimport { HashRouter as Router, Route, Switch, matchPath } from \"react-router-dom\";\n\nimport \"react-tabs/style/react-tabs.css\";\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.scss';\nimport AvatarPage from './components/avatar-page'\nimport SignupPage from './components/signup-page'\nimport SigninPage from './components/signin-page'\nimport DownloadsPage from './components/downloads-page'\nimport { connect } from 'react-redux'\nimport { getProfileInfo } from './reducers/profile'\n\nclass App extends React.Component {\n\n  constructor(props) {\n    props.getProfileInfo();\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ToastContainer autoClose={4000} hideProgressBar={true}/>\n        {/*<Router basename={process.env.REACT_APP_ROUTER_BASE_URL || ''}>*/}\n        <Router>\n          <Switch>\n            <Route path=\"/\" exact component={AvatarPage} />\n            <Route path=\"/downloads\" exact component={DownloadsPage} />\n            <Route path=\"/signup\" exact component={SignupPage} />\n            <Route path=\"/signin\" exact component={SigninPage} />\n            <Route path=\"/:setId\" exact component={AvatarPage} />\n          </Switch>\n        </Router>\n      </div>\n    );\n  }\n}\n\n\nexport default connect(\n  null,\n  {\n    getProfileInfo\n  }\n)(App)\n\n\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux'\nimport reducer from './reducers'\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly'\nimport ReduxThunk from 'redux-thunk'\n\n\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(ReduxThunk)));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}