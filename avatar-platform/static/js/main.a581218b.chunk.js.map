{"version":3,"sources":["components/signup-page/face.png","components/signin-page/face.png","services/canvas.js","services/backend.js","reducers/preview.js","components/spinner/Spinner.js","components/preview/Preview.js","components/download-success-modal/DownloadSuccessModal.js","components/social-login/SocialLogin.js","components/download-modal/DownloadModal.js","components/button-actions/ButtonActions.js","components/face-part-container/FacePartContainer.js","components/color-picker/ColorPicker.js","face-parts/Base.js","components/main-tabs/MainTabs.js","components/app-header/AppHeader.js","components/app-menu/AppMenu.js","components/avatar-page/AvatarPage.js","services/validations.js","components/signup-page/SignupPage.js","components/signin-page/SigninPage.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","canvas","document","createElement","context","getContext","IMG_WIDTH","IMG_HEIGHT","width","height","changeImageColor","url","color","Promise","resolve","reject","img","src","onload","clearRect","drawImage","alpha","imageSmoothingQuality","globalCompositeOperation","fillStyle","fillRect","colorize","toDataURL","API_URL","process","instance","backend","Backend","_this","this","Object","classCallCheck","authAxios","axiosInstance","token","signup","body","post","signupFacebook","then","response","setAxiosInstance","data","localStorage","setItem","catch","e","signupGoogle","console","log","get","signin","getProfileInfo","getFaceParts","setId","getSets","login","saveImage","method","responseType","params","logOut","removeItem","getItem","axios","create","baseURL","headers","Content-Type","Authorization","dispatch","type","payload","strategy","loginRequest","changeColor","part","getState","partsToInheritColor","partsDataOriginal","forEach","pd","index","inheritColorFrom","_id","push","images","el","value","inheritPart","getCurrentValues","createSelector","state","partsData","current","entries","values","_loop","i","key","find","zIndex","length","sort","a","b","map","v","getPreviewIsLoading","isLoading","reducer","initialState","handlers","arguments","undefined","action","hasOwnProperty","createReducer","profile","PARTS","PARTS_WITH_COLORS","partSprites","previewIsLoading","facePartsAreLoading","savingIsLoading","sets","hiddenParts","conflicts","SELECT_PART","_ref","_ref$payload","randomized","newCurrent","assign","partId","conflictedPart","objectSpread","defineProperty","SET_COLOR_START","_ref2","newPart","SET_COLOR","_ref3","_ref3$payload","newPartImages","concat","GET_PROFILE_INFO_SUCCESS","_ref4","LOGIN_SUCCESS","_ref5","LOGOUT","SET_PREVIEW_IS_LOADING","_ref6","GET_SETS_SUCCESS","_ref7","LOAD_FACE_PARTS_REQUEST","_ref8","LOAD_FACE_PARTS_SUCCESS","_ref9","newPartsData","cloneDeep","partIndex","unshift","conflictsWith","showOnStart","keys","pickBy","colors","SAVE_IMAGE_REQUEST","SAVE_IMAGE_SUCCESS","Spinner","_ref$width","_ref$height","react_default","className","style","connect","items","classNames","item","backgroundImage","alt","DownloadSuccessModal","props","lib_default","isOpen","onRequestClose","closeModal","imgBase64","Modal","setAppElement","name","google_login","clientId","buttonText","onSuccess","res","onSuccessGoogleLogin","access_token","accessToken","onFailure","err","facebook_login_render_props_default","appId","callback","onSuccessFacebookLogin","render","renderProps","onClick","ti_index_esm","useEffect","onDownload","social_login_SocialLogin","randomizeFace","partsShuffled","Math","random","reduce","accum","includes","r","floor","toString","padStart","g","saveAs","Blob","_useState","useState","_useState2","slicedToArray","modalSuccessIsOpen","setModalSuccessIsOpen","_useState3","_useState4","modalDownloadIsOpen","setModalDownloadIsOpen","_useState5","_useState6","setImgBase64","disabled","index_esm","download_modal_DownloadModal","reader","FileReader","readAsDataURL","onloadend","base64data","result","FacePartContainer","id","active","selectPart","showPicker","setShowPicker","currentColor","setCurrentColor","onBackgroundClick","window","addEventListener","removeEventListener","stopPropagation","backgroundColor","background","react_color_lib","disableAlpha","onChange","hex","noColors","color_picker_ColorPicker","esm","defaultIndex","title","face_parts_Base","set","match","react_router_dom","to","preventDefault","email","BurgerMenu","right","Fragment","href","loadFaceParts","history","app_menu_AppMenu","app_header_AppHeader","preview_Preview","button_actions_ButtonActions","main_tabs_MainTabs","required","minLength","test","initialValues","password","repeatPassword","validate","errors","emailError","passwordError","repeatPasswordError","valueToEqual","passwordsMatch","face","formik_esm","validateOnChange","onSubmit","setSubmitting","toast","success","finally","touched","isSubmitting","handleChange","handleBlur","handleSubmit","htmlFor","placeholder","onBlur","App","possibleConstructorReturn","getPrototypeOf","call","react_toastify","autoClose","hideProgressBar","react_router","path","exact","component","AvatarPage","SignupPage","SigninPage","React","Component","Boolean","location","hostname","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","ReactDOM","es","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a581218b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/face.2c39ddd4.png\";","module.exports = __webpack_public_path__ + \"static/media/face.6721bc4f.png\";","const canvas = document.createElement(\"canvas\"), // shared instance\r\n  context = canvas.getContext(\"2d\");\r\n\r\nconst IMG_WIDTH = 600;\r\nconst IMG_HEIGHT = 600;\r\n\r\n// set image pixel size and hex color\r\ncanvas.width = IMG_WIDTH;\r\ncanvas.height = IMG_HEIGHT;\r\n\r\nexport const changeImageColor = (url, color) => {\r\n\r\n  return new Promise((resolve, reject) => {\r\n    let img = document.createElement('img');\r\n    img.src = url;\r\n    img.onload = () => {\r\n\r\n      context.clearRect(0, 0, canvas.width, canvas.height);\r\n      context.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n      colorize(color, 1);\r\n\r\n      context.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n      resolve(canvas.toDataURL(\"image/png\", 0.7));\r\n    }\r\n  })\r\n\r\n\r\n  function colorize(color, alpha) {\r\n    context.imageSmoothingQuality = \"medium\";\r\n    context.globalCompositeOperation = \"source-atop\";\r\n    context.fillStyle = color;\r\n    context.fillRect(0, 0, canvas.width, canvas.height);\r\n    context.globalCompositeOperation = \"multiply\";\r\n  }\r\n}\r\n\r\nexport const createSprite = (base64Urls) => {\r\n  const spriteCanvas = document.createElement(\"canvas\"),\r\n    ctx = spriteCanvas.getContext(\"2d\");\r\n  spriteCanvas.width = base64Urls.length * IMG_WIDTH;\r\n  spriteCanvas.height = IMG_HEIGHT;\r\n\r\n  return new Promise((resolve) => {\r\n\r\n    let promisesArray = [];\r\n\r\n    for (let i = 0; i < base64Urls.length; i++) {\r\n      promisesArray.push(drawImg(base64Urls[i], i * IMG_WIDTH, 0));\r\n    }\r\n\r\n    Promise.all(promisesArray).then(() => {\r\n      resolve(spriteCanvas.toDataURL(\"image/png\", 1));\r\n    })\r\n  });\r\n\r\n  function drawImg(url, x, y) {\r\n    return new Promise((resolve) => {\r\n      let img = document.createElement('img');\r\n      img.src = url;\r\n      img.onload = () => {\r\n        ctx.drawImage(img, x, y, IMG_WIDTH, IMG_HEIGHT);\r\n        resolve();\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n","import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/';\r\n\r\n\r\nlet instance = null;\r\n\r\nclass Backend {\r\n  authAxios = null;\r\n  axiosInstance = null;\r\n  token = null;\r\n\r\n  constructor() {\r\n    if (!instance) {\r\n      instance = this;\r\n      let token = localStorage.getItem('token');\r\n      console.log(token);\r\n      if (token) {\r\n        this.token = token;\r\n      }\r\n      this.setAxiosInstance(token);\r\n    }\r\n    return instance;\r\n  }\r\n\r\n\r\n  signup = (body) => {\r\n    return this.axiosInstance.post(API_URL + 'auth/sign-up', body);\r\n  }\r\n\r\n  signupFacebook = (body) => {\r\n    return new Promise((resolve, reject) => {\r\n      this.axiosInstance.post(API_URL + 'auth/facebook/sign-up', body)\r\n        .then(response => {\r\n          this.setAxiosInstance(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          resolve(response);\r\n        })\r\n        .catch(e => reject(e));\r\n    });\r\n  }\r\n\r\n  signupGoogle = (body) => {\r\n    console.log(body);\r\n    return new Promise((resolve, reject) => {\r\n      this.axiosInstance.get(API_URL + 'auth/google/sign-up', body)\r\n        .then(response => {\r\n          console.log(response);\r\n          this.setAxiosInstance(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          resolve(response);\r\n        })\r\n        .catch(e => reject(e));\r\n    });\r\n  }\r\n\r\n  signin = (body) => {\r\n    return new Promise((resolve, reject) => {\r\n      return this.axiosInstance.post(API_URL + 'auth/login', body)\r\n        .then(response => {\r\n          this.setAxiosInstance(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          resolve(response);\r\n        })\r\n        .catch(e => reject(e));\r\n    });\r\n  }\r\n\r\n  getProfileInfo = () => {\r\n    return this.authAxios.get(API_URL + 'profile/info');\r\n  }\r\n\r\n  getFaceParts = (setId) => {\r\n    return this.axiosInstance.get(API_URL + 'face-parts/' + setId);\r\n  }\r\n\r\n  getSets = () => {\r\n    return this.axiosInstance.get(API_URL + 'face-parts/sets');\r\n  }\r\n\r\n  login = (body) => {\r\n    return this.axiosInstance.post(API_URL + 'face-parts/login', body);\r\n  }\r\n\r\n  saveImage = (setId, data) => {\r\n    return this.axiosInstance({\r\n      url: API_URL + 'save-image/' + setId,\r\n      method: 'GET',\r\n      responseType: 'blob', // important,\r\n      params: { data }\r\n    })\r\n  }\r\n\r\n  logOut = () => {\r\n    this.token = null;\r\n    localStorage.removeItem('token');\r\n  }\r\n\r\n\r\n  // common methods\r\n\r\n  // request(method, ...args) {\r\n  //   return new Promise((resolve, reject) => {\r\n  //     this.authAxios[method](...args).then(response => {\r\n  //       resolve(response);\r\n  //     })\r\n  //       .catch(e => {\r\n  //         if (e.response && e.response.status === 401) {\r\n  //           window.location = (process.env.REACT_APP_ROUTER_BASE_URL || '') + '/#/login';\r\n  //         }\r\n  //         reject(e);\r\n  //       })\r\n  //   })\r\n  // }\r\n\r\n  // SET INSTANCE\r\n  setAxiosInstance(token) {\r\n    this.axiosInstance = axios.create({\r\n      baseURL: API_URL,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      }\r\n    });\r\n    this.authAxios = axios.create({\r\n      baseURL: API_URL,\r\n      headers: {\r\n        Authorization: 'jwt ' + token,\r\n        'Content-Type': 'application/json',\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default new Backend();\r\n","import { createSelector } from 'reselect'\r\nimport { changeImageColor } from '../services/canvas'\r\nimport backend from '../services/backend'\r\nimport { cloneDeep, pickBy } from 'lodash'\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst TRANSPARENT_PIXEL = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\r\nconst TRANSPARENT_ID = 'transparent'\r\n\r\nconst initialState = {\r\n  profile: null,\r\n  partsDataOriginal: {},\r\n  partsData: {},\r\n  PARTS: [],\r\n  PARTS_WITH_COLORS: [],\r\n  partSprites: [],\r\n  previewIsLoading: false,\r\n  facePartsAreLoading: true,\r\n  savingIsLoading: false,\r\n  sets: [],\r\n  hiddenParts: [], // for conflicts\r\n  conflicts: {},\r\n  current: {}\r\n  // current: {\r\n  //   head: {\r\n  //     _id: null,\r\n  //     color: null\r\n  //   }\r\n  // }\r\n};\r\n\r\nexport function createReducer(initialState, handlers) {\r\n  return function reducer(state = initialState, action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action)\r\n    } else {\r\n      return state\r\n    }\r\n  }\r\n}\r\n\r\n// ACTIONS\r\n\r\nexport const loadFaceParts = (setId) => (dispatch) => {\r\n  dispatch({ type: 'LOAD_FACE_PARTS_REQUEST' });\r\n  backend.getFaceParts(setId).then(response => {\r\n    dispatch({ type: 'LOAD_FACE_PARTS_SUCCESS', payload: response });\r\n  }).catch(e => {\r\n    dispatch({ type: 'LOAD_FACE_PARTS_FAILURE', payload: e });\r\n  })\r\n}\r\n\r\nexport const getSets = () => (dispatch) => {\r\n  dispatch({ type: 'GET_SETS_REQUEST' });\r\n  return new Promise(resolve => {\r\n    backend.getSets().then(response => {\r\n      dispatch({ type: 'GET_SETS_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'GET_SETS_FAILURE', payload: e });\r\n    })\r\n  })\r\n}\r\nexport const getProfileInfo = () => (dispatch) => {\r\n  if (!backend.token) return;\r\n  dispatch({ type: 'GET_PROFILE_INFO_REQUEST' });\r\n  return new Promise(resolve => {\r\n    backend.getProfileInfo().then(response => {\r\n      dispatch({ type: 'GET_PROFILE_INFO_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'GET_PROFILE_INFO_FAILURE', payload: e });\r\n    })\r\n  })\r\n}\r\n\r\nexport const login = (body, strategy) => (dispatch) => {\r\n  dispatch({ type: 'LOGIN_REQUEST' });\r\n  let loginRequest = backend.signin;\r\n  if (strategy === 'facebook') {\r\n    loginRequest = backend.signupFacebook;\r\n  }\r\n  if (strategy === 'google') {\r\n    loginRequest = backend.signupGoogle;\r\n  }\r\n  return loginRequest(body).then(response => {\r\n    dispatch({ type: 'LOGIN_SUCCESS', payload: response });\r\n  }).catch(e => {\r\n    dispatch({ type: 'LOGIN_FAILURE', payload: e });\r\n  })\r\n}\r\n\r\nexport const logOut = () => (dispatch) => {\r\n  backend.logOut();\r\n  dispatch({ type: 'LOGOUT'});\r\n\r\n}\r\n\r\nexport const saveImage = (setId) => (dispatch, getState) => {\r\n  const data = getState().current;\r\n  dispatch({ type: 'SAVE_IMAGE_REQUEST' });\r\n  return new Promise((resolve, reject) =>  {\r\n    backend.saveImage(setId, data).then(response => {\r\n      saveAs(new Blob([response.data]), 'image' + Math.floor(Math.random() * 100000 + 1) + '.png');\r\n      dispatch({ type: 'SAVE_IMAGE_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'SAVE_IMAGE_FAILURE', payload: e });\r\n      reject(e);\r\n    })\r\n  });\r\n}\r\n\r\nexport const changeColor = (part, color) => (dispatch, getState) => {\r\n  let partsToInheritColor = [];\r\n  getState().partsDataOriginal.forEach((pd, index) => {\r\n    if (pd.inheritColorFrom === getState().partsDataOriginal[part]._id) {\r\n      partsToInheritColor.push(index);\r\n    }\r\n  })\r\n  getState().partsDataOriginal[part].images.forEach(el => {\r\n    changeImageColor(el.value, color).then((value) => {\r\n      dispatch({ type: 'SET_COLOR', payload: { _id: el._id, part, value, color } })\r\n    })\r\n  })\r\n  partsToInheritColor.forEach(inheritPart => {\r\n    getState().partsDataOriginal[inheritPart].images.forEach(el => {\r\n      changeImageColor(el.value, color).then((value) => {\r\n        dispatch({ type: 'SET_COLOR', payload: { _id: el._id, part: inheritPart, value, color } })\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\n\r\nexport const randomizeFace = () => (dispatch, getState) => {\r\n\r\n  let partsShuffled = [].concat(getState().PARTS).sort(() => Math.random() - 0.5);\r\n  let conflicts = {}\r\n  partsShuffled.forEach(part => {\r\n    if (!getState().partsData[part].images.length) return\r\n    let conflictedArray = Object.values(conflicts).reduce((accum, value) => accum.concat(value), []);\r\n    if (conflictedArray.includes(getState().partsData[part]._id)) {\r\n      return dispatch({type: 'SELECT_PART', payload: {_id: TRANSPARENT_ID, part, randomized: true }})\r\n    };\r\n\r\n    if (getState().PARTS_WITH_COLORS.includes(part)) {\r\n      let r = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n      let g = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n      let b = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n      dispatch(changeColor(part, '#' + r + g + b))\r\n      dispatch({type: 'SET_COLOR_START', payload: { part }})\r\n    }\r\n\r\n    let index = Math.floor(Math.random() * (getState().partsData[part].images.length - 1)) + 1;\r\n    let _id = getState().partsData[part].images[index]._id;\r\n    dispatch({type: 'SELECT_PART', payload: {_id, part, randomized: true }})\r\n    conflicts[part] = getState().conflicts[getState().partsData[part]._id];\r\n  })\r\n}\r\n\r\n\r\n\r\n\r\n// SELECTORS\r\n//\r\nexport const getCurrentValues = createSelector(\r\n  state => state.partsData,\r\n  state => state.current,\r\n  (partsData, current) => {\r\n    let entries = Object.entries(partsData);\r\n    let values = [];\r\n    for (let i = 0; i < entries.length; i ++) {\r\n      let key = entries[i][0];\r\n      if (!current[key]) continue;\r\n      let value = entries[i][1].images.find(el => el._id === current[key]._id)\r\n      values.push({\r\n        zIndex: entries[i][1].zIndex,\r\n        value: value\r\n      });\r\n    }\r\n    values = values.sort((a, b) => a.zIndex - b.zIndex)\r\n    values = values.map(v => v.value && v.value.value)\r\n    return values\r\n  }\r\n)\r\n\r\nexport const getPreviewIsLoading = createSelector(state => state.partsData, partsData => {\r\n  if (!partsData) return true;\r\n  for (let index in partsData) {\r\n    for (let i = 0; i < partsData[index].images.length; i++) {\r\n      if (partsData[index].images[i].isLoading) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n});\r\n\r\n// REDUCER\r\n\r\nconst reducer = createReducer(initialState, {\r\n  SELECT_PART: function(state, { payload: { _id, part, randomized }}) {\r\n    let newCurrent = Object.assign({}, state.current);\r\n\r\n    let partId = state.partsData[part]._id;\r\n\r\n    if (!randomized && state.conflicts[partId]) {\r\n      state.conflicts[partId].forEach(conflictedPart => {\r\n        for (let index in state.partsData) {\r\n          if (state.partsData[index]._id === conflictedPart) {\r\n            newCurrent[index] && (newCurrent[index]._id = TRANSPARENT_ID);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    return {\r\n      ...state,\r\n      current: {\r\n        ...newCurrent,\r\n        [part]: {\r\n          ...state.current[part],\r\n          _id: _id,\r\n        }\r\n      }\r\n    }\r\n  },\r\n  SET_COLOR_START: function(state, { payload: { part }}) {\r\n    let newPart = Object.assign({}, state.partsData[part]);\r\n    newPart.images && newPart.images.forEach(img => img.isLoading = true);\r\n    return {\r\n      ...state,\r\n      partsData: {\r\n        ...state.partsData,\r\n        [part]: newPart\r\n      }\r\n    }\r\n  },\r\n  SET_COLOR: function(state, { payload: {_id, part, value, color }}) {\r\n    let newPartImages = [].concat(state.partsData[part].images)\r\n    newPartImages.find(el => el._id === _id).value = value;\r\n    newPartImages.find(el => el._id === _id).isLoading = false;\r\n    return {\r\n      ...state,\r\n      partsData: {\r\n        ...state.partsData,\r\n        [part]: {\r\n          ...state.partsData[part],\r\n          images: newPartImages\r\n        }\r\n      },\r\n      current: {\r\n        ...state.current,\r\n        [part]: {\r\n          ...state.current[part],\r\n          color\r\n        }\r\n      }\r\n    }\r\n  },\r\n  GET_PROFILE_INFO_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      profile: payload.data\r\n    }\r\n  },\r\n  LOGIN_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      profile: payload.data\r\n    }\r\n  },\r\n  LOGOUT: function(state) {\r\n    return {\r\n      ...state,\r\n      profile: null\r\n    }\r\n  },\r\n  SET_PREVIEW_IS_LOADING: function(state, { value }) {\r\n    return {\r\n      ...state,\r\n      previewIsLoading: value\r\n    }\r\n  },\r\n  GET_SETS_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      sets: payload.data\r\n    }\r\n  },\r\n  LOAD_FACE_PARTS_REQUEST: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      current: {},\r\n      partsDataOriginal: {},\r\n      partsData: {},\r\n      PARTS: [],\r\n      PARTS_WITH_COLORS: [],\r\n      facePartsAreLoading: true\r\n    }\r\n  },\r\n  LOAD_FACE_PARTS_SUCCESS: function(state, { payload }) {\r\n    let newPartsData =  cloneDeep(payload.data);\r\n    let newCurrent = Object.assign({}, state.current);\r\n    let conflicts = {};\r\n    newPartsData.forEach((part, partIndex) => {\r\n      part.images.unshift({\r\n        _id: TRANSPARENT_ID,\r\n        value: TRANSPARENT_PIXEL\r\n      });\r\n      part.images.forEach(img => {\r\n        img.isLoading = false;\r\n      })\r\n      if (part.conflictsWith.length) {\r\n        if (conflicts[part._id]) conflicts[part._id].concat(part.conflictsWith);\r\n        else conflicts[part._id] = part.conflictsWith;\r\n        conflicts[part._id] = part.conflictsWith;\r\n        part.conflictsWith.forEach(conflictedPart => {\r\n          if (conflicts[conflictedPart]) conflicts[conflictedPart].push(part._id);\r\n          else conflicts[conflictedPart] = [part._id];\r\n        })\r\n      }\r\n      // set current\r\n      if (part.showOnStart) {\r\n        newCurrent[partIndex] = {\r\n          _id: part.images[1]._id\r\n        };\r\n      } else {\r\n        newCurrent[partIndex] = {\r\n          _id: TRANSPARENT_ID\r\n        };\r\n      }\r\n    })\r\n\r\n    return {\r\n      ...state,\r\n      conflicts,\r\n      partsData: newPartsData,\r\n      partsDataOriginal: cloneDeep(newPartsData),\r\n      PARTS: Object.keys(payload.data),\r\n      PARTS_WITH_COLORS: Object.keys(pickBy(payload.data, part => part.colors && part.colors.length)),\r\n      facePartsAreLoading: false,\r\n      current: newCurrent\r\n    }\r\n  },\r\n  SAVE_IMAGE_REQUEST: function(state) {\r\n    return {\r\n      ...state,\r\n      savingIsLoading: true\r\n    }\r\n  },\r\n  SAVE_IMAGE_SUCCESS: function(state) {\r\n    return {\r\n      ...state,\r\n      savingIsLoading: false\r\n    }\r\n  }\r\n})\r\n\r\nexport default reducer\r\n","import React from 'react';\r\nimport './spinner.scss'\r\n\r\nexport default function Spinner ({width = 300, height = 300}) {\r\n  return (\r\n    <div className=\"spinner\" style={{width, height}}>Loading...</div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getCurrentValues, getPreviewIsLoading } from '../../reducers/preview'\r\nimport Spinner from '../spinner'\r\nimport classNames from 'classnames'\r\n\r\nimport './preview.scss'\r\n\r\nfunction Preview({ items, previewIsLoading, setId }) {\r\n  return (\r\n    <div className={classNames('Preview', previewIsLoading && 'isLoading')}>\r\n\r\n      <div className=\"images\">\r\n        {\r\n          items.map((item, index) => (\r\n            <div className=\"img\" style={{backgroundImage: 'url(' + item + ')'}} key={index} alt=\"\"/>\r\n          ))\r\n        }\r\n      </div>\r\n      <Spinner />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    items: getCurrentValues(state),\r\n    current: state.current,\r\n    previewIsLoading: state.facePartsAreLoading || getPreviewIsLoading(state) || state.savingIsLoading\r\n  })\r\n)(Preview)\r\n","import React from 'react';\r\nimport './download-success-modal.scss'\r\nimport Modal from 'react-modal';\r\n\r\nModal.setAppElement('#root')\r\n\r\nexport default function DownloadSuccessModal(props) {\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={props.isOpen}\r\n      onRequestClose={props.closeModal}\r\n      className=\"download-success-modal\"\r\n    >\r\n      <h4>Great! Your download has been successful!</h4>\r\n      <img className=\"modal-image\" src={props.imgBase64} alt=\"\"/>\r\n      <h6>If you want to download images in high quality, you can <strong>become premium</strong></h6>\r\n    </Modal>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport './social-login.scss'\r\nimport { GoogleLogin } from 'react-google-login';\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\r\nimport { TiSocialFacebookCircular } from 'react-icons/ti/';\r\nimport { login } from '../../reducers/preview';\r\n\r\n\r\n\r\nfunction SocialLogin(props) {\r\n\r\n  const onSuccessGoogleLogin = (res) => {\r\n    //console.log(res.profileObj);\r\n    console.log(res);\r\n    // props.login({ profile: res.profileObj });\r\n    props.onSuccessGoogleLogin({access_token: res.accessToken});\r\n  }\r\n\r\n  const onSuccessFacebookLogin = (res) => {\r\n    console.log(res);\r\n    props.onSuccessFacebookLogin({access_token: res.accessToken});\r\n    // props.login({ profile: res });\r\n  }\r\n\r\n  return (\r\n    <div className=\"SocialLogin\">\r\n\r\n      {props.profile ? (\r\n        <div>\r\n          You are logged in as {props.profile.name}\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          {/*<button onClick={onSuccessGoogleLogin}>Add</button>*/}\r\n          <GoogleLogin\r\n            clientId=\"546998968320-0cn7qut7aklej8akfljup6hi9a7najba.apps.googleusercontent.com\"\r\n            buttonText=\"Sign in with Google\"\r\n            onSuccess={onSuccessGoogleLogin}\r\n            onFailure={(err) => console.log(err)}\r\n          />\r\n          <FacebookLogin\r\n            appId=\"375214849866140\"\r\n            // autoLoad={true}\r\n            callback={onSuccessFacebookLogin}\r\n            // fields=\"name,email,picture\"\r\n            render={renderProps => (\r\n              <button className=\"fb-button\" onClick={renderProps.onClick}>\r\n                <TiSocialFacebookCircular />\r\n                Sign in with Facebook\r\n              </button>\r\n            )}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    profile: state.profile\r\n  }),\r\n  {\r\n    login\r\n  }\r\n)(SocialLogin)\r\n","import React, {useEffect} from 'react';\r\nimport './download-modal.scss'\r\nimport Modal from 'react-modal';\r\nimport SocialLogin from '../social-login';\r\nimport { connect } from 'react-redux'\r\nimport Spinner from '../spinner';\r\n\r\nModal.setAppElement('#root')\r\n\r\nfunction DownloadModal(props) {\r\n\r\n  useEffect(() => {\r\n    if (props.profile && props.isOpen) {\r\n      props.onDownload();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.profile, props.isOpen])\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={props.isOpen}\r\n      onRequestClose={props.closeModal}\r\n      className=\"download-modal\"\r\n    >\r\n      {props.profile ?\r\n        (\r\n          <div>\r\n            <div>\r\n              You are logged in as {props.profile.name}\r\n            </div>\r\n            <p>\r\n              Downloading...\r\n              <div className=\"spinner-wrapper\">\r\n                <Spinner width={100} height={100} />\r\n              </div>\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <h4>Please sign in to download!</h4>\r\n            <SocialLogin/>\r\n          </div>\r\n        )\r\n      }\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    profile: state.profile\r\n  })\r\n)(DownloadModal)\r\n","import React, {useState} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getPreviewIsLoading, randomizeFace, saveImage } from '../../reducers/preview'\r\nimport './button-actions.scss'\r\nimport { FaDownload, FaRandom } from 'react-icons/fa'\r\n\r\nimport DownloadSuccessModal from '../download-success-modal'\r\nimport DownloadModal from '../download-modal'\r\n\r\n\r\nfunction ButtonActions(props) {\r\n\r\n  let [modalSuccessIsOpen, setModalSuccessIsOpen] = useState(false);\r\n  let [modalDownloadIsOpen, setModalDownloadIsOpen] = useState(false);\r\n  let [imgBase64, setImgBase64] = useState(null);\r\n\r\n  function onDownload() {\r\n    props.saveImage(props.setId).then((response) => {\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(response.data);\r\n      reader.onloadend = function() {\r\n        let base64data = reader.result;\r\n        setImgBase64(base64data);\r\n        setModalSuccessIsOpen(true);\r\n        setModalDownloadIsOpen(false);\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"ButtonActions\">\r\n      <button\r\n        className=\"btn btn-primary btn-wide mb-2\"\r\n        onClick={props.randomizeFace}\r\n        disabled={props.savingIsLoading || props.previewIsLoading}\r\n      >\r\n        <FaRandom />&nbsp;\r\n        <span className=\"button-text\">Random</span>\r\n      </button>\r\n      <br/>\r\n      <button\r\n        className=\"btn btn-primary btn-wide\"\r\n        onClick={() => setModalDownloadIsOpen(true)}\r\n        disabled={props.savingIsLoading || props.previewIsLoading}\r\n      >\r\n        <FaDownload />&nbsp;\r\n        <span className=\"button-text\">Download</span>\r\n      </button>\r\n      <DownloadModal\r\n        isOpen={modalDownloadIsOpen}\r\n        closeModal={() => setModalDownloadIsOpen(false)}\r\n        onDownload={onDownload}\r\n      />\r\n      <DownloadSuccessModal\r\n        isOpen={modalSuccessIsOpen}\r\n        closeModal={() => setModalSuccessIsOpen(false)}\r\n        imgBase64={imgBase64}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    savingIsLoading: state.savingIsLoading,\r\n    previewIsLoading: state.facePartsAreLoading || getPreviewIsLoading(state)\r\n  }),\r\n  dispatch => ({\r\n    randomizeFace: () => dispatch(randomizeFace()),\r\n    saveImage: (setId) => dispatch(saveImage(setId))\r\n  })\r\n)(ButtonActions)\r\n","import React from 'react';\r\nimport './face-part-container.scss'\r\nimport classNames from 'classnames'\r\n\r\nexport default function FacePartContainer ({id, active, part, url, selectPart}) {\r\n  return (\r\n    <div className={classNames('FacePartContainer', active && 'active')} onClick={() => selectPart(id, part)}>\r\n      <img src={url} alt=\"\"/>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { changeColor } from '../../reducers/preview'\r\nimport './color-picker.scss'\r\nimport { ChromePicker } from 'react-color'\r\nimport { FaEyeDropper } from 'react-icons/fa'\r\n\r\n\r\nfunction ColorPicker({ part, changeColor, partsData, current }) {\r\n  const [showPicker, setShowPicker] = useState(false)\r\n  const [currentColor, setCurrentColor] = useState((current[part] && current[part].color) || '#ffffff');\r\n  const colors = partsData[part].colors;\r\n\r\n  const onBackgroundClick = () => {\r\n    setShowPicker(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('click', onBackgroundClick, false)\r\n    return function cleanup() {\r\n      window.removeEventListener('click', onBackgroundClick)\r\n    }\r\n  }, [])\r\n\r\n  if (!colors || !colors.length) return null;\r\n\r\n  return (\r\n    <div className=\"ColorPicker\" onClick={e => e.stopPropagation()}>\r\n      <div\r\n        className=\"color color-pipette\"\r\n        onClick={() => {\r\n          setShowPicker(!showPicker)\r\n        }}\r\n        style={{backgroundColor: (current[part] && current[part].color) || currentColor}}\r\n      >\r\n        <FaEyeDropper/>\r\n      </div>\r\n      {colors.map(color => (\r\n       <div className=\"color\"\r\n            style={{background: color}}\r\n            key={color}\r\n            onClick={() => changeColor(part, color)}>\r\n       </div>\r\n      ))}\r\n      { showPicker &&\r\n        <ChromePicker\r\n          className=\"chromePicker\"\r\n          disableAlpha={true}\r\n          color={(current[part] && current[part].color) || currentColor}\r\n\r\n          onChange={(color) => {\r\n            setCurrentColor(color.hex);\r\n            changeColor(part, color.hex);\r\n          }}\r\n        />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    partsData: state.partsData,\r\n    current: state.current\r\n  }),\r\n  dispatch => ({\r\n    changeColor: (part, color) => dispatch(changeColor(part, color)),\r\n  })\r\n)(ColorPicker)\r\n","import React from 'react';\r\nimport FacePartContainer from '../components/face-part-container'\r\nimport { connect } from 'react-redux'\r\nimport { changeColor } from '../reducers/preview'\r\nimport ColorPicker from '../components/color-picker'\r\n\r\nfunction Base({items, current, changeColor, selectPart, part, noColors}) {\r\n  if (!(items && items[part] && items[part].images && items[part].images.length)) return 'No items on this layer'\r\n  return (\r\n    <div>\r\n      { items[part].images.map(item => (\r\n        <FacePartContainer\r\n          active={current && current[part] && (current[part]._id === item._id)}\r\n          key={item._id}\r\n          id={item._id}\r\n          part={part}\r\n          url={item.value}\r\n          selectPart={selectPart}\r\n        />\r\n      )) }\r\n      <br/>\r\n      { !items[part].inheritColorFrom && <ColorPicker part={part} /> }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    items: state.partsData,\r\n    current: state.current\r\n  }),\r\n  dispatch => ({\r\n    changeColor: (part, color) => dispatch(changeColor(part, color)),\r\n    selectPart: (_id, part) => dispatch({ type: 'SELECT_PART', payload: {_id, part} })\r\n  })\r\n)(Base)\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './main-tabs.scss'\r\nimport { Tab, TabList, TabPanel, Tabs } from 'react-tabs'\r\nimport Base from '../../face-parts/Base'\r\n\r\nfunction MainTabs({ PARTS, partsData }) {\r\n  if (!PARTS || !PARTS.length) {\r\n    return <div></div>\r\n  }\r\n  return (\r\n    <div className=\"MainTabs\">\r\n      <Tabs defaultIndex={0}>\r\n        <TabList>\r\n          {PARTS.map((part, index) => (\r\n            <Tab key={index}>{partsData[part].title}</Tab>\r\n          ))}\r\n        </TabList>\r\n\r\n        {PARTS.map((part, index) => (\r\n          <TabPanel key={index}>\r\n            <Base part={part}/>\r\n          </TabPanel>\r\n        ))}\r\n\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    PARTS: state.PARTS,\r\n    partsData: state.partsData\r\n  })\r\n)(MainTabs)\r\n","import React from 'react'\r\nimport './app-header.scss'\r\nimport { FaGrinTongue } from 'react-icons/fa'\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nfunction AppHeader(props) {\r\n  return (\r\n    <div className=\"AppHeader\">\r\n      <div className=\"logo\">\r\n        <FaGrinTongue />\r\n        Avatar Maker\r\n      </div>\r\n      <ul className=\"menu-items\">\r\n        {props.sets.map((set, index) => (\r\n          <li key={index}>\r\n            { (props.match && (props.match.params.setId === set._id)) ? (\r\n              <Link to={set._id} onClick={e => e.preventDefault()} className='disabled'>\r\n                {set.name}\r\n              </Link>\r\n            ) : (\r\n              <Link to={set._id}>\r\n                {set.name}\r\n              </Link>\r\n            ) }\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      {\r\n        props.profile ? (\r\n          <div className=\"profile-name\">\r\n            {props.profile.email}\r\n          </div>\r\n        ) : (\r\n          <div className=\"signup-wrapper\">\r\n            <Link to='/signup'>\r\n              <button className=\"btn btn-info btn-sm\">SIGN UP</button>\r\n            </Link>\r\n          </div>\r\n        )\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.sets,\r\n    profile: state.profile\r\n  })\r\n)(AppHeader)\r\n","import React from 'react'\r\nimport './app-menu.scss'\r\nimport { connect } from 'react-redux'\r\nimport { slide as Menu } from 'react-burger-menu'\r\nimport { Link } from 'react-router-dom'\r\nimport { FaSignInAlt, FaUserPlus, FaSignOutAlt } from 'react-icons/fa'\r\nimport { logOut } from '../../reducers/preview';\r\n\r\nfunction AppMenu(props) {\r\n\r\n  function logOut(e) {\r\n    e.preventDefault();\r\n    props.logOut();\r\n  }\r\n\r\n  return (\r\n    <div className=\"AppMenu\">\r\n      <Menu right width={ 280 }>\r\n        { props.profile ?\r\n          (\r\n            <React.Fragment>\r\n              <a id=\"logOut\" className=\"menu-item\" href=\"\" onClick={logOut}>\r\n                <FaSignOutAlt />&nbsp;<span>Log out</span>\r\n              </a>\r\n            </React.Fragment>\r\n          ) :\r\n          (\r\n            <React.Fragment>\r\n              <Link id=\"signUp\" className=\"menu-item\" to=\"/signup\">\r\n                <FaUserPlus />&nbsp;<span>Sign Up</span>\r\n              </Link>\r\n              <Link id=\"signIn\" className=\"menu-item\" to=\"/signin\">\r\n                <FaSignInAlt />&nbsp;<span>Log In</span>\r\n              </Link>\r\n            </React.Fragment>\r\n          )\r\n        }\r\n\r\n        <ul className=\"menu-items\">\r\n          {props.sets.map((set, index) => (\r\n            <li key={index}>\r\n              { (props.match && (props.match.params.setId === set._id)) ? (\r\n                <Link to={set._id} onClick={e => e.preventDefault()} className='disabled'>\r\n                  {set.name}\r\n                </Link>\r\n              ) : (\r\n                <Link to={set._id}>\r\n                  {set.name}\r\n                </Link>\r\n              ) }\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </Menu>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.sets,\r\n    profile: state.profile\r\n  }),\r\n  {\r\n    logOut\r\n  }\r\n)(AppMenu)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport './avatar-page.scss'\r\n\r\nimport Preview from '../../components/preview'\r\nimport ButtonActions from '../../components/button-actions'\r\nimport { getSets, loadFaceParts } from '../../reducers/preview'\r\nimport MainTabs from '../../components/main-tabs'\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\n\r\n\r\nfunction AvatarPage(props) {\r\n\r\n  useEffect(() => {\r\n    props.getSets().then(response => {\r\n      if (!props.match.params.setId) {\r\n        props.history.push(response.data[0]._id);\r\n      }\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (props.match.params.setId) {\r\n      props.loadFaceParts(props.match.params.setId);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.match.params.setId]);\r\n\r\n  return (\r\n    <div className=\"AvatarPage\">\r\n      <AppMenu match={props.match}/>\r\n      <AppHeader match={props.match}/>\r\n      <aside className=\"App-left-col\">\r\n        <div className=\"left-col-container\">\r\n          <Preview setId={props.match.params.setId}/>\r\n          <br/>\r\n          <ButtonActions setId={props.match.params.setId}/>\r\n        </div>\r\n      </aside>\r\n      <main className=\"App-main\">\r\n        <MainTabs />\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.sets\r\n  }),\r\n  {\r\n    loadFaceParts,\r\n    getSets\r\n  }\r\n)(AvatarPage)\r\n","export function required(value) {\r\n  if (!value) {\r\n    return 'Field is required'\r\n  }\r\n}\r\n\r\nexport function cleanText(value) {\r\n  const CLEAN_TEXT = /^[^`~!@#$%^&*()+=[{\\]}|\\\\'<,.>?\";:]+$/;\r\n  if (!CLEAN_TEXT.test(value)) {\r\n    return 'No special characters allowed'\r\n  }\r\n}\r\n\r\nexport function minLength(value, length) {\r\n  if (value.length < length) {\r\n    return `Min length have to be ${length}`;\r\n  }\r\n}\r\n\r\nexport function email(value) {\r\n  const EMAIL = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i;\r\n  if (!EMAIL.test(value)) {\r\n    return 'Invalid email address'\r\n  }\r\n}\r\n\r\nexport function passwordsMatch(value, valueToEqual) {\r\n  if (value !== valueToEqual) {\r\n    return 'Passwords does not match'\r\n  }\r\n}\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets, login } from '../../reducers/preview'\r\nimport './signup-page.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport face from './face.png';\r\nimport { Formik } from 'formik';\r\nimport { required, email, passwordsMatch, minLength } from '../../services/validations';\r\nimport classNames from 'classnames';\r\nimport backend from '../../services/backend'\r\nimport { toast } from 'react-toastify';\r\nimport SocialLogin from '../../components/social-login';\r\n\r\n\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\n\r\n\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  password: '',\r\n  repeatPassword: ''\r\n};\r\n\r\nconst validate = values => {\r\n  let errors = {};\r\n  let emailError = required(values.email) || email(values.email);\r\n  if (emailError) {\r\n    errors.email = emailError;\r\n  }\r\n  let passwordError = required(values.password) || minLength(values.password, 6);\r\n  if (passwordError) {\r\n    errors.password = passwordError;\r\n  }\r\n  let repeatPasswordError = required(values.repeatPassword) || passwordsMatch(values.repeatPassword, values.password);\r\n  if (repeatPasswordError) {\r\n    errors.repeatPassword = repeatPasswordError;\r\n  }\r\n\r\n  return errors\r\n};\r\n\r\n\r\nfunction SignupPage(props) {\r\n\r\n  function onSuccessFacebookLogin(res) {\r\n    props.login(res, 'facebook').then(() => {\r\n      backend.getProfileInfo().then(() => {\r\n        props.history.push('/');\r\n      });\r\n    });\r\n  }\r\n  function onSuccessGoogleLogin(res) {\r\n    props.login(res, 'google').then((res) => {\r\n      console.log(res);\r\n      // backend.getProfileInfo().then(() => {\r\n      //   props.history.push('/');\r\n      // });\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"SignupPage\">\r\n      <AppHeader />\r\n      <AppMenu />\r\n      <div className=\"wrapper\">\r\n        <div className=\"left-col\">\r\n          <img src={face} alt=\"\"/>\r\n        </div>\r\n        <div className=\"right-col\">\r\n          <div className=\"form-wrapper\">\r\n            <h5 className=\"title\">Sign up</h5>\r\n            <SocialLogin\r\n              onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n              onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n            />\r\n            <Formik\r\n              initialValues={initialValues}\r\n              validate={validate}\r\n              validateOnChange={true}\r\n              onSubmit={(values, { setSubmitting }) => {\r\n                backend.signup(values)\r\n                  .then(response => {\r\n                    toast.success('Form was successfully saved')\r\n                  })\r\n                  .catch(() => {})\r\n                  .finally(() => setSubmitting(false))\r\n              }}\r\n            >\r\n              {props => {\r\n                const {\r\n                  values,\r\n                  errors,\r\n                  touched,\r\n                  isSubmitting,\r\n                  handleChange,\r\n                  handleBlur,\r\n                  handleSubmit,\r\n                } = props;\r\n                return (\r\n                  <form onSubmit={handleSubmit}>\r\n                    <div className=\"control form-group\">\r\n                      <label htmlFor=\"email\" className=\"label\">Email</label>\r\n                      <input\r\n                        id=\"email\"\r\n                        name=\"email\"\r\n                        type=\"text\"\r\n                        value={values.email}\r\n                        placeholder=\"Email\"\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                        className={classNames('input form-control', touched.email && errors.email && 'error')}\r\n                      />\r\n                      { touched.email && errors.email &&\r\n                      <div className=\"error-message\">{ errors.email }</div> }\r\n                    </div>\r\n\r\n                    <div className=\"control form-group\">\r\n                      <label htmlFor=\"password\" className=\"label\">Password</label>\r\n                      <input\r\n                        id=\"password\"\r\n                        name=\"password\"\r\n                        type=\"password\"\r\n                        value={values.password}\r\n                        placeholder=\"Password\"\r\n                        onChange={handleChange}\r\n                        className={classNames('input form-control', touched.password && errors.password && 'error')}\r\n                      />\r\n                      { touched.password && errors.password &&\r\n                      <div className=\"error-message\">{ errors.password }</div> }\r\n                    </div>\r\n\r\n                    <div className=\"control form-group\">\r\n                      <label htmlFor=\"repeatPassword\" className=\"label\">Repeat your password</label>\r\n                      <input\r\n                        id=\"repeatPassword\"\r\n                        name=\"repeatPassword\"\r\n                        type=\"password\"\r\n                        value={values.repeatPassword}\r\n                        placeholder=\"Repeat your password\"\r\n                        onChange={handleChange}\r\n                        className={classNames('input form-control', touched.password && errors.password && 'error')}\r\n                      />\r\n                      { touched.repeatPassword && errors.repeatPassword &&\r\n                      <div className=\"error-message\">{ errors.repeatPassword }</div> }\r\n                    </div>\r\n                    <div className=\"control form-group\">\r\n                      <input\r\n                        type=\"submit\"\r\n                        value=\"Sign Up\"\r\n                        disabled={isSubmitting}\r\n                        className=\"submit btn btn-block btn-lg btn-primary\"\r\n                      />\r\n                    </div>\r\n                  </form>\r\n                );\r\n              }}\r\n            </Formik>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.sets\r\n  }),\r\n  {\r\n    getSets,\r\n    login\r\n  }\r\n)(SignupPage)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets, login } from '../../reducers/preview'\r\nimport './signin-page.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport face from './face.png';\r\nimport { Formik } from 'formik';\r\nimport { required, email, minLength } from '../../services/validations';\r\nimport backend from '../../services/backend'\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\nimport SocialLogin from '../social-login/SocialLogin'\r\n\r\n\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  password: ''\r\n};\r\n\r\nconst validate = values => {\r\n  let errors = {};\r\n  let emailError = required(values.email) || email(values.email);\r\n  if (emailError) {\r\n    errors.email = emailError;\r\n  }\r\n  let passwordError = required(values.password) || minLength(values.password, 6);\r\n  if (passwordError) {\r\n    errors.password = passwordError;\r\n  }\r\n  return errors\r\n};\r\n\r\n\r\nfunction SigninPage(props) {\r\n\r\n  function onSuccessFacebookLogin(res) {\r\n    props.login(res, 'facebook').then(() => {\r\n      backend.getProfileInfo().then(() => {\r\n        props.history.push('/');\r\n      });\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"SigninPage\">\r\n      <AppHeader />\r\n      <AppMenu />\r\n      <div className=\"wrapper\">\r\n        <div className=\"left-col\">\r\n          <img src={face} alt=\"\"/>\r\n        </div>\r\n        <div className=\"right-col\">\r\n          <div className=\"form-wrapper\">\r\n\r\n            <h5 className=\"title\">Sign in</h5>\r\n            <SocialLogin onSuccessFacebookLogin={onSuccessFacebookLogin} />\r\n            <Formik\r\n              initialValues={initialValues}\r\n              validate={validate}\r\n              validateOnChange={true}\r\n              onSubmit={(values, { setSubmitting }) => {\r\n                props.login(values)\r\n                  .then(response => {\r\n                    props.history.push('/');\r\n                  })\r\n                  .catch(() => {})\r\n                  .finally(() => setSubmitting(false))\r\n              }}\r\n            >\r\n              {props => {\r\n                const {\r\n                  values,\r\n                  errors,\r\n                  touched,\r\n                  isSubmitting,\r\n                  handleChange,\r\n                  handleBlur,\r\n                  handleSubmit,\r\n                } = props;\r\n                return (\r\n                  <form onSubmit={handleSubmit}>\r\n                    <div className=\"control form-group\">\r\n                      <label htmlFor=\"email\" className=\"label\">Email</label>\r\n                      <input\r\n                        id=\"email\"\r\n                        name=\"email\"\r\n                        type=\"text\"\r\n                        value={values.email}\r\n                        placeholder=\"Email\"\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                        className={classNames('input form-control', touched.email && errors.email && 'error')}\r\n                      />\r\n                      { touched.email && errors.email &&\r\n                      <div className=\"error-message\">{ errors.email }</div> }\r\n                    </div>\r\n\r\n                    <div className=\"control form-group\">\r\n                      <label htmlFor=\"password\" className=\"label\">Password</label>\r\n                      <input\r\n                        id=\"password\"\r\n                        name=\"password\"\r\n                        type=\"password\"\r\n                        value={values.password}\r\n                        placeholder=\"Password\"\r\n                        onChange={handleChange}\r\n                        className={classNames('input form-control', touched.password && errors.password && 'error')}\r\n                      />\r\n                      { touched.password && errors.password &&\r\n                      <div className=\"error-message\">{ errors.password }</div> }\r\n                    </div>\r\n                    <div className=\"control form-group\">\r\n                      <input\r\n                        type=\"submit\"\r\n                        value=\"Sign In\"\r\n                        disabled={isSubmitting}\r\n                        className=\"submit btn btn-block btn-lg btn-primary\"\r\n                      />\r\n                    </div>\r\n                  </form>\r\n                );\r\n              }}\r\n            </Formik>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.sets\r\n  }),\r\n  {\r\n    getSets,\r\n    login\r\n  }\r\n)(SigninPage)\r\n","import React from 'react';\nimport { HashRouter as Router, Route, Switch, matchPath } from \"react-router-dom\";\n\nimport \"react-tabs/style/react-tabs.css\";\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.scss';\nimport AvatarPage from './components/avatar-page'\nimport SignupPage from './components/signup-page'\nimport SigninPage from './components/signin-page'\nimport { connect } from 'react-redux'\nimport { getProfileInfo } from './reducers/preview'\n\nclass App extends React.Component {\n\n  constructor(props) {\n    props.getProfileInfo();\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ToastContainer autoClose={4000} hideProgressBar={true}/>\n        {/*<Router basename={process.env.REACT_APP_ROUTER_BASE_URL || ''}>*/}\n        <Router>\n          <Switch>\n            <Route path=\"/\" exact component={AvatarPage} />\n            <Route path=\"/signup\" exact component={SignupPage} />\n            <Route path=\"/signin\" exact component={SigninPage} />\n            <Route path=\"/:setId\" exact component={AvatarPage} />\n          </Switch>\n        </Router>\n      </div>\n    );\n  }\n}\n\n\nexport default connect(\n  null,\n  {\n    getProfileInfo\n  }\n)(App)\n\n\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux'\nimport reducer from './reducers/preview'\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly'\nimport ReduxThunk from 'redux-thunk'\n\n\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(ReduxThunk)));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}