{"version":3,"sources":["components/signup-page/face.png","components/signin-page/face.png","services/canvas.js","services/backend.js","reducers/preview.js","reducers/profile.js","reducers/index.js","components/spinner/Spinner.js","components/preview/Preview.js","components/download-success-modal/DownloadSuccessModal.js","services/validations.js","components/social-login/SocialLogin.js","components/signup-form/SignupForm.js","components/signin-form/SigninForm.js","components/download-modal/DownloadModal.js","components/button-actions/ButtonActions.js","components/face-part-container/FacePartContainer.js","components/color-picker/ColorPicker.js","face-parts/Base.js","components/main-tabs/MainTabs.js","components/app-header/AppHeader.js","components/app-menu/AppMenu.js","components/avatar-page/AvatarPage.js","components/signup-page/SignupPage.js","components/signin-page/SigninPage.js","components/downloads-page/DownloadsPage.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","canvas","document","createElement","context","getContext","IMG_WIDTH","IMG_HEIGHT","width","height","changeImageColor","url","color","Promise","resolve","reject","img","src","onload","clearRect","drawImage","alpha","imageSmoothingQuality","globalCompositeOperation","fillStyle","fillRect","colorize","toDataURL","API_URL","process","instance","backend","Backend","_this","this","Object","classCallCheck","authAxios","axiosInstance","token","signup","body","post","signupFacebook","then","response","setAxiosInstance","data","localStorage","setItem","catch","e","signupGoogle","signin","getProfileInfo","get","getDownloads","removeDownload","id","delete","getFaceParts","setId","getSets","login","saveImage","method","responseType","params","logOut","removeItem","getItem","axios","create","baseURL","headers","Content-Type","Authorization","initialState","partsDataOriginal","Map","partsData","PARTS","PARTS_WITH_COLORS","partSprites","previewIsLoading","facePartsAreLoading","savingIsLoading","sets","hiddenParts","conflicts","currentSet","current","dispatch","type","payload","changeColor","part","getState","partsToInheritColor","preview","forEach","pd","index","inheritColorFrom","push","images","el","value","_id","inheritPart","getCurrentValues","createSelector","state","values","partValue","partId","find","zIndex","sort","a","b","map","v","getPreviewIsLoading","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","i","length","isLoading","err","return","reducer","handlers","arguments","action","hasOwnProperty","createReducer","SELECT_PART","_ref","_ref$payload","randomized","newCurrent","assign","conflictedPart","partData","objectSpread","defineProperty","SET_COLOR_START","_ref2","newPartsData","newPart","set","SET_COLOR","_ref3","_ref3$payload","newPartImages","concat","SET_PREVIEW_IS_LOADING","_ref4","GET_SETS_SUCCESS","_ref5","SET_CUSTOM_FACE_PARTS","_ref6","LOAD_FACE_PARTS_REQUEST","_ref7","LOAD_FACE_PARTS_SUCCESS","_ref8","cloneDeep","partsMap","partIndex","unshift","conflictsWith","showOnStart","layer","filter","colors","SAVE_IMAGE_REQUEST","SAVE_IMAGE_SUCCESS","strategy","loginRequest","profile","downloads","GET_PROFILE_INFO_SUCCESS","GET_DOWNLOADS_SUCCESS","REMOVE_DOWNLOAD_SUCCESS","LOGIN_SUCCESS","SIGNUP_SUCCESS","LOGOUT","combineReducers","Spinner","_ref$width","_ref$height","react_default","className","style","connect","items","classNames","item","backgroundImage","key","alt","DownloadSuccessModal","props","lib_default","isOpen","onRequestClose","closeModal","imgBase64","Modal","setAppElement","required","minLength","email","test","google_login","clientId","buttonText","onSuccess","res","console","log","onSuccessGoogleLogin","access_token","accessToken","onFailure","facebook_login_render_props_default","appId","callback","onSuccessFacebookLogin","render","renderProps","onClick","ti_index_esm","initialValues","password","repeatPassword","validate","errors","emailError","passwordError","repeatPasswordError","valueToEqual","passwordsMatch","place","social_login_SocialLogin","formik_esm","validateOnChange","onSubmit","setSubmitting","onSuccessEmailLogin","toast","error","finally","formProps","touched","isSubmitting","handleChange","handleBlur","handleSubmit","htmlFor","name","placeholder","onChange","onBlur","disabled","react_router_dom","to","href","preventDefault","onSignInClick","onSignUpClick","_useState","useState","_useState2","slicedToArray","currentPageSignIn","setCurrentPageSignIn","useEffect","onDownload","signin_form_SigninForm","signup_form_SignupForm","randomizeFace","partsShuffled","Math","random","reduce","accum","includes","r","floor","toString","padStart","g","saveAs","Blob","modalSuccessIsOpen","setModalSuccessIsOpen","_useState3","_useState4","modalDownloadIsOpen","setModalDownloadIsOpen","_useState5","_useState6","setImgBase64","index_esm","download_modal_DownloadModal","reader","FileReader","readAsDataURL","onloadend","base64data","result","FacePartContainer","active","selectPart","showPicker","setShowPicker","currentColor","setCurrentColor","onBackgroundClick","window","addEventListener","removeEventListener","stopPropagation","backgroundColor","background","react_color_lib","disableAlpha","hex","color_picker_ColorPicker","esm","defaultIndex","title","face_parts_Base","match","BurgerMenu","right","Fragment","loadFaceParts","force","history","app_menu_AppMenu","app_header_AppHeader","preview_Preview","button_actions_ButtonActions","main_tabs_MainTabs","face","setCustomFaceParts","download","layers","App","possibleConstructorReturn","getPrototypeOf","call","react_toastify","autoClose","hideProgressBar","react_router","path","exact","component","AvatarPage","DownloadsPage","SignupPage","SigninPage","React","Component","Boolean","location","hostname","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","ReactDOM","es","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.85691069.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/face.2c39ddd4.png\";","module.exports = __webpack_public_path__ + \"static/media/face.6721bc4f.png\";","const canvas = document.createElement(\"canvas\"), // shared instance\r\n  context = canvas.getContext(\"2d\");\r\n\r\nconst IMG_WIDTH = 600;\r\nconst IMG_HEIGHT = 600;\r\n\r\n// set image pixel size and hex color\r\ncanvas.width = IMG_WIDTH;\r\ncanvas.height = IMG_HEIGHT;\r\n\r\nexport const changeImageColor = (url, color) => {\r\n\r\n  return new Promise((resolve, reject) => {\r\n    let img = document.createElement('img');\r\n    img.src = url;\r\n    img.onload = () => {\r\n\r\n      context.clearRect(0, 0, canvas.width, canvas.height);\r\n      context.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n      colorize(color, 1);\r\n\r\n      context.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n      resolve(canvas.toDataURL(\"image/png\", 0.7));\r\n    }\r\n  })\r\n\r\n\r\n  function colorize(color, alpha) {\r\n    context.imageSmoothingQuality = \"medium\";\r\n    context.globalCompositeOperation = \"source-atop\";\r\n    context.fillStyle = color;\r\n    context.fillRect(0, 0, canvas.width, canvas.height);\r\n    context.globalCompositeOperation = \"multiply\";\r\n  }\r\n}\r\n\r\nexport const createSprite = (base64Urls) => {\r\n  const spriteCanvas = document.createElement(\"canvas\"),\r\n    ctx = spriteCanvas.getContext(\"2d\");\r\n  spriteCanvas.width = base64Urls.length * IMG_WIDTH;\r\n  spriteCanvas.height = IMG_HEIGHT;\r\n\r\n  return new Promise((resolve) => {\r\n\r\n    let promisesArray = [];\r\n\r\n    for (let i = 0; i < base64Urls.length; i++) {\r\n      promisesArray.push(drawImg(base64Urls[i], i * IMG_WIDTH, 0));\r\n    }\r\n\r\n    Promise.all(promisesArray).then(() => {\r\n      resolve(spriteCanvas.toDataURL(\"image/png\", 1));\r\n    })\r\n  });\r\n\r\n  function drawImg(url, x, y) {\r\n    return new Promise((resolve) => {\r\n      let img = document.createElement('img');\r\n      img.src = url;\r\n      img.onload = () => {\r\n        ctx.drawImage(img, x, y, IMG_WIDTH, IMG_HEIGHT);\r\n        resolve();\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n","import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://lvh.me:3001/' || 'http://localhost:3001/';\r\n\r\n\r\nlet instance = null;\r\n\r\nclass Backend {\r\n  authAxios = null;\r\n  axiosInstance = null;\r\n  token = null;\r\n\r\n  constructor() {\r\n    if (!instance) {\r\n      instance = this;\r\n      let token = localStorage.getItem('token');\r\n      if (token) {\r\n        this.token = token;\r\n      }\r\n      this.setAxiosInstance(token);\r\n    }\r\n    return instance;\r\n  }\r\n\r\n\r\n  signup = (body) => {\r\n    return this.axiosInstance.post(API_URL + 'auth/sign-up', body);\r\n  }\r\n\r\n  signupFacebook = (body) => {\r\n    return new Promise((resolve, reject) => {\r\n      this.axiosInstance.post(API_URL + 'auth/facebook', body)\r\n        .then(response => {\r\n          this.setAxiosInstance(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          resolve(response);\r\n        })\r\n        .catch(e => reject(e));\r\n    });\r\n  }\r\n\r\n  signupGoogle = (body) => {\r\n    return new Promise((resolve, reject) => {\r\n      this.axiosInstance.post(API_URL + 'auth/google', body)\r\n        .then(response => {\r\n          this.setAxiosInstance(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          resolve(response);\r\n        })\r\n        .catch(e => reject(e));\r\n    });\r\n  }\r\n\r\n  signin = (body) => {\r\n    return new Promise((resolve, reject) => {\r\n      return this.axiosInstance.post(API_URL + 'auth/login', body)\r\n        .then(response => {\r\n          this.setAxiosInstance(response.data.token);\r\n          localStorage.setItem('token', response.data.token);\r\n          resolve(response);\r\n        })\r\n        .catch(e => reject(e));\r\n    });\r\n  }\r\n\r\n  getProfileInfo = () => {\r\n    return this.authAxios.get(API_URL + 'profile/info');\r\n  }\r\n\r\n  getDownloads = () => {\r\n    return this.authAxios.get(API_URL + 'profile/downloads');\r\n  }\r\n\r\n  removeDownload = (id) => {\r\n    return this.authAxios.delete(API_URL + 'profile/downloads/' + id);\r\n  }\r\n\r\n  getFaceParts = (setId) => {\r\n    return this.axiosInstance.get(API_URL + 'face-parts/' + setId);\r\n  }\r\n\r\n  getSets = () => {\r\n    return this.axiosInstance.get(API_URL + 'face-parts/sets');\r\n  }\r\n\r\n  login = (body) => {\r\n    return this.axiosInstance.post(API_URL + 'face-parts/login', body);\r\n  }\r\n\r\n  saveImage = (setId, data) => {\r\n    return this.authAxios({\r\n      url: API_URL + 'save-image/' + setId,\r\n      method: 'GET',\r\n      responseType: 'blob', // important,\r\n      params: { data }\r\n    })\r\n  }\r\n\r\n  logOut = () => {\r\n    this.token = null;\r\n    localStorage.removeItem('token');\r\n  }\r\n\r\n\r\n  // SET INSTANCE\r\n  setAxiosInstance(token) {\r\n    this.axiosInstance = axios.create({\r\n      baseURL: API_URL,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      }\r\n    });\r\n    this.authAxios = axios.create({\r\n      baseURL: API_URL,\r\n      headers: {\r\n        Authorization: 'jwt ' + token,\r\n        'Content-Type': 'application/json',\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default new Backend();\r\n","import { createSelector } from 'reselect'\r\nimport { changeImageColor } from '../services/canvas'\r\nimport backend from '../services/backend'\r\nimport { cloneDeep, pickBy } from 'lodash'\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst TRANSPARENT_PIXEL = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\r\nconst TRANSPARENT_ID = 'transparent'\r\n\r\nconst initialState = {\r\n  partsDataOriginal: new Map(),\r\n  partsData: new Map(),\r\n  PARTS: [],\r\n  PARTS_WITH_COLORS: [],\r\n  partSprites: [],\r\n  previewIsLoading: false,\r\n  facePartsAreLoading: true,\r\n  savingIsLoading: false,\r\n  sets: [],\r\n  hiddenParts: [], // for conflicts\r\n  conflicts: {},\r\n  currentSet: null,\r\n  current: {}\r\n};\r\n\r\nexport function createReducer(initialState, handlers) {\r\n  return function reducer(state = initialState, action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action)\r\n    } else {\r\n      return state\r\n    }\r\n  }\r\n}\r\n\r\n// ACTIONS\r\n\r\nexport const loadFaceParts = (setId, force) => (dispatch, getState) => {\r\n  if (setId === getState().preview.currentSet && !force) return;\r\n  dispatch({ type: 'LOAD_FACE_PARTS_REQUEST' , payload: setId});\r\n  backend.getFaceParts(setId).then(response => {\r\n    dispatch({ type: 'LOAD_FACE_PARTS_SUCCESS', payload: response });\r\n  }).catch(e => {\r\n    dispatch({ type: 'LOAD_FACE_PARTS_FAILURE', payload: e });\r\n  })\r\n}\r\n\r\nexport const getSets = () => (dispatch) => {\r\n  dispatch({ type: 'GET_SETS_REQUEST' });\r\n  return new Promise(resolve => {\r\n    backend.getSets().then(response => {\r\n      dispatch({ type: 'GET_SETS_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'GET_SETS_FAILURE', payload: e });\r\n    })\r\n  })\r\n}\r\n\r\nexport const saveImage = (setId) => (dispatch, getState) => {\r\n  const data = getState().preview.current;\r\n  dispatch({ type: 'SAVE_IMAGE_REQUEST' });\r\n  return new Promise((resolve, reject) =>  {\r\n    backend.saveImage(setId, data).then(response => {\r\n      saveAs(new Blob([response.data]), 'image' + Math.floor(Math.random() * 100000 + 1) + '.png');\r\n      dispatch({ type: 'SAVE_IMAGE_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'SAVE_IMAGE_FAILURE', payload: e });\r\n      reject(e);\r\n    })\r\n  });\r\n}\r\n\r\nexport const changeColor = (part, color) => (dispatch, getState) => {\r\n  let partsToInheritColor = [];\r\n  getState().preview.partsDataOriginal.forEach((pd, index) => {\r\n    if (pd.inheritColorFrom === part) {\r\n      partsToInheritColor.push(index);\r\n    }\r\n  })\r\n  getState().preview.partsDataOriginal.get(part).images.forEach(el => {\r\n    changeImageColor(el.value, color).then((value) => {\r\n      dispatch({ type: 'SET_COLOR', payload: { _id: el._id, part, value, color } })\r\n    })\r\n  })\r\n  partsToInheritColor.forEach(inheritPart => {\r\n    getState().preview.partsDataOriginal.get(inheritPart).images.forEach(el => {\r\n      changeImageColor(el.value, color).then((value) => {\r\n        dispatch({ type: 'SET_COLOR', payload: { _id: el._id, part: inheritPart, value, color } })\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\n\r\nexport const randomizeFace = () => (dispatch, getState) => {\r\n\r\n  let partsShuffled = [].concat(getState().preview.PARTS).sort(() => Math.random() - 0.5);\r\n  let conflicts = {}\r\n  partsShuffled.forEach(part => {\r\n    if (!getState().preview.partsData.get(part).images.length) return\r\n    let conflictedArray = Object.values(conflicts).reduce((accum, value) => accum.concat(value), []);\r\n    if (conflictedArray.includes(getState().preview.partsData.get(part)._id)) {\r\n      return dispatch({type: 'SELECT_PART', payload: {_id: TRANSPARENT_ID, part, randomized: true }})\r\n    };\r\n\r\n    if (getState().preview.PARTS_WITH_COLORS.includes(part)) {\r\n      let r = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n      let g = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n      let b = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n      dispatch(changeColor(part, '#' + r + g + b))\r\n      dispatch({type: 'SET_COLOR_START', payload: { part }})\r\n    }\r\n\r\n    let index = Math.floor(Math.random() * (getState().preview.partsData.get(part).images.length - 1)) + 1;\r\n    let _id = getState().preview.partsData.get(part).images[index]._id;\r\n    dispatch({type: 'SELECT_PART', payload: {_id, part, randomized: true }})\r\n    conflicts[part] = getState().preview.conflicts[getState().preview.partsData.get(part)._id];\r\n  })\r\n}\r\n\r\n\r\n\r\n\r\n// SELECTORS\r\n//\r\nexport const getCurrentValues = createSelector(\r\n  state => state.preview.partsData,\r\n  state => state.preview.current,\r\n  (partsData, current) => {\r\n    let values = [];\r\n    partsData.forEach((partValue, partId) => {\r\n      if (!current[partId]) return;\r\n      let value = partValue.images.find(el => el._id === current[partId]._id)\r\n      values.push({\r\n        zIndex: partValue.zIndex,\r\n        value\r\n      })\r\n    });\r\n    values = values.sort((a, b) => a.zIndex - b.zIndex)\r\n    values = values.map(v => v.value && v.value.value)\r\n    return values\r\n  }\r\n)\r\n\r\nexport const getPreviewIsLoading = createSelector(state => state.preview.partsData, partsData => {\r\n  if (!partsData) return true;\r\n  for (let part of partsData) {\r\n    for (let i = 0; i < part[1].images.length; i++) {\r\n      if (part[1].images[i].isLoading) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n});\r\n\r\n// REDUCER\r\n\r\nconst reducer = createReducer(initialState, {\r\n  SELECT_PART: function(state, { payload: { _id, part, randomized }}) {\r\n    let newCurrent = Object.assign({}, state.current);\r\n\r\n    if (!randomized && state.conflicts[part]) {\r\n      state.conflicts[part].forEach(conflictedPart => {\r\n        state.partsData.forEach(partData => {\r\n          if (partData._id === conflictedPart) {\r\n            newCurrent[partData._id] && (newCurrent[partData._id]._id = TRANSPARENT_ID);\r\n          }\r\n        });\r\n      });\r\n    }\r\n    return {\r\n      ...state,\r\n      current: {\r\n        ...newCurrent,\r\n        [part]: {\r\n          ...state.current[part],\r\n          _id: _id,\r\n        }\r\n      }\r\n    }\r\n  },\r\n  SET_COLOR_START: function(state, { payload: { part }}) {\r\n    let newPartsData = new Map(state.partsData);\r\n    let newPart = Object.assign({}, newPartsData.get(part));\r\n    newPart.images && newPart.images.forEach(img => img.isLoading = true);\r\n    newPartsData.set(part, newPart)\r\n    return {\r\n      ...state,\r\n      partsData: newPartsData\r\n    }\r\n  },\r\n  SET_COLOR: function(state, { payload: {_id, part, value, color }}) {\r\n    let newPartsData = new Map(state.partsData);\r\n    let newPart = Object.assign({}, newPartsData.get(part));\r\n    let newPartImages = [].concat(state.partsData.get(part).images);\r\n    newPartImages.find(el => el._id === _id).value = value;\r\n    newPartImages.find(el => el._id === _id).isLoading = false;\r\n    newPart.images = newPartImages;\r\n    newPartsData.set(part, newPart)\r\n    return {\r\n      ...state,\r\n      partsData: newPartsData,\r\n      current: {\r\n        ...state.current,\r\n        [part]: {\r\n          ...state.current[part],\r\n          color\r\n        }\r\n      }\r\n    }\r\n  },\r\n  SET_PREVIEW_IS_LOADING: function(state, { value }) {\r\n    return {\r\n      ...state,\r\n      previewIsLoading: value\r\n    }\r\n  },\r\n  GET_SETS_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      sets: payload.data\r\n    }\r\n  },\r\n  SET_CUSTOM_FACE_PARTS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      current: payload\r\n    }\r\n  },\r\n  LOAD_FACE_PARTS_REQUEST: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      current: {},\r\n      currentSet: payload,\r\n      partsDataOriginal: new Map(),\r\n      partsData: new Map(),\r\n      PARTS: [],\r\n      PARTS_WITH_COLORS: [],\r\n      facePartsAreLoading: true\r\n    }\r\n  },\r\n  LOAD_FACE_PARTS_SUCCESS: function(state, { payload }) {\r\n    let newPartsData =  cloneDeep(payload.data);\r\n    let newCurrent = Object.assign({}, state.current);\r\n    let conflicts = {};\r\n    let partsMap = new Map();\r\n    newPartsData.forEach((part, partIndex) => {\r\n      part.images.unshift({\r\n        _id: TRANSPARENT_ID,\r\n        value: TRANSPARENT_PIXEL\r\n      });\r\n      part.images.forEach(img => {\r\n        img.isLoading = false;\r\n      })\r\n      if (part.conflictsWith.length) {\r\n        if (conflicts[part._id]) conflicts[part._id].concat(part.conflictsWith);\r\n        else conflicts[part._id] = part.conflictsWith;\r\n        conflicts[part._id] = part.conflictsWith;\r\n        part.conflictsWith.forEach(conflictedPart => {\r\n          if (conflicts[conflictedPart]) conflicts[conflictedPart].push(part._id);\r\n          else conflicts[conflictedPart] = [part._id];\r\n        })\r\n      }\r\n      // set current\r\n      if (part.showOnStart) {\r\n        newCurrent[part._id] = {\r\n          _id: part.images[1]._id\r\n        };\r\n      } else {\r\n        newCurrent[part._id] = {\r\n          _id: TRANSPARENT_ID\r\n        };\r\n      }\r\n      partsMap.set(part._id, part);\r\n    })\r\n\r\n    return {\r\n      ...state,\r\n      conflicts,\r\n      partsData: partsMap,\r\n      partsDataOriginal: cloneDeep(partsMap),\r\n      PARTS: payload.data.map(layer => layer._id),\r\n      PARTS_WITH_COLORS: payload.data\r\n        .filter(layer => layer.colors && layer.colors.length)\r\n        .map(layer => layer._id),\r\n      facePartsAreLoading: false,\r\n      current: newCurrent\r\n    }\r\n  },\r\n  SAVE_IMAGE_REQUEST: function(state) {\r\n    return {\r\n      ...state,\r\n      savingIsLoading: true\r\n    }\r\n  },\r\n  SAVE_IMAGE_SUCCESS: function(state) {\r\n    return {\r\n      ...state,\r\n      savingIsLoading: false\r\n    }\r\n  }\r\n})\r\n\r\nexport default reducer\r\n","import { createSelector } from 'reselect'\r\nimport backend from '../services/backend'\r\nimport { cloneDeep, pickBy } from 'lodash'\r\n\r\n\r\nconst initialState = {\r\n  profile: null,\r\n  downloads: []\r\n};\r\n\r\nexport function createReducer(initialState, handlers) {\r\n  return function reducer(state = initialState, action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action)\r\n    } else {\r\n      return state\r\n    }\r\n  }\r\n}\r\n\r\n// ACTIONS\r\n\r\nexport const getProfileInfo = () => (dispatch) => {\r\n  if (!backend.token) return;\r\n  dispatch({ type: 'GET_PROFILE_INFO_REQUEST' });\r\n  return new Promise(resolve => {\r\n    backend.getProfileInfo().then(response => {\r\n      dispatch({ type: 'GET_PROFILE_INFO_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'GET_PROFILE_INFO_FAILURE', payload: e });\r\n    })\r\n  })\r\n}\r\n\r\nexport const getDownloads = () => (dispatch) => {\r\n  if (!backend.token) return;\r\n  dispatch({ type: 'GET_DOWNLOADS_REQUEST' });\r\n  return new Promise(resolve => {\r\n    backend.getDownloads().then(response => {\r\n      dispatch({ type: 'GET_DOWNLOADS_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'GET_DOWNLOADS_FAILURE', payload: e });\r\n    })\r\n  })\r\n}\r\n\r\nexport const removeDownload = (id) => (dispatch) => {\r\n  if (!backend.token) return;\r\n  dispatch({ type: 'REMOVE_DOWNLOAD_REQUEST' });\r\n  return new Promise(resolve => {\r\n    backend.removeDownload(id).then(response => {\r\n      dispatch({ type: 'REMOVE_DOWNLOAD_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'REMOVE_DOWNLOAD_FAILURE', payload: e });\r\n    })\r\n  })\r\n}\r\n\r\nexport const login = (body, strategy) => (dispatch) => {\r\n  dispatch({ type: 'LOGIN_REQUEST' });\r\n  let loginRequest = backend.signin;\r\n  if (strategy === 'facebook') {\r\n    loginRequest = backend.signupFacebook;\r\n  }\r\n  if (strategy === 'google') {\r\n    loginRequest = backend.signupGoogle;\r\n  }\r\n  return loginRequest(body).then(response => {\r\n    dispatch({ type: 'LOGIN_SUCCESS', payload: response });\r\n  }).catch(e => {\r\n    dispatch({ type: 'LOGIN_FAILURE', payload: e });\r\n  })\r\n}\r\n\r\nexport const signup = (body) => (dispatch) => {\r\n  dispatch({ type: 'SIGNUP_REQUEST' });\r\n  return backend.signup(body).then(response => {\r\n    dispatch({ type: 'SIGNUP_SUCCESS', payload: response });\r\n  }).catch(e => {\r\n    dispatch({ type: 'SIGNUP_FAILURE', payload: e });\r\n  })\r\n}\r\n\r\nexport const logOut = () => (dispatch) => {\r\n  backend.logOut();\r\n  dispatch({ type: 'LOGOUT'});\r\n\r\n}\r\n\r\n\r\n// REDUCER\r\n\r\nconst reducer = createReducer(initialState, {\r\n\r\n  GET_PROFILE_INFO_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      profile: payload.data\r\n    }\r\n  },\r\n  GET_DOWNLOADS_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      downloads: payload.data || []\r\n    }\r\n  },\r\n  REMOVE_DOWNLOAD_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      downloads: payload.data || []\r\n    }\r\n  },\r\n  LOGIN_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      profile: payload.data\r\n    }\r\n  },\r\n  SIGNUP_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      profile: payload.data\r\n    }\r\n  },\r\n  LOGOUT: function(state) {\r\n    return {\r\n      ...state,\r\n      profile: null\r\n    }\r\n  }\r\n})\r\n\r\nexport default reducer\r\n","import { combineReducers } from 'redux';\r\nimport preview from './preview';\r\nimport profile from './profile';\r\n\r\n\r\nexport default combineReducers({\r\n  preview,\r\n  profile\r\n});\r\n","import React from 'react';\r\nimport './spinner.scss'\r\n\r\nexport default function Spinner ({width = 300, height = 300}) {\r\n  return (\r\n    <div className=\"spinner\" style={{width, height}}>Loading...</div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getCurrentValues, getPreviewIsLoading } from '../../reducers/preview'\r\nimport Spinner from '../spinner'\r\nimport classNames from 'classnames'\r\n\r\nimport './preview.scss'\r\n\r\nfunction Preview({ items, previewIsLoading, setId }) {\r\n  return (\r\n    <div className={classNames('Preview', previewIsLoading && 'isLoading')}>\r\n\r\n      <div className=\"images\">\r\n        {\r\n          items.map((item, index) => (\r\n            <div className=\"img\" style={{backgroundImage: 'url(' + item + ')'}} key={index} alt=\"\"/>\r\n          ))\r\n        }\r\n      </div>\r\n      <Spinner />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    items: getCurrentValues(state),\r\n    current: state.preview.current,\r\n    previewIsLoading: state.preview.facePartsAreLoading || getPreviewIsLoading(state) || state.preview.savingIsLoading\r\n  })\r\n)(Preview)\r\n","import React from 'react';\r\nimport './download-success-modal.scss'\r\nimport Modal from 'react-modal';\r\n\r\nModal.setAppElement('#root')\r\n\r\nexport default function DownloadSuccessModal(props) {\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={props.isOpen}\r\n      onRequestClose={props.closeModal}\r\n      className=\"download-success-modal\"\r\n    >\r\n      <h4>Great! Your download has been successful!</h4>\r\n      <img className=\"modal-image\" src={props.imgBase64} alt=\"\"/>\r\n      <h6>If you want to download images in high quality, you can <strong>become premium</strong></h6>\r\n    </Modal>\r\n  )\r\n}\r\n","export function required(value) {\r\n  if (!value) {\r\n    return 'Field is required'\r\n  }\r\n}\r\n\r\nexport function cleanText(value) {\r\n  const CLEAN_TEXT = /^[^`~!@#$%^&*()+=[{\\]}|\\\\'<,.>?\";:]+$/;\r\n  if (!CLEAN_TEXT.test(value)) {\r\n    return 'No special characters allowed'\r\n  }\r\n}\r\n\r\nexport function minLength(value, length) {\r\n  if (value.length < length) {\r\n    return `Min length have to be ${length}`;\r\n  }\r\n}\r\n\r\nexport function email(value) {\r\n  const EMAIL = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i;\r\n  if (!EMAIL.test(value)) {\r\n    return 'Invalid email address'\r\n  }\r\n}\r\n\r\nexport function passwordsMatch(value, valueToEqual) {\r\n  if (value !== valueToEqual) {\r\n    return 'Passwords does not match'\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport './social-login.scss'\r\nimport { GoogleLogin } from 'react-google-login';\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\r\nimport { TiSocialFacebookCircular } from 'react-icons/ti/';\r\nimport { login } from '../../reducers/profile';\r\n\r\n\r\n\r\nfunction SocialLogin(props) {\r\n\r\n  const onSuccessGoogleLogin = (res) => {\r\n    //console.log(res.profileObj);\r\n    console.log(res);\r\n    // props.login({ profile: res.profileObj });\r\n    props.onSuccessGoogleLogin({access_token: res.accessToken});\r\n  }\r\n\r\n  const onSuccessFacebookLogin = (res) => {\r\n    console.log(res);\r\n    props.onSuccessFacebookLogin({access_token: res.accessToken});\r\n    // props.login({ profile: res });\r\n  }\r\n\r\n  return (\r\n    <div className=\"SocialLogin\">\r\n\r\n      {props.profile ? (\r\n        <div>\r\n          You are logged in as {props.profile.email}\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <GoogleLogin\r\n            clientId=\"546998968320-0cn7qut7aklej8akfljup6hi9a7najba.apps.googleusercontent.com\"\r\n            buttonText=\"Sign in with Google\"\r\n            responseType=\"token\"\r\n            onSuccess={onSuccessGoogleLogin}\r\n            onFailure={(err) => console.log(err)}\r\n          />\r\n          {/*<a href=\"http://lvh.me:3001/auth/google\">GOOGLE</a>*/}\r\n          <FacebookLogin\r\n            appId=\"375214849866140\"\r\n            // autoLoad={true}\r\n            callback={onSuccessFacebookLogin}\r\n            // fields=\"name,email,picture\"\r\n            render={renderProps => (\r\n              <button className=\"fb-button\" onClick={renderProps.onClick}>\r\n                <TiSocialFacebookCircular />\r\n                Sign in with Facebook\r\n              </button>\r\n            )}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    profile: state.preview.profile\r\n  }),\r\n  {\r\n    login\r\n  }\r\n)(SocialLogin)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets } from '../../reducers/preview'\r\nimport { login, signup } from '../../reducers/profile'\r\nimport './signup-form.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport { Formik } from 'formik';\r\nimport { required, email, passwordsMatch, minLength } from '../../services/validations';\r\nimport classNames from 'classnames';\r\nimport backend from '../../services/backend'\r\nimport { toast } from 'react-toastify';\r\nimport SocialLogin from '../../components/social-login';\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  password: '',\r\n  repeatPassword: ''\r\n};\r\n\r\nconst validate = values => {\r\n  let errors = {};\r\n  let emailError = required(values.email) || email(values.email);\r\n  if (emailError) {\r\n    errors.email = emailError;\r\n  }\r\n  let passwordError = required(values.password) || minLength(values.password, 6);\r\n  if (passwordError) {\r\n    errors.password = passwordError;\r\n  }\r\n  let repeatPasswordError = required(values.repeatPassword) || passwordsMatch(values.repeatPassword, values.password);\r\n  if (repeatPasswordError) {\r\n    errors.repeatPassword = repeatPasswordError;\r\n  }\r\n\r\n  return errors\r\n};\r\n\r\n\r\nfunction SignupForm(props) {\r\n\r\n  function onSuccessFacebookLogin(res) {\r\n    props.login(res, 'facebook').then(() => {\r\n      backend.getProfileInfo().then(() => {\r\n        props.onSuccessFacebookLogin()\r\n      });\r\n    });\r\n  }\r\n  function onSuccessGoogleLogin(res) {\r\n    props.login(res, 'google').then((res) => {\r\n      backend.getProfileInfo().then(() => {\r\n        props.onSuccessGoogleLogin()\r\n      });\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className={ classNames('SignupForm', 'place-' + props.place) }>\r\n      {props.place === 'modal' && (\r\n        <h5 className=\"title\">Please sign up to download</h5>\r\n      )}\r\n      {props.place === 'page' && (\r\n        <h5 className=\"title\">Sign Up</h5>\r\n      )}\r\n      <SocialLogin\r\n        onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n        onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n      />\r\n      <Formik\r\n        initialValues={initialValues}\r\n        validate={validate}\r\n        validateOnChange={true}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n          props.signup(values)\r\n            .then(response => {\r\n              props.onSuccessEmailLogin();\r\n            })\r\n            .catch((e) => {\r\n              toast.error('Unexpected error. Try again later.')\r\n            })\r\n            .finally(() => setSubmitting(false))\r\n        }}\r\n      >\r\n        {formProps => {\r\n          const {\r\n            values,\r\n            errors,\r\n            touched,\r\n            isSubmitting,\r\n            handleChange,\r\n            handleBlur,\r\n            handleSubmit,\r\n          } = formProps;\r\n          return (\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"control form-group\">\r\n                <label htmlFor=\"email\" className=\"label\">Email</label>\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"text\"\r\n                  value={values.email}\r\n                  placeholder=\"Email\"\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  className={classNames('input form-control', touched.email && errors.email && 'error')}\r\n                />\r\n                { touched.email && errors.email &&\r\n                <div className=\"error-message\">{ errors.email }</div> }\r\n              </div>\r\n\r\n              <div className=\"control form-group\">\r\n                <label htmlFor=\"password\" className=\"label\">Password</label>\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  value={values.password}\r\n                  placeholder=\"Password\"\r\n                  onChange={handleChange}\r\n                  className={classNames('input form-control', touched.password && errors.password && 'error')}\r\n                />\r\n                { touched.password && errors.password &&\r\n                <div className=\"error-message\">{ errors.password }</div> }\r\n              </div>\r\n\r\n              <div className=\"control form-group\">\r\n                <label htmlFor=\"repeatPassword\" className=\"label\">Repeat your password</label>\r\n                <input\r\n                  id=\"repeatPassword\"\r\n                  name=\"repeatPassword\"\r\n                  type=\"password\"\r\n                  value={values.repeatPassword}\r\n                  placeholder=\"Repeat your password\"\r\n                  onChange={handleChange}\r\n                  className={classNames('input form-control', touched.password && errors.password && 'error')}\r\n                />\r\n                { touched.repeatPassword && errors.repeatPassword &&\r\n                <div className=\"error-message\">{ errors.repeatPassword }</div> }\r\n              </div>\r\n              <div className=\"control form-group\">\r\n                <input\r\n                  type=\"submit\"\r\n                  value=\"Sign Up\"\r\n                  disabled={isSubmitting}\r\n                  className=\"submit btn btn-block btn-lg btn-primary\"\r\n                />\r\n              </div>\r\n              <div className='signin'>\r\n                {props.place === 'page' ? (\r\n                  <Link to=\"signin\">Already have an account? Sign in now!</Link>\r\n                ) : (\r\n                  <a href=\"\" onClick={e => { e.preventDefault(); props.onSignInClick() }}>\r\n                    Already have an account? Sign in now!\r\n                  </a>\r\n                )}\r\n              </div>\r\n            </form>\r\n          );\r\n        }}\r\n      </Formik>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets\r\n  }),\r\n  {\r\n    getSets,\r\n    login,\r\n    signup\r\n  }\r\n)(SignupForm)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets } from '../../reducers/preview'\r\nimport { login } from '../../reducers/profile'\r\nimport './signin-form.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport { Formik } from 'formik';\r\nimport { required, email, minLength } from '../../services/validations';\r\nimport backend from '../../services/backend'\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport SocialLogin from '../social-login/SocialLogin'\r\nimport { toast } from 'react-toastify'\r\n\r\n\r\n\r\nconst initialValues = {\r\n  email: '',\r\n  password: ''\r\n};\r\n\r\nconst validate = values => {\r\n  let errors = {};\r\n  let emailError = required(values.email) || email(values.email);\r\n  if (emailError) {\r\n    errors.email = emailError;\r\n  }\r\n  let passwordError = required(values.password) || minLength(values.password, 6);\r\n  if (passwordError) {\r\n    errors.password = passwordError;\r\n  }\r\n  return errors\r\n};\r\n\r\n\r\nfunction SigninForm(props) {\r\n\r\n  function onSuccessFacebookLogin(res) {\r\n    props.login(res, 'facebook').then(() => {\r\n      backend.getProfileInfo().then(() => {\r\n        props.onSuccessFacebookLogin();\r\n      });\r\n    });\r\n  }\r\n\r\n  function onSuccessGoogleLogin(res) {\r\n    props.login(res, 'google').then(() => {\r\n      backend.getProfileInfo().then(() => {\r\n        props.onSuccessGoogleLogin();\r\n      });\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"SigninForm\">\r\n      {props.place === 'modal' && (\r\n        <h5 className=\"title\">Please sign in to download</h5>\r\n      )}\r\n      {props.place === 'page' && (\r\n        <h5 className=\"title\">Sign In</h5>\r\n      )}\r\n      <SocialLogin\r\n        onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n        onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n      />\r\n      <Formik\r\n        initialValues={initialValues}\r\n        validate={validate}\r\n        validateOnChange={true}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n          props.login(values)\r\n            .then(response => {\r\n              props.onSuccessEmailLogin();\r\n            })\r\n            .catch(() => {\r\n              toast.error('Unexpected error. Try again later.')\r\n            })\r\n            .finally(() => setSubmitting(false))\r\n        }}\r\n      >\r\n        {formProps => {\r\n          const {\r\n            values,\r\n            errors,\r\n            touched,\r\n            isSubmitting,\r\n            handleChange,\r\n            handleBlur,\r\n            handleSubmit,\r\n          } = formProps;\r\n          return (\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"control form-group\">\r\n                <label htmlFor=\"email\" className=\"label\">Email</label>\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"text\"\r\n                  value={values.email}\r\n                  placeholder=\"Email\"\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  className={classNames('input form-control', touched.email && errors.email && 'error')}\r\n                />\r\n                { touched.email && errors.email &&\r\n                <div className=\"error-message\">{ errors.email }</div> }\r\n              </div>\r\n\r\n              <div className=\"control form-group\">\r\n                <label htmlFor=\"password\" className=\"label\">Password</label>\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  value={values.password}\r\n                  placeholder=\"Password\"\r\n                  onChange={handleChange}\r\n                  className={classNames('input form-control', touched.password && errors.password && 'error')}\r\n                />\r\n                { touched.password && errors.password &&\r\n                <div className=\"error-message\">{ errors.password }</div> }\r\n              </div>\r\n              <div className=\"control form-group\">\r\n                <input\r\n                  type=\"submit\"\r\n                  value=\"Sign In\"\r\n                  disabled={isSubmitting}\r\n                  className=\"submit btn btn-block btn-lg btn-primary\"\r\n                />\r\n              </div>\r\n              <div className='signup'>\r\n                {props.place === 'page' ? (\r\n                  <Link to=\"signup\">New to Avatar Maker? Sign up now!</Link>\r\n                ) : (\r\n                  <a href=\"\" onClick={e => { e.preventDefault(); props.onSignUpClick() }}>\r\n                    New to Avatar Maker? Sign up now!\r\n                  </a>\r\n                )}\r\n              </div>\r\n            </form>\r\n          );\r\n        }}\r\n      </Formik>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets\r\n  }),\r\n  {\r\n    getSets,\r\n    login\r\n  }\r\n)(SigninForm)\r\n","import React, { useEffect, useState } from 'react'\r\nimport './download-modal.scss'\r\nimport Modal from 'react-modal';\r\nimport { connect } from 'react-redux'\r\nimport Spinner from '../spinner';\r\nimport SignupFrom from '../signup-form';\r\nimport SigninFrom from '../signin-form';\r\n\r\nModal.setAppElement('#root')\r\n\r\nfunction DownloadModal(props) {\r\n\r\n  const [currentPageSignIn, setCurrentPageSignIn] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (props.profile && props.isOpen) {\r\n      props.onDownload();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.profile, props.isOpen])\r\n\r\n  function onSuccessFacebookLogin() {\r\n\r\n  }\r\n\r\n  function onSuccessGoogleLogin() {\r\n\r\n  }\r\n  function onSuccessEmailLogin() {\r\n\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={props.isOpen}\r\n      onRequestClose={props.closeModal}\r\n      className=\"download-modal\"\r\n    >\r\n      <div>\r\n        {props.profile ?\r\n          (\r\n            <div className=\"isDownloading\">\r\n              <div className=\"email\">\r\n                You are logged in as {props.profile.email}\r\n              </div>\r\n              <p>\r\n                Downloading...\r\n                <div className=\"spinner-wrapper\">\r\n                  <Spinner width={100} height={100} />\r\n                </div>\r\n              </p>\r\n            </div>\r\n          ) : currentPageSignIn ? (\r\n            <SigninFrom\r\n              place=\"modal\"\r\n              onSignUpClick={() => setCurrentPageSignIn(false)}\r\n              onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n              onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n              onSuccessEmailLogin={onSuccessEmailLogin}\r\n            />\r\n            ) : (\r\n            <SignupFrom\r\n              place=\"modal\"\r\n              onSignInClick={() => setCurrentPageSignIn(true)}\r\n              onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n              onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n              onSuccessEmailLogin={onSuccessEmailLogin}\r\n            />\r\n          )\r\n        }\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    profile: state.profile.profile\r\n  })\r\n)(DownloadModal)\r\n","import React, {useState} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getPreviewIsLoading, randomizeFace, saveImage } from '../../reducers/preview'\r\nimport './button-actions.scss'\r\nimport { FaDownload, FaRandom } from 'react-icons/fa'\r\n\r\nimport DownloadSuccessModal from '../download-success-modal'\r\nimport DownloadModal from '../download-modal'\r\n\r\n\r\nfunction ButtonActions(props) {\r\n\r\n  let [modalSuccessIsOpen, setModalSuccessIsOpen] = useState(false);\r\n  let [modalDownloadIsOpen, setModalDownloadIsOpen] = useState(false);\r\n  let [imgBase64, setImgBase64] = useState(null);\r\n\r\n  function onDownload() {\r\n    props.saveImage(props.setId).then((response) => {\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(response.data);\r\n      reader.onloadend = function() {\r\n        let base64data = reader.result;\r\n        setImgBase64(base64data);\r\n        setModalSuccessIsOpen(true);\r\n        setModalDownloadIsOpen(false);\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"ButtonActions\">\r\n      <button\r\n        className=\"btn btn-primary btn-wide mb-2\"\r\n        onClick={props.randomizeFace}\r\n        disabled={props.savingIsLoading || props.previewIsLoading}\r\n      >\r\n        <FaRandom />&nbsp;\r\n        <span className=\"button-text\">Random</span>\r\n      </button>\r\n      <br/>\r\n      <button\r\n        className=\"btn btn-primary btn-wide\"\r\n        onClick={() => setModalDownloadIsOpen(true)}\r\n        disabled={props.savingIsLoading || props.previewIsLoading}\r\n      >\r\n        <FaDownload />&nbsp;\r\n        <span className=\"button-text\">Download</span>\r\n      </button>\r\n      <DownloadModal\r\n        isOpen={modalDownloadIsOpen}\r\n        closeModal={() => setModalDownloadIsOpen(false)}\r\n        onDownload={onDownload}\r\n      />\r\n      <DownloadSuccessModal\r\n        isOpen={modalSuccessIsOpen}\r\n        closeModal={() => setModalSuccessIsOpen(false)}\r\n        imgBase64={imgBase64}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    savingIsLoading: state.preview.savingIsLoading,\r\n    previewIsLoading: state.preview.facePartsAreLoading || getPreviewIsLoading(state)\r\n  }),\r\n  dispatch => ({\r\n    randomizeFace: () => dispatch(randomizeFace()),\r\n    saveImage: (setId) => dispatch(saveImage(setId))\r\n  })\r\n)(ButtonActions)\r\n","import React from 'react';\r\nimport './face-part-container.scss'\r\nimport classNames from 'classnames'\r\n\r\nexport default function FacePartContainer ({id, active, part, url, selectPart}) {\r\n  return (\r\n    <div className={classNames('FacePartContainer', active && 'active')} onClick={() => selectPart(id, part)}>\r\n      <img src={url} alt=\"\"/>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { changeColor } from '../../reducers/preview'\r\nimport './color-picker.scss'\r\nimport { ChromePicker } from 'react-color'\r\nimport { FaEyeDropper } from 'react-icons/fa'\r\n\r\n\r\nfunction ColorPicker({ part, changeColor, partsData, current }) {\r\n  const [showPicker, setShowPicker] = useState(false)\r\n  const [currentColor, setCurrentColor] = useState((current[part] && current[part].color) || '#ffffff');\r\n  const colors = partsData.get(part).colors;\r\n\r\n  const onBackgroundClick = () => {\r\n    setShowPicker(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('click', onBackgroundClick, false)\r\n    return function cleanup() {\r\n      window.removeEventListener('click', onBackgroundClick)\r\n    }\r\n  }, [])\r\n\r\n  if (!colors || !colors.length) return null;\r\n\r\n  return (\r\n    <div className=\"ColorPicker\" onClick={e => e.stopPropagation()}>\r\n      <div\r\n        className=\"color color-pipette\"\r\n        onClick={() => {\r\n          setShowPicker(!showPicker)\r\n        }}\r\n        style={{backgroundColor: (current[part] && current[part].color) || currentColor}}\r\n      >\r\n        <FaEyeDropper/>\r\n      </div>\r\n      {colors.map(color => (\r\n       <div className=\"color\"\r\n            style={{background: color}}\r\n            key={color}\r\n            onClick={() => changeColor(part, color)}>\r\n       </div>\r\n      ))}\r\n      { showPicker &&\r\n        <ChromePicker\r\n          className=\"chromePicker\"\r\n          disableAlpha={true}\r\n          color={(current[part] && current[part].color) || currentColor}\r\n\r\n          onChange={(color) => {\r\n            setCurrentColor(color.hex);\r\n            changeColor(part, color.hex);\r\n          }}\r\n        />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    partsData: state.preview.partsData,\r\n    current: state.preview.current\r\n  }),\r\n  dispatch => ({\r\n    changeColor: (part, color) => dispatch(changeColor(part, color)),\r\n  })\r\n)(ColorPicker)\r\n","import React from 'react';\r\nimport FacePartContainer from '../components/face-part-container'\r\nimport { connect } from 'react-redux'\r\nimport { changeColor } from '../reducers/preview'\r\nimport ColorPicker from '../components/color-picker'\r\n\r\nfunction Base({items, current, selectPart, part}) {\r\n  if (!(items && items.get(part) && items.get(part).images && items.get(part).images.length)) return 'No items on this layer'\r\n  return (\r\n    <div>\r\n      { items.get(part).images.map(item => (\r\n        <FacePartContainer\r\n          active={current && current[part] && (current[part]._id === item._id)}\r\n          key={item._id}\r\n          id={item._id}\r\n          part={part}\r\n          url={item.value}\r\n          selectPart={selectPart}\r\n        />\r\n      )) }\r\n      <br/>\r\n      { !items.get(part).inheritColorFrom && <ColorPicker part={part} /> }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    items: state.preview.partsData,\r\n    current: state.preview.current\r\n  }),\r\n  dispatch => ({\r\n    changeColor: (part, color) => dispatch(changeColor(part, color)),\r\n    selectPart: (_id, part) => dispatch({ type: 'SELECT_PART', payload: {_id, part} })\r\n  })\r\n)(Base)\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './main-tabs.scss'\r\nimport { Tab, TabList, TabPanel, Tabs } from 'react-tabs'\r\nimport Base from '../../face-parts/Base'\r\n\r\nfunction MainTabs({ PARTS, partsData }) {\r\n  if (!PARTS || !PARTS.length) {\r\n    return <div></div>\r\n  }\r\n  return (\r\n    <div className=\"MainTabs\">\r\n      <Tabs defaultIndex={0}>\r\n        <TabList>\r\n          {PARTS.map((part) => (\r\n            <Tab key={part}>{partsData.get(part).title}</Tab>\r\n          ))}\r\n        </TabList>\r\n\r\n        {PARTS.map((part) => (\r\n          <TabPanel key={part}>\r\n            <Base part={part}/>\r\n          </TabPanel>\r\n        ))}\r\n\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    PARTS: state.preview.PARTS,\r\n    partsData: state.preview.partsData\r\n  })\r\n)(MainTabs)\r\n","import React from 'react'\r\nimport './app-header.scss'\r\nimport { FaGrinTongue } from 'react-icons/fa'\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nfunction AppHeader(props) {\r\n  return (\r\n    <div className=\"AppHeader\">\r\n      <div className=\"logo\">\r\n        <Link to='/'>\r\n          <FaGrinTongue />\r\n          Avatar Maker\r\n        </Link>\r\n      </div>\r\n      <ul className=\"menu-items\">\r\n        {props.sets.map((set, index) => (\r\n          <li key={index}>\r\n            { (props.match && (props.match.params.setId === set._id)) ? (\r\n              <Link to={set._id} onClick={e => e.preventDefault()} className='disabled'>\r\n                {set.name}\r\n              </Link>\r\n            ) : (\r\n              <Link to={set._id}>\r\n                {set.name}\r\n              </Link>\r\n            ) }\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      {\r\n        props.profile ? (\r\n          <div className=\"profile-name\">\r\n            {props.profile.email}\r\n          </div>\r\n        ) : (\r\n          <div className=\"signup-wrapper\">\r\n            <Link to='/signup'>\r\n              <button className=\"btn btn-info btn-sm\">SIGN UP</button>\r\n            </Link>\r\n          </div>\r\n        )\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets,\r\n    profile: state.profile.profile\r\n  })\r\n)(AppHeader)\r\n","import React from 'react'\r\nimport './app-menu.scss'\r\nimport { connect } from 'react-redux'\r\nimport { slide as Menu } from 'react-burger-menu'\r\nimport { Link } from 'react-router-dom'\r\nimport { FaSignInAlt, FaUserPlus, FaSignOutAlt, FaDownload } from 'react-icons/fa'\r\nimport { logOut } from '../../reducers/profile';\r\n\r\nfunction AppMenu(props) {\r\n\r\n  function logOut(e) {\r\n    e.preventDefault();\r\n    props.logOut();\r\n  }\r\n\r\n  return (\r\n    <div className=\"AppMenu\">\r\n      <Menu right width={ 280 }>\r\n        { props.profile ?\r\n          (\r\n            <React.Fragment>\r\n              <Link id=\"downloads\" className=\"menu-item\" to=\"/downloads\">\r\n                <FaDownload />&nbsp;<span>Downloads</span>\r\n              </Link>\r\n              <a id=\"logOut\" className=\"menu-item\" href=\"\" onClick={logOut}>\r\n                <FaSignOutAlt />&nbsp;<span>Log out</span>\r\n              </a>\r\n            </React.Fragment>\r\n          ) :\r\n          (\r\n            <React.Fragment>\r\n              <Link id=\"signUp\" className=\"menu-item\" to=\"/signup\">\r\n                <FaUserPlus />&nbsp;<span>Sign Up</span>\r\n              </Link>\r\n              <Link id=\"signIn\" className=\"menu-item\" to=\"/signin\">\r\n                <FaSignInAlt />&nbsp;<span>Log In</span>\r\n              </Link>\r\n            </React.Fragment>\r\n          )\r\n        }\r\n\r\n        <ul className=\"menu-items\">\r\n          {props.sets.map((set, index) => (\r\n            <li key={index}>\r\n              { (props.match && (props.match.params.setId === set._id)) ? (\r\n                <Link to={set._id} onClick={e => e.preventDefault()} className='disabled'>\r\n                  {set.name}\r\n                </Link>\r\n              ) : (\r\n                <Link to={set._id}>\r\n                  {set.name}\r\n                </Link>\r\n              ) }\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </Menu>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets,\r\n    profile: state.profile.profile\r\n  }),\r\n  {\r\n    logOut\r\n  }\r\n)(AppMenu)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport './avatar-page.scss'\r\n\r\nimport Preview from '../../components/preview'\r\nimport ButtonActions from '../../components/button-actions'\r\nimport { getSets, loadFaceParts } from '../../reducers/preview'\r\nimport MainTabs from '../../components/main-tabs'\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\n\r\n\r\nfunction AvatarPage(props) {\r\n\r\n  useEffect(() => {\r\n    props.getSets().then(response => {\r\n      if (!props.match.params.setId) {\r\n        props.history.push(response.data[0]._id);\r\n      }\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (props.match.params.setId) {\r\n      props.loadFaceParts(props.match.params.setId);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.match.params.setId]);\r\n\r\n  return (\r\n    <div className=\"AvatarPage\">\r\n      <AppMenu match={props.match}/>\r\n      <AppHeader match={props.match}/>\r\n      <aside className=\"App-left-col\">\r\n        <div className=\"left-col-container\">\r\n          <Preview setId={props.match.params.setId}/>\r\n          <br/>\r\n          <ButtonActions setId={props.match.params.setId}/>\r\n        </div>\r\n      </aside>\r\n      <main className=\"App-main\">\r\n        <MainTabs />\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets\r\n  }),\r\n  {\r\n    loadFaceParts,\r\n    getSets\r\n  }\r\n)(AvatarPage)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets } from '../../reducers/preview'\r\nimport { login } from '../../reducers/profile'\r\nimport './signup-page.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport face from './face.png';\r\nimport classNames from 'classnames';\r\nimport backend from '../../services/backend'\r\nimport { toast } from 'react-toastify';\r\nimport SignupForm from '../signup-form';\r\n\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\n\r\n\r\n\r\nfunction SignupPage(props) {\r\n\r\n  function onSuccessFacebookLogin(res) {\r\n      props.history.push('/');\r\n  }\r\n  function onSuccessGoogleLogin(res) {\r\n    props.history.push('/');\r\n  }\r\n  function onSuccessEmailLogin(res) {\r\n    props.history.push('/');\r\n  }\r\n\r\n  return (\r\n    <div className=\"SignupPage\">\r\n      <AppHeader />\r\n      <AppMenu />\r\n      <div className=\"wrapper\">\r\n        <div className=\"left-col\">\r\n          <img src={face} alt=\"\"/>\r\n        </div>\r\n        <div className=\"right-col\">\r\n          <div className=\"form-wrapper\">\r\n            <SignupForm\r\n              place=\"page\"\r\n              onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n              onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n              onSuccessEmailLogin={onSuccessEmailLogin}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets\r\n  }),\r\n  {\r\n    getSets,\r\n    login\r\n  }\r\n)(SignupPage)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets } from '../../reducers/preview'\r\nimport { login } from '../../reducers/profile'\r\nimport './signin-page.scss'\r\nimport { Link } from \"react-router-dom\";\r\nimport face from './face.png';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\nimport SigninForm from '../signin-form';\r\n\r\n\r\n\r\nfunction SigninPage(props) {\r\n\r\n  function onSuccessFacebookLogin(res) {\r\n    props.history.push('/');\r\n  }\r\n  function onSuccessGoogleLogin(res) {\r\n    props.history.push('/');\r\n  }\r\n  function onSuccessEmailLogin(res) {\r\n    props.history.push('/');\r\n  }\r\n\r\n  return (\r\n    <div className=\"SigninPage\">\r\n      <AppHeader />\r\n      <AppMenu />\r\n      <div className=\"wrapper\">\r\n        <div className=\"left-col\">\r\n          <img src={face} alt=\"\"/>\r\n        </div>\r\n        <div className=\"right-col\">\r\n          <div className=\"form-wrapper\">\r\n            <SigninForm\r\n              place=\"page\"\r\n              onSuccessFacebookLogin={onSuccessFacebookLogin}\r\n              onSuccessGoogleLogin={onSuccessGoogleLogin}\r\n              onSuccessEmailLogin={onSuccessEmailLogin}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.preview.sets\r\n  }),\r\n  {\r\n    getSets,\r\n    login\r\n  }\r\n)(SigninPage)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getDownloads, removeDownload } from '../../reducers/profile'\r\nimport './downloads-page.scss'\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport AppHeader from '../../components/app-header'\r\nimport AppMenu from '../../components/app-menu'\r\nimport { changeColor } from '../../reducers/preview'\r\n\r\n\r\n\r\nfunction DownloadsPage(props) {\r\n\r\n  useEffect(() => {\r\n    props.getDownloads()\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"DownloadsPage\">\r\n      <AppHeader />\r\n      <AppMenu />\r\n      <div className=\"wrapper\">\r\n        <div className=\"width-wrapper\">\r\n          <h4 className=\"title\">Downloads</h4>\r\n          <div>\r\n            { props.downloads.map(download => (\r\n              <div className=\"preview-tile\" key={download._id}>\r\n                <img src={download.preview} alt=\"\"/>\r\n                <Link\r\n                  className=\"btn btn-primary btn-sm\"\r\n                  to={ '/' + download.setId }\r\n                  onClick={() => props.setCustomFaceParts(download.layers)}\r\n                >Edit</Link>\r\n                <br/>\r\n                <button\r\n                  className=\"btn btn-danger btn-sm\"\r\n                  onClick={ () => props.removeDownload(download._id) }>Remove</button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    downloads: state.profile.downloads\r\n  }),\r\n  dispatch => ({\r\n    getDownloads: () => dispatch(getDownloads()),\r\n    removeDownload: (id) => dispatch(removeDownload(id)),\r\n    setCustomFaceParts: (data) => dispatch({type: 'SET_CUSTOM_FACE_PARTS', payload: data})\r\n  })\r\n)(DownloadsPage)\r\n","import React from 'react';\nimport { HashRouter as Router, Route, Switch, matchPath } from \"react-router-dom\";\n\nimport \"react-tabs/style/react-tabs.css\";\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.scss';\nimport AvatarPage from './components/avatar-page'\nimport SignupPage from './components/signup-page'\nimport SigninPage from './components/signin-page'\nimport DownloadsPage from './components/downloads-page'\nimport { connect } from 'react-redux'\nimport { getProfileInfo } from './reducers/profile'\n\nclass App extends React.Component {\n\n  constructor(props) {\n    props.getProfileInfo();\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ToastContainer autoClose={4000} hideProgressBar={true}/>\n        {/*<Router basename={process.env.REACT_APP_ROUTER_BASE_URL || ''}>*/}\n        <Router>\n          <Switch>\n            <Route path=\"/\" exact component={AvatarPage} />\n            <Route path=\"/downloads\" exact component={DownloadsPage} />\n            <Route path=\"/signup\" exact component={SignupPage} />\n            <Route path=\"/signin\" exact component={SigninPage} />\n            <Route path=\"/:setId\" exact component={AvatarPage} />\n          </Switch>\n        </Router>\n      </div>\n    );\n  }\n}\n\n\nexport default connect(\n  null,\n  {\n    getProfileInfo\n  }\n)(App)\n\n\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux'\nimport reducer from './reducers'\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly'\nimport ReduxThunk from 'redux-thunk'\n\n\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(ReduxThunk)));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}