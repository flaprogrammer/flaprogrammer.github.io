(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,a){e.exports=a.p+"static/media/face.2c39ddd4.png"},148:function(e,t,a){e.exports=a.p+"static/media/face.6721bc4f.png"},153:function(e,t,a){e.exports=a(400)},180:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},202:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},380:function(e,t,a){},381:function(e,t,a){},397:function(e,t,a){},398:function(e,t,a){},399:function(e,t,a){},400:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(24),i=a.n(o),c=a(5),l=a(28),s=a(41),u=a(8),m=a(58),p=document.createElement("canvas"),d=p.getContext("2d"),f=600,g=600;p.width=f,p.height=g;var E=function(e,t){return new Promise(function(a,n){var r=document.createElement("img");r.src=e,r.onload=function(){d.clearRect(0,0,p.width,p.height),d.drawImage(r,0,0,p.width,p.height),function(e,t){d.imageSmoothingQuality="medium",d.globalCompositeOperation="source-atop",d.fillStyle=e,d.fillRect(0,0,p.width,p.height),d.globalCompositeOperation="multiply"}(t),d.drawImage(r,0,0,p.width,p.height),a(p.toDataURL("image/png",.7))}})},h=a(59),v=a(60),b=a(90),S=a.n(b),w="http://185.181.8.53:3001/",O=null,_=new(function(){function e(){var t=this;if(Object(h.a)(this,e),this.authAxios=null,this.axiosInstance=null,this.token=null,this.signup=function(e){return t.axiosInstance.post(w+"auth/sign-up",e)},this.signupFacebook=function(e){return new Promise(function(a,n){t.axiosInstance.post(w+"auth/facebook",e).then(function(e){t.setAxiosInstance(e.data.token),localStorage.setItem("token",e.data.token),a(e)}).catch(function(e){return n(e)})})},this.signupGoogle=function(e){return new Promise(function(a,n){t.axiosInstance.post(w+"auth/google",e).then(function(e){t.setAxiosInstance(e.data.token),localStorage.setItem("token",e.data.token),a(e)}).catch(function(e){return n(e)})})},this.signin=function(e){return new Promise(function(a,n){return t.axiosInstance.post(w+"auth/login",e).then(function(e){t.setAxiosInstance(e.data.token),localStorage.setItem("token",e.data.token),a(e)}).catch(function(e){return n(e)})})},this.getProfileInfo=function(){return t.authAxios.get(w+"profile/info")},this.getDownloads=function(){return t.authAxios.get(w+"profile/downloads")},this.removeDownload=function(e){return t.authAxios.delete(w+"profile/downloads/"+e)},this.getFaceParts=function(e){return t.axiosInstance.get(w+"face-parts/"+e)},this.getSets=function(){return t.axiosInstance.get(w+"face-parts/sets")},this.login=function(e){return t.axiosInstance.post(w+"face-parts/login",e)},this.saveImage=function(e,a){return t.authAxios({url:w+"save-image/"+e,method:"GET",responseType:"blob",params:{data:a}})},this.logOut=function(){t.token=null,localStorage.removeItem("token")},!O){O=this;var a=localStorage.getItem("token");a&&(this.token=a),this.setAxiosInstance(a)}return O}return Object(v.a)(e,[{key:"setAxiosInstance",value:function(e){this.axiosInstance=S.a.create({baseURL:w,headers:{"Content-Type":"application/json"}}),this.authAxios=S.a.create({baseURL:w,headers:{Authorization:"jwt "+e,"Content-Type":"application/json"}})}}]),e}()),y=a(61),A=a(136),I={partsDataOriginal:new Map,partsData:new Map,PARTS:[],PARTS_WITH_COLORS:[],partSprites:[],previewIsLoading:!1,facePartsAreLoading:!0,savingIsLoading:!1,sets:[],hiddenParts:[],conflicts:{},currentSet:null,current:{}};var N=function(){return function(e){return e({type:"GET_SETS_REQUEST"}),new Promise(function(t){_.getSets().then(function(a){e({type:"GET_SETS_SUCCESS",payload:a}),t(a)}).catch(function(t){e({type:"GET_SETS_FAILURE",payload:t})})})}},C=function(e,t){return function(a,n){var r=[];n().preview.partsDataOriginal.forEach(function(t,a){t.inheritColorFrom===e&&r.push(a)}),n().preview.partsDataOriginal.get(e).images.forEach(function(n){E(n.value,t).then(function(r){a({type:"SET_COLOR",payload:{_id:n._id,part:e,value:r,color:t}})})}),r.forEach(function(e){n().preview.partsDataOriginal.get(e).images.forEach(function(n){E(n.value,t).then(function(r){a({type:"SET_COLOR",payload:{_id:n._id,part:e,value:r,color:t}})})})})}},L=Object(m.a)(function(e){return e.preview.partsData},function(e){return e.preview.current},function(e,t){var a=[];return e.forEach(function(e,n){if(t[n]){var r=e.images.find(function(e){return e._id===t[n]._id});a.push({zIndex:e.zIndex,value:r})}}),a=(a=a.sort(function(e,t){return e.zIndex-t.zIndex})).map(function(e){return e.value&&e.value.value})}),P=Object(m.a)(function(e){return e.preview.partsData},function(e){if(!e)return!0;var t=!0,a=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0)for(var i=r.value,c=0;c<i[1].images.length;c++)if(i[1].images[c].isLoading)return!0}catch(l){a=!0,n=l}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}return!1}),k=function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(n.type)?t[n.type](a,n):a}}(I,{SELECT_PART:function(e,t){var a=t.payload,n=a._id,r=a.part,o=a.randomized,i=Object.assign({},e.current);return!o&&e.conflicts[r]&&e.conflicts[r].forEach(function(t){e.partsData.forEach(function(e){e._id===t&&i[e._id]&&(i[e._id]._id="transparent")})}),Object(u.a)({},e,{current:Object(u.a)({},i,Object(s.a)({},r,Object(u.a)({},e.current[r],{_id:n})))})},SET_COLOR_START:function(e,t){var a=t.payload.part,n=new Map(e.partsData),r=Object.assign({},n.get(a));return r.images&&r.images.forEach(function(e){return e.isLoading=!0}),n.set(a,r),Object(u.a)({},e,{partsData:n})},SET_COLOR:function(e,t){var a=t.payload,n=a._id,r=a.part,o=a.value,i=a.color,c=new Map(e.partsData),l=Object.assign({},c.get(r)),m=[].concat(e.partsData.get(r).images);return m.find(function(e){return e._id===n}).value=o,m.find(function(e){return e._id===n}).isLoading=!1,l.images=m,c.set(r,l),Object(u.a)({},e,{partsData:c,current:Object(u.a)({},e.current,Object(s.a)({},r,Object(u.a)({},e.current[r],{color:i})))})},SET_PREVIEW_IS_LOADING:function(e,t){var a=t.value;return Object(u.a)({},e,{previewIsLoading:a})},GET_SETS_SUCCESS:function(e,t){var a=t.payload;return Object(u.a)({},e,{sets:a.data})},SET_CUSTOM_FACE_PARTS:function(e,t){var a=t.payload;return Object(u.a)({},e,{current:a})},LOAD_FACE_PARTS_REQUEST:function(e,t){var a=t.payload;return Object(u.a)({},e,{current:{},currentSet:a,partsDataOriginal:new Map,partsData:new Map,PARTS:[],PARTS_WITH_COLORS:[],facePartsAreLoading:!0})},LOAD_FACE_PARTS_SUCCESS:function(e,t){var a=t.payload,n=Object(y.cloneDeep)(a.data),r=Object.assign({},e.current),o={},i=new Map;return n.forEach(function(e,t){e.images.unshift({_id:"transparent",value:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}),e.images.forEach(function(e){e.isLoading=!1}),e.conflictsWith.length&&(o[e._id]?o[e._id].concat(e.conflictsWith):o[e._id]=e.conflictsWith,o[e._id]=e.conflictsWith,e.conflictsWith.forEach(function(t){o[t]?o[t].push(e._id):o[t]=[e._id]})),e.showOnStart?r[e._id]={_id:e.images[1]._id}:r[e._id]={_id:"transparent"},i.set(e._id,e)}),Object(u.a)({},e,{conflicts:o,partsData:i,partsDataOriginal:Object(y.cloneDeep)(i),PARTS:a.data.map(function(e){return e._id}),PARTS_WITH_COLORS:a.data.filter(function(e){return e.colors&&e.colors.length}).map(function(e){return e._id}),facePartsAreLoading:!1,current:r})},SAVE_IMAGE_REQUEST:function(e){return Object(u.a)({},e,{savingIsLoading:!0})},SAVE_IMAGE_SUCCESS:function(e){return Object(u.a)({},e,{savingIsLoading:!1})}});var T=function(e,t){return function(a){a({type:"LOGIN_REQUEST"});var n=_.signin;return"facebook"===t&&(n=_.signupFacebook),"google"===t&&(n=_.signupGoogle),n(e).then(function(e){a({type:"LOGIN_SUCCESS",payload:e})}).catch(function(e){a({type:"LOGIN_FAILURE",payload:e})})}},j=function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(n.type)?t[n.type](a,n):a}}({profile:null,downloads:[]},{GET_PROFILE_INFO_SUCCESS:function(e,t){var a=t.payload;return Object(u.a)({},e,{profile:a.data})},GET_DOWNLOADS_SUCCESS:function(e,t){var a=t.payload;return Object(u.a)({},e,{downloads:a.data||[]})},REMOVE_DOWNLOAD_SUCCESS:function(e,t){var a=t.payload;return Object(u.a)({},e,{downloads:a.data||[]})},LOGIN_SUCCESS:function(e,t){var a=t.payload;return Object(u.a)({},e,{profile:a.data})},SIGNUP_SUCCESS:function(e,t){var a=t.payload;return Object(u.a)({},e,{profile:a.data})},LOGOUT:function(e){return Object(u.a)({},e,{profile:null})}}),D=Object(l.combineReducers)({preview:k,profile:j}),R=(a(180),a(151)),F=a(137),U=a(152),G=a(9),x=a(34),M=(a(181),a(33));a(182),a(183),a(184),a(185);function W(e){var t=e.width,a=void 0===t?300:t,n=e.height,o=void 0===n?300:n;return r.a.createElement("div",{className:"spinner",style:{width:a,height:o}},"Loading...")}var V=a(6),B=a.n(V);a(186);var Q=Object(c.b)(function(e){return{items:L(e),current:e.preview.current,previewIsLoading:e.preview.facePartsAreLoading||P(e)||e.preview.savingIsLoading}})(function(e){var t=e.items,a=e.previewIsLoading;return e.setId,r.a.createElement("div",{className:B()("Preview",a&&"isLoading")},r.a.createElement("div",{className:"images"},t.map(function(e,t){return r.a.createElement("div",{className:"img",style:{backgroundImage:"url("+e+")"},key:t,alt:""})})),r.a.createElement(W,null))}),z=a(26),H=(a(187),a(17)),Y=(a(188),a(36)),q=a.n(Y);function Z(e){return r.a.createElement(q.a,{isOpen:e.isOpen,onRequestClose:e.closeModal,className:"download-success-modal"},r.a.createElement("h4",null,"Great! Your download has been successful!"),r.a.createElement("img",{className:"modal-image",src:e.imgBase64,alt:""}),r.a.createElement("h6",null,"If you want to download images in high quality, you can ",r.a.createElement("strong",null,"become premium")))}q.a.setAppElement("#root");a(196),a(197);var J=a(65);function K(e){if(!e)return"Field is required"}function $(e,t){if(e.length<t)return"Min length have to be ".concat(t)}function X(e){if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e))return"Invalid email address"}a(202);var ee=a(140),te=a(141),ae=a.n(te),ne=a(142);var re=Object(c.b)(function(e){return{profile:e.preview.profile}},{login:T})(function(e){return r.a.createElement("div",{className:"SocialLogin"},e.profile?r.a.createElement("div",null,"You are logged in as ",e.profile.email):r.a.createElement("div",null,r.a.createElement(ee.GoogleLogin,{clientId:"546998968320-0cn7qut7aklej8akfljup6hi9a7najba.apps.googleusercontent.com",buttonText:"Sign in with Google",responseType:"token",onSuccess:function(t){console.log(t),e.onSuccessGoogleLogin({access_token:t.accessToken})},onFailure:function(e){return console.log(e)}}),r.a.createElement(ae.a,{appId:"375214849866140",callback:function(t){console.log(t),e.onSuccessFacebookLogin({access_token:t.accessToken})},render:function(e){return r.a.createElement("button",{className:"fb-button",onClick:e.onClick},r.a.createElement(ne.a,null),"Sign in with Facebook")}})))}),oe={email:"",password:"",repeatPassword:""},ie=function(e){var t={},a=K(e.email)||X(e.email);a&&(t.email=a);var n=K(e.password)||$(e.password,6);n&&(t.password=n);var r=K(e.repeatPassword)||function(e,t){if(e!==t)return"Passwords does not match"}(e.repeatPassword,e.password);return r&&(t.repeatPassword=r),t};var ce=Object(c.b)(function(e){return{sets:e.preview.sets}},{getSets:N,login:T,signup:function(e){return function(t){return t({type:"SIGNUP_REQUEST"}),_.signup(e).then(function(e){t({type:"SIGNUP_SUCCESS",payload:e})}).catch(function(e){t({type:"SIGNUP_FAILURE",payload:e})})}}})(function(e){return r.a.createElement("div",{className:B()("SignupForm","place-"+e.place)},"modal"===e.place&&r.a.createElement("h5",{className:"title"},"Please sign up to download"),"page"===e.place&&r.a.createElement("h5",{className:"title"},"Sign Up"),r.a.createElement(re,{onSuccessFacebookLogin:function(t){e.login(t,"facebook").then(function(){_.getProfileInfo().then(function(){e.onSuccessFacebookLogin()})})},onSuccessGoogleLogin:function(t){e.login(t,"google").then(function(t){_.getProfileInfo().then(function(){e.onSuccessGoogleLogin()})})}}),r.a.createElement(J.a,{initialValues:oe,validate:ie,validateOnChange:!0,onSubmit:function(t,a){var n=a.setSubmitting;e.signup(t).then(function(t){e.onSuccessEmailLogin()}).catch(function(e){M.b.error("Unexpected error. Try again later.")}).finally(function(){return n(!1)})}},function(t){var a=t.values,n=t.errors,o=t.touched,i=t.isSubmitting,c=t.handleChange,l=t.handleBlur,s=t.handleSubmit;return r.a.createElement("form",{onSubmit:s},r.a.createElement("div",{className:"control form-group"},r.a.createElement("label",{htmlFor:"email",className:"label"},"Email"),r.a.createElement("input",{id:"email",name:"email",type:"text",value:a.email,placeholder:"Email",onChange:c,onBlur:l,className:B()("input form-control",o.email&&n.email&&"error")}),o.email&&n.email&&r.a.createElement("div",{className:"error-message"},n.email)),r.a.createElement("div",{className:"control form-group"},r.a.createElement("label",{htmlFor:"password",className:"label"},"Password"),r.a.createElement("input",{id:"password",name:"password",type:"password",value:a.password,placeholder:"Password",onChange:c,className:B()("input form-control",o.password&&n.password&&"error")}),o.password&&n.password&&r.a.createElement("div",{className:"error-message"},n.password)),r.a.createElement("div",{className:"control form-group"},r.a.createElement("label",{htmlFor:"repeatPassword",className:"label"},"Repeat your password"),r.a.createElement("input",{id:"repeatPassword",name:"repeatPassword",type:"password",value:a.repeatPassword,placeholder:"Repeat your password",onChange:c,className:B()("input form-control",o.password&&n.password&&"error")}),o.repeatPassword&&n.repeatPassword&&r.a.createElement("div",{className:"error-message"},n.repeatPassword)),r.a.createElement("div",{className:"control form-group"},r.a.createElement("input",{type:"submit",value:"Sign Up",disabled:i,className:"submit btn btn-block btn-lg btn-primary"})),r.a.createElement("div",{className:"signin"},"page"===e.place?r.a.createElement(G.b,{to:"signin"},"Already have an account? Sign in now!"):r.a.createElement("a",{href:"",onClick:function(t){t.preventDefault(),e.onSignInClick()}},"Already have an account? Sign in now!")))}))}),le=(a(214),{email:"",password:""}),se=function(e){var t={},a=K(e.email)||X(e.email);a&&(t.email=a);var n=K(e.password)||$(e.password,6);return n&&(t.password=n),t};var ue=Object(c.b)(function(e){return{sets:e.preview.sets}},{getSets:N,login:T})(function(e){return r.a.createElement("div",{className:"SigninForm"},"modal"===e.place&&r.a.createElement("h5",{className:"title"},"Please sign in to download"),"page"===e.place&&r.a.createElement("h5",{className:"title"},"Sign In"),r.a.createElement(re,{onSuccessFacebookLogin:function(t){e.login(t,"facebook").then(function(){_.getProfileInfo().then(function(){e.onSuccessFacebookLogin()})})},onSuccessGoogleLogin:function(t){e.login(t,"google").then(function(){_.getProfileInfo().then(function(){e.onSuccessGoogleLogin()})})}}),r.a.createElement(J.a,{initialValues:le,validate:se,validateOnChange:!0,onSubmit:function(t,a){var n=a.setSubmitting;e.login(t).then(function(t){e.onSuccessEmailLogin()}).catch(function(){M.b.error("Unexpected error. Try again later.")}).finally(function(){return n(!1)})}},function(t){var a=t.values,n=t.errors,o=t.touched,i=t.isSubmitting,c=t.handleChange,l=t.handleBlur,s=t.handleSubmit;return r.a.createElement("form",{onSubmit:s},r.a.createElement("div",{className:"control form-group"},r.a.createElement("label",{htmlFor:"email",className:"label"},"Email"),r.a.createElement("input",{id:"email",name:"email",type:"text",value:a.email,placeholder:"Email",onChange:c,onBlur:l,className:B()("input form-control",o.email&&n.email&&"error")}),o.email&&n.email&&r.a.createElement("div",{className:"error-message"},n.email)),r.a.createElement("div",{className:"control form-group"},r.a.createElement("label",{htmlFor:"password",className:"label"},"Password"),r.a.createElement("input",{id:"password",name:"password",type:"password",value:a.password,placeholder:"Password",onChange:c,className:B()("input form-control",o.password&&n.password&&"error")}),o.password&&n.password&&r.a.createElement("div",{className:"error-message"},n.password)),r.a.createElement("div",{className:"control form-group"},r.a.createElement("input",{type:"submit",value:"Sign In",disabled:i,className:"submit btn btn-block btn-lg btn-primary"})),r.a.createElement("div",{className:"signup"},"page"===e.place?r.a.createElement(G.b,{to:"signup"},"New to Avatar Maker? Sign up now!"):r.a.createElement("a",{href:"",onClick:function(t){t.preventDefault(),e.onSignUpClick()}},"New to Avatar Maker? Sign up now!")))}))});q.a.setAppElement("#root");var me=Object(c.b)(function(e){return{profile:e.profile.profile}})(function(e){var t=Object(n.useState)(!0),a=Object(z.a)(t,2),o=a[0],i=a[1];function c(){}function l(){}function s(){}return Object(n.useEffect)(function(){e.profile&&e.isOpen&&e.onDownload()},[e.profile,e.isOpen]),r.a.createElement(q.a,{isOpen:e.isOpen,onRequestClose:e.closeModal,className:"download-modal"},r.a.createElement("div",null,e.profile?r.a.createElement("div",{className:"isDownloading"},r.a.createElement("div",{className:"email"},"You are logged in as ",e.profile.email),r.a.createElement("p",null,"Downloading...",r.a.createElement("div",{className:"spinner-wrapper"},r.a.createElement(W,{width:100,height:100})))):o?r.a.createElement(ue,{place:"modal",onSignUpClick:function(){return i(!1)},onSuccessFacebookLogin:c,onSuccessGoogleLogin:l,onSuccessEmailLogin:s}):r.a.createElement(ce,{place:"modal",onSignInClick:function(){return i(!0)},onSuccessFacebookLogin:c,onSuccessGoogleLogin:l,onSuccessEmailLogin:s})))});var pe=Object(c.b)(function(e){return{savingIsLoading:e.preview.savingIsLoading,previewIsLoading:e.preview.facePartsAreLoading||P(e)}},function(e){return{randomizeFace:function(){return e(function(e,t){var a=[].concat(t().preview.PARTS).sort(function(){return Math.random()-.5}),n={};a.forEach(function(a){if(t().preview.partsData.get(a).images.length){if(Object.values(n).reduce(function(e,t){return e.concat(t)},[]).includes(t().preview.partsData.get(a)._id))return e({type:"SELECT_PART",payload:{_id:"transparent",part:a,randomized:!0}});if(t().preview.PARTS_WITH_COLORS.includes(a)){var r=Math.floor(255*Math.random()).toString(16).padStart(2,"0"),o=Math.floor(255*Math.random()).toString(16).padStart(2,"0"),i=Math.floor(255*Math.random()).toString(16).padStart(2,"0");e(C(a,"#"+r+o+i)),e({type:"SET_COLOR_START",payload:{part:a}})}var c=Math.floor(Math.random()*(t().preview.partsData.get(a).images.length-1))+1,l=t().preview.partsData.get(a).images[c]._id;e({type:"SELECT_PART",payload:{_id:l,part:a,randomized:!0}}),n[a]=t().preview.conflicts[t().preview.partsData.get(a)._id]}})})},saveImage:function(t){return e(function(e){return function(t,a){var n=a().preview.current;return t({type:"SAVE_IMAGE_REQUEST"}),new Promise(function(a,r){_.saveImage(e,n).then(function(e){Object(A.saveAs)(new Blob([e.data]),"image"+Math.floor(1e5*Math.random()+1)+".png"),t({type:"SAVE_IMAGE_SUCCESS",payload:e}),a(e)}).catch(function(e){t({type:"SAVE_IMAGE_FAILURE",payload:e}),r(e)})})}}(t))}}})(function(e){var t=Object(n.useState)(!1),a=Object(z.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=Object(z.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(null),p=Object(z.a)(m,2),d=p[0],f=p[1];return r.a.createElement("div",{className:"ButtonActions"},r.a.createElement("button",{className:"btn btn-primary btn-wide mb-2",onClick:e.randomizeFace,disabled:e.savingIsLoading||e.previewIsLoading},r.a.createElement(H.d,null),"\xa0",r.a.createElement("span",{className:"button-text"},"Random")),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-primary btn-wide",onClick:function(){return u(!0)},disabled:e.savingIsLoading||e.previewIsLoading},r.a.createElement(H.a,null),"\xa0",r.a.createElement("span",{className:"button-text"},"Download")),r.a.createElement(me,{isOpen:s,closeModal:function(){return u(!1)},onDownload:function(){e.saveImage(e.setId).then(function(e){var t=new FileReader;t.readAsDataURL(e.data),t.onloadend=function(){var e=t.result;f(e),i(!0),u(!1)}})}}),r.a.createElement(Z,{isOpen:o,closeModal:function(){return i(!1)},imgBase64:d}))}),de=(a(215),a(43));a(216);function fe(e){var t=e.id,a=e.active,n=e.part,o=e.url,i=e.selectPart;return r.a.createElement("div",{className:B()("FacePartContainer",a&&"active"),onClick:function(){return i(t,n)}},r.a.createElement("img",{src:o,alt:""}))}a(217);var ge=a(145);var Ee=Object(c.b)(function(e){return{partsData:e.preview.partsData,current:e.preview.current}},function(e){return{changeColor:function(t,a){return e(C(t,a))}}})(function(e){var t=e.part,a=e.changeColor,o=e.partsData,i=e.current,c=Object(n.useState)(!1),l=Object(z.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(i[t]&&i[t].color||"#ffffff"),p=Object(z.a)(m,2),d=p[0],f=p[1],g=o.get(t).colors,E=function(){u(!1)};return Object(n.useEffect)(function(){return window.addEventListener("click",E,!1),function(){window.removeEventListener("click",E)}},[]),g&&g.length?r.a.createElement("div",{className:"ColorPicker",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"color color-pipette",onClick:function(){u(!s)},style:{backgroundColor:i[t]&&i[t].color||d}},r.a.createElement(H.b,null)),g.map(function(e){return r.a.createElement("div",{className:"color",style:{background:e},key:e,onClick:function(){return a(t,e)}})}),s&&r.a.createElement(ge.ChromePicker,{className:"chromePicker",disableAlpha:!0,color:i[t]&&i[t].color||d,onChange:function(e){f(e.hex),a(t,e.hex)}})):null});var he=Object(c.b)(function(e){return{items:e.preview.partsData,current:e.preview.current}},function(e){return{changeColor:function(t,a){return e(C(t,a))},selectPart:function(t,a){return e({type:"SELECT_PART",payload:{_id:t,part:a}})}}})(function(e){var t=e.items,a=e.current,n=e.selectPart,o=e.part;return t&&t.get(o)&&t.get(o).images&&t.get(o).images.length?r.a.createElement("div",null,t.get(o).images.map(function(e){return r.a.createElement(fe,{active:a&&a[o]&&a[o]._id===e._id,key:e._id,id:e._id,part:o,url:e.value,selectPart:n})}),r.a.createElement("br",null),!t.get(o).inheritColorFrom&&r.a.createElement(Ee,{part:o})):"No items on this layer"});var ve=Object(c.b)(function(e){return{PARTS:e.preview.PARTS,partsData:e.preview.partsData}})(function(e){var t=e.PARTS,a=e.partsData;return t&&t.length?r.a.createElement("div",{className:"MainTabs"},r.a.createElement(de.d,{defaultIndex:0},r.a.createElement(de.b,null,t.map(function(e){return r.a.createElement(de.a,{key:e},a.get(e).title)})),t.map(function(e){return r.a.createElement(de.c,{key:e},r.a.createElement(he,{part:e}))}))):r.a.createElement("div",null)});a(380);var be=Object(c.b)(function(e){return{sets:e.preview.sets,profile:e.profile.profile}})(function(e){return r.a.createElement("div",{className:"AppHeader"},r.a.createElement("div",{className:"logo"},r.a.createElement(G.b,{to:"/"},r.a.createElement(H.c,null),"Avatar Maker")),r.a.createElement("ul",{className:"menu-items"},e.sets.map(function(t,a){return r.a.createElement("li",{key:a},e.match&&e.match.params.setId===t._id?r.a.createElement(G.b,{to:t._id,onClick:function(e){return e.preventDefault()},className:"disabled"},t.name):r.a.createElement(G.b,{to:t._id},t.name))})),e.profile?r.a.createElement("div",{className:"profile-name"},e.profile.email):r.a.createElement("div",{className:"signup-wrapper"},r.a.createElement(G.b,{to:"/signup"},r.a.createElement("button",{className:"btn btn-info btn-sm"},"SIGN UP"))))}),Se=(a(381),a(146));var we=Object(c.b)(function(e){return{sets:e.preview.sets,profile:e.profile.profile}},{logOut:function(){return function(e){_.logOut(),e({type:"LOGOUT"})}}})(function(e){return r.a.createElement("div",{className:"AppMenu"},r.a.createElement(Se.slide,{right:!0,width:280},e.profile?r.a.createElement(r.a.Fragment,null,r.a.createElement(G.b,{id:"downloads",className:"menu-item",to:"/downloads"},r.a.createElement(H.a,null),"\xa0",r.a.createElement("span",null,"Downloads")),r.a.createElement("a",{id:"logOut",className:"menu-item",href:"",onClick:function(t){t.preventDefault(),e.logOut()}},r.a.createElement(H.f,null),"\xa0",r.a.createElement("span",null,"Log out"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(G.b,{id:"signUp",className:"menu-item",to:"/signup"},r.a.createElement(H.g,null),"\xa0",r.a.createElement("span",null,"Sign Up")),r.a.createElement(G.b,{id:"signIn",className:"menu-item",to:"/signin"},r.a.createElement(H.e,null),"\xa0",r.a.createElement("span",null,"Log In"))),r.a.createElement("ul",{className:"menu-items"},e.sets.map(function(t,a){return r.a.createElement("li",{key:a},e.match&&e.match.params.setId===t._id?r.a.createElement(G.b,{to:t._id,onClick:function(e){return e.preventDefault()},className:"disabled"},t.name):r.a.createElement(G.b,{to:t._id},t.name))}))))});var Oe=Object(c.b)(function(e){return{sets:e.preview.sets}},{loadFaceParts:function(e,t){return function(a,n){(e!==n().preview.currentSet||t)&&(a({type:"LOAD_FACE_PARTS_REQUEST",payload:e}),_.getFaceParts(e).then(function(e){a({type:"LOAD_FACE_PARTS_SUCCESS",payload:e})}).catch(function(e){a({type:"LOAD_FACE_PARTS_FAILURE",payload:e})}))}},getSets:N})(function(e){return Object(n.useEffect)(function(){e.getSets().then(function(t){e.match.params.setId||e.history.push(t.data[0]._id)})},[]),Object(n.useEffect)(function(){e.match.params.setId&&e.loadFaceParts(e.match.params.setId)},[e.match.params.setId]),r.a.createElement("div",{className:"AvatarPage"},r.a.createElement(we,{match:e.match}),r.a.createElement(be,{match:e.match}),r.a.createElement("aside",{className:"App-left-col"},r.a.createElement("div",{className:"left-col-container"},r.a.createElement(Q,{setId:e.match.params.setId}),r.a.createElement("br",null),r.a.createElement(pe,{setId:e.match.params.setId}))),r.a.createElement("main",{className:"App-main"},r.a.createElement(ve,null)))}),_e=(a(397),a(147)),ye=a.n(_e);var Ae=Object(c.b)(function(e){return{sets:e.preview.sets}},{getSets:N,login:T})(function(e){return r.a.createElement("div",{className:"SignupPage"},r.a.createElement(be,null),r.a.createElement(we,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"left-col"},r.a.createElement("img",{src:ye.a,alt:""})),r.a.createElement("div",{className:"right-col"},r.a.createElement("div",{className:"form-wrapper"},r.a.createElement(ce,{place:"page",onSuccessFacebookLogin:function(t){e.history.push("/")},onSuccessGoogleLogin:function(t){e.history.push("/")},onSuccessEmailLogin:function(t){e.history.push("/")}})))))}),Ie=(a(398),a(148)),Ne=a.n(Ie);var Ce=Object(c.b)(function(e){return{sets:e.preview.sets}},{getSets:N,login:T})(function(e){return r.a.createElement("div",{className:"SigninPage"},r.a.createElement(be,null),r.a.createElement(we,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"left-col"},r.a.createElement("img",{src:Ne.a,alt:""})),r.a.createElement("div",{className:"right-col"},r.a.createElement("div",{className:"form-wrapper"},r.a.createElement(ue,{place:"page",onSuccessFacebookLogin:function(t){e.history.push("/")},onSuccessGoogleLogin:function(t){e.history.push("/")},onSuccessEmailLogin:function(t){e.history.push("/")}})))))});a(399);var Le=Object(c.b)(function(e){return{downloads:e.profile.downloads}},function(e){return{getDownloads:function(){return e(function(e){if(_.token)return e({type:"GET_DOWNLOADS_REQUEST"}),new Promise(function(t){_.getDownloads().then(function(a){e({type:"GET_DOWNLOADS_SUCCESS",payload:a}),t(a)}).catch(function(t){e({type:"GET_DOWNLOADS_FAILURE",payload:t})})})})},removeDownload:function(t){return e(function(e){return function(t){if(_.token)return t({type:"REMOVE_DOWNLOAD_REQUEST"}),new Promise(function(a){_.removeDownload(e).then(function(e){t({type:"REMOVE_DOWNLOAD_SUCCESS",payload:e}),a(e)}).catch(function(e){t({type:"REMOVE_DOWNLOAD_FAILURE",payload:e})})})}}(t))},setCustomFaceParts:function(t){return e({type:"SET_CUSTOM_FACE_PARTS",payload:t})}}})(function(e){return Object(n.useEffect)(function(){e.getDownloads()},[]),r.a.createElement("div",{className:"DownloadsPage"},r.a.createElement(be,null),r.a.createElement(we,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"width-wrapper"},r.a.createElement("h4",{className:"title"},"Downloads"),r.a.createElement("div",null,e.downloads.map(function(t){return r.a.createElement("div",{className:"preview-tile",key:t._id},r.a.createElement("img",{src:t.preview,alt:""}),r.a.createElement(G.b,{className:"btn btn-primary btn-sm",to:"/"+t.setId,onClick:function(){return e.setCustomFaceParts(t.layers)}},"Edit"),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){return e.removeDownload(t._id)}},"Remove"))})))))}),Pe=function(e){function t(e){return Object(h.a)(this,t),e.getProfileInfo(),Object(R.a)(this,Object(F.a)(t).call(this,e))}return Object(U.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(M.a,{autoClose:4e3,hideProgressBar:!0}),r.a.createElement(G.a,null,r.a.createElement(x.c,null,r.a.createElement(x.a,{path:"/",exact:!0,component:Oe}),r.a.createElement(x.a,{path:"/downloads",exact:!0,component:Le}),r.a.createElement(x.a,{path:"/signup",exact:!0,component:Ae}),r.a.createElement(x.a,{path:"/signin",exact:!0,component:Ce}),r.a.createElement(x.a,{path:"/:setId",exact:!0,component:Oe}))))}}]),t}(r.a.Component),ke=Object(c.b)(null,{getProfileInfo:function(){return function(e){if(_.token)return e({type:"GET_PROFILE_INFO_REQUEST"}),new Promise(function(t){_.getProfileInfo().then(function(a){e({type:"GET_PROFILE_INFO_SUCCESS",payload:a}),t(a)}).catch(function(t){e({type:"GET_PROFILE_INFO_FAILURE",payload:t})})})}}})(Pe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Te=a(149),je=a(150),De=Object(l.createStore)(D,Object(Te.composeWithDevTools)(Object(l.applyMiddleware)(je.a)));i.a.render(r.a.createElement(c.a,{store:De},r.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[153,1,2]]]);
//# sourceMappingURL=main.85691069.chunk.js.map