{"version":3,"sources":["services/canvas.js","services/backend.js","reducers/preview.js","components/spinner/Spinner.js","components/preview/Preview.js","components/download-success-modal/DownloadSuccessModal.js","components/button-actions/ButtonActions.js","components/face-part-container/FacePartContainer.js","components/color-picker/pipette.svg","components/color-picker/ColorPicker.js","face-parts/Base.js","components/main-tabs/MainTabs.js","components/avatar-page/AvatarPage.js","components/select-set/SelectSet.js","App.js","serviceWorker.js","index.js"],"names":["canvas","document","createElement","context","getContext","IMG_WIDTH","IMG_HEIGHT","changeImageColor","url","spriteLength","color","Promise","resolve","reject","width","height","img","src","onload","clearRect","drawImage","imageSmoothingQuality","globalCompositeOperation","fillStyle","fillRect","colorize","toDataURL","API_URL","process","console","log","axiosInstance","axios","create","headers","Content-Type","TRANSPARENT_PIXEL","initialState","Object","defineProperty","partsData","PARTS","PARTS_WITH_COLORS","sprites","spritesOriginal","current","previewIsLoading","facePartsAreLoading","savingIsLoading","sets","hiddenParts","conflicts","saveImage","setId","dispatch","getState","data","type","method","responseType","params","backend","then","response","saveAs","Blob","Math","floor","random","payload","catch","e","changeColor","part","partsToInheritColor","forEach","pd","index","inheritColorFrom","_id","push","images","length","value","inheritPart","randomizeFace","includes","i","isLoading","r","toString","padStart","g","b","concat","sort","getPreviewIsLoading","createSelector","state","entries","values","_loop","key","find","el","zIndex","a","map","v","reducer","handlers","arguments","undefined","action","hasOwnProperty","createReducer","SELECT_PART","_ref","_ref$payload","newCurrent","assign","partId","conflictedPart","objectSpread","SET_COLOR","_ref2","_ref2$payload","SET_PREVIEW_IS_LOADING","_ref3","GET_SETS_SUCCESS","_ref4","LOAD_FACE_PARTS_REQUEST","_ref5","SET_SPRITES","_ref6","cloneDeep","LOAD_FACE_PARTS_SUCCESS","_ref7","newPartsData","unshift","conflictsWith","keys","pickBy","colors","SAVE_IMAGE_REQUEST","SAVE_IMAGE_SUCCESS","Spinner","_ref$width","_ref$height","react_default","className","style","connect","classNames","react_router_dom","to","sprite","position","backgroundImage","backgroundPosition","DownloadSuccessModal","props","lib_default","isOpen","onRequestClose","closeModal","contentLabel","imgBase64","Modal","setAppElement","setName","_useState","useState","_useState2","slicedToArray","modalIsOpen","setModalIsOpen","_useState3","_useState4","setImgBase64","onClick","disabled","reader","FileReader","readAsDataURL","onloadend","base64data","result","FacePartContainer","id","active","selectPart","_extends","target","source","prototype","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","pipette_ref2","d","pipette_ref3","pipette_ref4","pipette_ref5","pipette_ref6","pipette_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","pipette_SvgPipette","svgRef","x","y","viewBox","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","__webpack_require__","p","showPicker","setShowPicker","currentColor","setCurrentColor","onBackgroundClick","useEffect","window","addEventListener","removeEventListener","stopPropagation","background","react_color_lib","disableAlpha","onChange","hex","spritesLength","item","color_picker_ColorPicker","esm","defaultIndex","title","face_parts_Base","loadFaceParts","get","layer","base64Urls","spriteCanvas","ctx","promisesArray","drawImg","all","createSprite","res","setTimeout","match","preview_Preview","button_actions_ButtonActions","main_tabs_MainTabs","getSets","set","name","App","basename","react_router","path","exact","component","SelectSet","AvatarPage","React","Component","Boolean","location","hostname","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","ReactDOM","render","es","App_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3936fb9d.chunk.js","sourcesContent":["const canvas = document.createElement(\"canvas\"), // shared instance\r\n  context = canvas.getContext(\"2d\");\r\n\r\nconst IMG_WIDTH = 600;\r\nconst IMG_HEIGHT = 600;\r\n\r\n// set image pixel size and hex color\r\n\r\nexport const changeImageColor = (url, spriteLength, color) => {\r\n\r\n  return new Promise((resolve, reject) => {\r\n\r\n    let img = document.createElement('img');\r\n    img.src = url;\r\n\r\n    (function load (width, height) {\r\n      img.onload = () => {\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        context.clearRect(0, 0, width, height);\r\n        context.drawImage(img, 0, 0, width, height);\r\n        colorize(color, width, height);\r\n\r\n        context.drawImage(img, 0, 0, width, height);\r\n\r\n        resolve(canvas.toDataURL(\"image/png\", 1));\r\n      }\r\n    })(IMG_WIDTH * spriteLength, IMG_HEIGHT);\r\n\r\n  });\r\n\r\n\r\n  function colorize(color, width, height) {\r\n\r\n    context.imageSmoothingQuality = \"high\";\r\n    context.globalCompositeOperation = \"source-atop\";\r\n    context.fillStyle = color;\r\n    context.fillRect(0, 0, width, height);\r\n    context.globalCompositeOperation = \"multiply\";\r\n  }\r\n}\r\n\r\nexport const createSprite = (base64Urls) => {\r\n  const spriteCanvas = document.createElement(\"canvas\"),\r\n    ctx = spriteCanvas.getContext(\"2d\");\r\n  spriteCanvas.width = base64Urls.length * IMG_WIDTH;\r\n  spriteCanvas.height = IMG_HEIGHT;\r\n\r\n  return new Promise((resolve) => {\r\n\r\n    let promisesArray = [];\r\n\r\n    for (let i = 0; i < base64Urls.length; i++) {\r\n      promisesArray.push(drawImg(base64Urls[i], i * IMG_WIDTH, 0));\r\n    }\r\n\r\n    Promise.all(promisesArray).then(() => {\r\n      resolve(spriteCanvas.toDataURL(\"image/png\", 1));\r\n    })\r\n  });\r\n\r\n  function drawImg(url, x, y) {\r\n    return new Promise((resolve) => {\r\n      let img = document.createElement('img');\r\n      img.src = url;\r\n      img.onload = () => {\r\n        ctx.drawImage(img, x, y, IMG_WIDTH, IMG_HEIGHT);\r\n        resolve();\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n","import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/';\r\nconsole.log(API_URL);\r\n\r\nconst axiosInstance = axios.create({\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  }\r\n});\r\n\r\nexport function getFaceParts(setId) {\r\n  return axiosInstance.get(API_URL + 'face-parts/' + setId);\r\n}\r\n\r\nexport function getSets() {\r\n  return axiosInstance.get(API_URL + 'face-parts/sets');\r\n}\r\n\r\nexport function saveImage(setId, data) {\r\n  return axios({\r\n    url: API_URL + 'save-image/' + setId,\r\n    method: 'GET',\r\n    responseType: 'blob', // important,\r\n    params: { data }\r\n  })\r\n}\r\n","import { createSelector } from 'reselect'\r\nimport { changeImageColor, createSprite } from '../services/canvas'\r\nimport * as backend from '../services/backend'\r\nimport { cloneDeep, pickBy } from 'lodash'\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst TRANSPARENT_PIXEL = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\r\nconst TRANSPARENT_ID = 'transparent'\r\n\r\nconst initialState = {\r\n  partsData: {},\r\n  PARTS: [],\r\n  PARTS_WITH_COLORS: [],\r\n  sprites: [],\r\n  spritesOriginal: [],\r\n  current: {},\r\n  previewIsLoading: false,\r\n  facePartsAreLoading: true,\r\n  savingIsLoading: false,\r\n  sets: [],\r\n  hiddenParts: [], // for conflicts\r\n  conflicts: {},\r\n  current: {}\r\n  // current: {\r\n  //   0: {\r\n  //     _id: null,\r\n  //     color: null,\r\n  //     index: 2\r\n  //   }\r\n  // }\r\n};\r\n\r\nexport function createReducer(initialState, handlers) {\r\n  return function reducer(state = initialState, action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action)\r\n    } else {\r\n      return state\r\n    }\r\n  }\r\n}\r\n\r\n// ACTIONS\r\n\r\nexport const loadFaceParts = (setId) => (dispatch) => {\r\n  dispatch({ type: 'LOAD_FACE_PARTS_REQUEST' });\r\n  backend.getFaceParts(setId).then(response => {\r\n    dispatch({ type: 'LOAD_FACE_PARTS_SUCCESS', payload: response });\r\n    let sprites = response.data.map(layer => {\r\n      return createSprite([TRANSPARENT_PIXEL].concat(layer.images.map(img => img.value)));\r\n    })\r\n    Promise.all(sprites).then(res => {\r\n      dispatch({ type: 'SET_SPRITES', payload: res });\r\n    })\r\n    setTimeout(() => {\r\n      dispatch(randomizeFace());\r\n    }, 10);\r\n  }).catch(e => {\r\n    dispatch({ type: 'LOAD_FACE_PARTS_FAILURE', payload: e });\r\n  })\r\n}\r\n\r\nexport const getSets = () => (dispatch) => {\r\n  dispatch({ type: 'GET_SETS_REQUEST' });\r\n  backend.getSets().then(response => {\r\n    dispatch({ type: 'GET_SETS_SUCCESS', payload: response });\r\n\r\n  }).catch(e => {\r\n    dispatch({ type: 'GET_SETS_FAILURE', payload: e });\r\n  })\r\n}\r\n\r\nexport const saveImage = (setId) => (dispatch, getState) => {\r\n  const data = getState().current;\r\n\r\n  dispatch({ type: 'SAVE_IMAGE_REQUEST' });\r\n  return new Promise((resolve, reject) =>  {\r\n    backend.saveImage(setId, data).then(response => {\r\n      saveAs(new Blob([response.data]), 'image' + Math.floor(Math.random() * 100000 + 1) + '.png');\r\n      dispatch({ type: 'SAVE_IMAGE_SUCCESS', payload: response });\r\n      resolve(response);\r\n    }).catch(e => {\r\n      dispatch({ type: 'SAVE_IMAGE_FAILURE', payload: e });\r\n      reject(e);\r\n    })\r\n  });\r\n}\r\n\r\nexport const changeColor = (part, color) => (dispatch, getState) => {\r\n  let partsToInheritColor = [];\r\n\r\n  getState().partsData.forEach((pd, index) => {\r\n    if (pd.inheritColorFrom === getState().partsData[part]._id) {\r\n      partsToInheritColor.push(index);\r\n    }\r\n  })\r\n  changeImageColor(getState().spritesOriginal[part], getState().partsData[part].images.length, color).then((value) => {\r\n    dispatch({ type: 'SET_COLOR', payload: { part, value, color } })\r\n  })\r\n\r\n  partsToInheritColor.forEach(inheritPart => {\r\n    changeImageColor(getState().spritesOriginal[inheritPart], getState().partsData[inheritPart].images.length, color).then(() => {})\r\n  })\r\n}\r\n\r\n\r\nexport const selectPart = (part, _id) => (dispatch, getState) => {\r\n\r\n}\r\n\r\nexport const randomizeFace = () => (dispatch, getState) => {\r\n\r\n  //dispatch({ type: 'SET_PREVIEW_IS_LOADING', value: true})\r\n  for (let index in getState().partsData) {\r\n    if (!getState().PARTS_WITH_COLORS.includes(index)) continue;\r\n    if (!getState().partsData[index].images) continue;\r\n    for (let i = 0; i < getState().partsData[index].images.length; i++) {\r\n      getState().partsData[index].images[i].isLoading = true;\r\n    }\r\n  }\r\n\r\n  getState().PARTS_WITH_COLORS.forEach(part => {\r\n    let r = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n    let g = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n    let b = Math.floor(Math.random() * 255).toString(16).padStart(2, '0')\r\n    dispatch(changeColor(part, '#' + r + g + b))\r\n  })\r\n\r\n  let partsShuffled = [].concat(getState().PARTS).sort(() => Math.random() - 0.5);\r\n  partsShuffled.forEach(part => {\r\n    if (!getState().partsData[part].images.length) return\r\n\r\n    let index = Math.floor(Math.random() * (getState().partsData[part].images.length - 1)) + 1;\r\n    let _id = getState().partsData[part].images[index]._id;\r\n    dispatch({type: 'SELECT_PART', payload: {_id, part, index }})\r\n  })\r\n}\r\n\r\n\r\n\r\n\r\n// SELECTORS\r\n//\r\nexport const getCurrentValues = createSelector(\r\n  state => state.partsData,\r\n  state => state.current,\r\n  (partsData, current) => {\r\n    let entries = Object.entries(partsData);\r\n    let values = [];\r\n    for (let i = 0; i < entries.length; i ++) {\r\n      let key = entries[i][0];\r\n      if (!current[key]) continue;\r\n      let value = entries[i][1].images.find(el => el._id == current[key]._id)\r\n      values.push({\r\n        zIndex: entries[i][1].zIndex,\r\n        value: value\r\n      });\r\n    }\r\n    values = values.sort((a, b) => a.zIndex - b.zIndex)\r\n    values = values.map(v => v.value && v.value.value)\r\n    return values\r\n  }\r\n)\r\n\r\nexport const getPreviewIsLoading = createSelector(state => state.partsData, partsData => {\r\n  let isLoading = false;\r\n  if (!partsData) return true;\r\n  for (let index in partsData) {\r\n    for (let i = 0; i < partsData[index].images.length; i++) {\r\n      if (partsData[index].images[i].isLoading) {\r\n        isLoading = true;\r\n      }\r\n    }\r\n  }\r\n  return isLoading;\r\n});\r\n\r\n// REDUCER\r\n\r\nconst reducer = createReducer(initialState, {\r\n  SELECT_PART: function(state, { payload: { _id, part, index }}) {\r\n    let newCurrent = Object.assign({}, state.current);\r\n\r\n    let partId = state.partsData[part]._id;\r\n\r\n    if (state.conflicts[partId]) {\r\n      state.conflicts[partId].forEach(conflictedPart => {\r\n        for (let index in state.partsData) {\r\n          if (state.partsData[index]._id === conflictedPart) {\r\n            if (newCurrent[index]) {\r\n              newCurrent[index]._id = TRANSPARENT_ID;\r\n              newCurrent[index].index = 0;\r\n            };\r\n          }\r\n        }\r\n      });\r\n    }\r\n    return {\r\n      ...state,\r\n      current: {\r\n        ...newCurrent,\r\n        [part]: {\r\n          ...state.current[part],\r\n          _id,\r\n          index\r\n        }\r\n      }\r\n    }\r\n  },\r\n  SET_COLOR: function(state, { payload: { part, value, color }}) {\r\n    let sprites = [].concat(state.sprites);\r\n    sprites[part] = value;\r\n    return {\r\n      ...state,\r\n      sprites,\r\n      current: {\r\n        ...state.current,\r\n        [part]: {\r\n          ...state.current[part],\r\n          color\r\n        }\r\n      }\r\n    }\r\n  },\r\n  SET_PREVIEW_IS_LOADING: function(state, { value }) {\r\n    return {\r\n      ...state,\r\n      previewIsLoading: value\r\n    }\r\n  },\r\n  GET_SETS_SUCCESS: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      sets: payload.data\r\n    }\r\n  },\r\n  LOAD_FACE_PARTS_REQUEST: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      current: {},\r\n      facePartsAreLoading: true\r\n    }\r\n  },\r\n\r\n  SET_SPRITES: function(state, { payload }) {\r\n    return {\r\n      ...state,\r\n      sprites: payload,\r\n      spritesOriginal: cloneDeep(payload)\r\n    }\r\n  },\r\n  LOAD_FACE_PARTS_SUCCESS: function(state, { payload }) {\r\n    let newPartsData =  cloneDeep(payload.data);\r\n    let conflicts = {};\r\n    newPartsData.forEach(part => {\r\n      part.images.unshift({\r\n        _id: TRANSPARENT_ID,\r\n        value: TRANSPARENT_PIXEL\r\n      });\r\n      part.images.forEach(img => {\r\n        img.isLoading = false;\r\n        img.value = null;\r\n      })\r\n      // handle conflictsWith\r\n      if (part.conflictsWith.length) {\r\n        if (conflicts[part._id]) conflicts[part._id].concat(part.conflictsWith);\r\n        else conflicts[part._id] = part.conflictsWith;\r\n        conflicts[part._id] = part.conflictsWith;\r\n        part.conflictsWith.forEach(conflictedPart => {\r\n          if (conflicts[conflictedPart]) conflicts[conflictedPart].push(part._id);\r\n          else conflicts[conflictedPart] = [part._id];\r\n        })\r\n      }\r\n    })\r\n\r\n    return {\r\n      ...state,\r\n      conflicts,\r\n      partsData: newPartsData,\r\n      PARTS: Object.keys(payload.data),\r\n      PARTS_WITH_COLORS: Object.keys(pickBy(payload.data, part => part.colors && part.colors.length)),\r\n      facePartsAreLoading: false\r\n    }\r\n  },\r\n  SAVE_IMAGE_REQUEST: function(state) {\r\n    return {\r\n      ...state,\r\n      savingIsLoading: true\r\n    }\r\n  },\r\n  SAVE_IMAGE_SUCCESS: function(state) {\r\n    return {\r\n      ...state,\r\n      savingIsLoading: false\r\n    }\r\n  }\r\n})\r\n\r\nexport default reducer\r\n","import React from 'react';\r\nimport './spinner.scss'\r\n\r\nexport default function Spinner ({width = 300, height = 300}) {\r\n  return (\r\n    <div className=\"spinner\" style={{width, height}}>Loading...</div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getCurrentValues, getPreviewIsLoading } from '../../reducers/preview'\r\nimport Spinner from '../spinner'\r\nimport classNames from 'classnames'\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport './preview.scss'\r\n\r\nfunction Preview({ partsData, previewIsLoading, sprites, current }) {\r\n  return (\r\n    <div className={classNames('Preview', previewIsLoading && 'isLoading')}>\r\n      <div className=\"change-art\">\r\n        <Link to='../'>\r\n          <button className=\"btn btn-info\">\r\n              Change Art Set\r\n          </button>\r\n        </Link>\r\n      </div>\r\n      <div className=\"images\">\r\n        {\r\n          sprites && sprites.map((sprite, index) => {\r\n            if (!current[index]) return null;\r\n            let position =  100 * (current[index].index / (partsData[index].images.length - 1));\r\n            // console.log(current[index].index, partsData[index].images.length);\r\n            return (\r\n              <div\r\n                className=\"img\"\r\n                style={{backgroundImage: 'url(' + sprite + ')', backgroundPosition: position + '%'}}\r\n                key={index}\r\n              />\r\n            )\r\n          })\r\n        }\r\n      </div>\r\n      <Spinner />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    partsData: state.partsData,\r\n    sprites: state.sprites,\r\n    current: state.current,\r\n    previewIsLoading: state.facePartsAreLoading || getPreviewIsLoading(state)\r\n  })\r\n)(Preview)\r\n","import React, {useEffect} from 'react';\r\nimport './download-success-modal.scss'\r\nimport Modal from 'react-modal';\r\n\r\nModal.setAppElement('#root')\r\n\r\nexport default function DownloadSuccessModal(props) {\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={props.isOpen}\r\n      onRequestClose={props.closeModal}\r\n      contentLabel=\"Example Modal\"\r\n      className=\"download-success-modal\"\r\n    >\r\n      <h4>Great! Your download has been successful!</h4>\r\n      <img className=\"modal-image\" src={props.imgBase64} />\r\n      <h6>If you want to download images in high quality, you can <strong>become premium</strong></h6>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, {useState} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getPreviewIsLoading, randomizeFace, saveImage } from '../../reducers/preview'\r\nimport './button-actions.scss'\r\n\r\nimport DownloadSuccessModal from '../download-success-modal'\r\n\r\n\r\nfunction ButtonActions(props) {\r\n\r\n  let [modalIsOpen, setModalIsOpen] = useState(false);\r\n  let [imgBase64, setImgBase64] = useState(null);\r\n\r\n  function onDownloadClick() {\r\n    props.saveImage(props.setName).then((response) => {\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(response.data);\r\n      reader.onloadend = function() {\r\n        let base64data = reader.result;\r\n        setImgBase64(base64data);\r\n        setModalIsOpen(true);\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"ButtonActions\">\r\n      <button\r\n        className=\"btn btn-primary btn-wide mb-2\"\r\n        onClick={props.randomizeFace}\r\n        disabled={props.savingIsLoading || props.previewIsLoading}\r\n      >\r\n        Random\r\n      </button>\r\n      <br/>\r\n      <button\r\n        className=\"btn btn-primary btn-wide\"\r\n        onClick={onDownloadClick}\r\n        disabled={props.savingIsLoading || props.previewIsLoading}\r\n      >\r\n        Download\r\n      </button>\r\n      <DownloadSuccessModal\r\n        isOpen={modalIsOpen}\r\n        closeModal={() => setModalIsOpen(false)}\r\n        imgBase64={imgBase64}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    savingIsLoading: state.savingIsLoading,\r\n    previewIsLoading: state.facePartsAreLoading || getPreviewIsLoading(state)\r\n  }),\r\n  dispatch => ({\r\n    randomizeFace: () => dispatch(randomizeFace()),\r\n    saveImage: (setName) => dispatch(saveImage(setName))\r\n  })\r\n)(ButtonActions)\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './face-part-container.scss'\r\nimport classNames from 'classnames'\r\n\r\nexport default function FacePartContainer ({id, active, part, url, selectPart, index, position}) {\r\n  return (\r\n    <div className={classNames('FacePartContainer', active && 'active')} onClick={() => selectPart(id, part)}>\r\n      <div\r\n        className=\"img\"\r\n        style={{backgroundImage: 'url(' + url + ')', backgroundPosition: position + '%'}}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M489.265,22.762C474.586,8.083,455.071,0,434.313,0s-40.273,8.083-54.951,22.762L221.761,180.361 c-9.158-4.089-20.268-2.402-27.783,5.111c-9.733,9.731-9.733,25.511,0,35.244l8.448,8.448L54.402,377.189 c-2.564,2.564-4.537,5.656-5.782,9.06l-15.674,42.847c-7.766,1.691-14.9,5.556-20.652,11.309 c-7.925,7.923-12.288,18.457-12.288,29.663c0,11.203,4.363,21.738,12.288,29.663c8.178,8.176,18.921,12.265,29.662,12.265 s21.484-4.089,29.662-12.265c0-0.002,0.002-0.002,0.002-0.003c5.752-5.754,9.618-12.886,11.309-20.65l42.847-15.674 c3.404-1.246,6.496-3.22,9.06-5.782l148.026-148.026l8.448,8.448c4.866,4.866,11.245,7.3,17.621,7.3 c6.377,0,12.757-2.434,17.621-7.3c7.515-7.515,9.201-18.625,5.111-27.783l157.601-157.599 C519.565,102.365,519.565,53.063,489.265,22.762z M41.957,477.967c-2.08-0.002-4.115-0.846-5.582-2.313 c-1.47-1.47-2.313-3.504-2.313-5.582s0.842-4.112,2.311-5.581l11.165,11.163C46.069,477.125,44.033,477.967,41.957,477.967z  M47.537,475.653l-11.163-11.165c1.539-1.538,3.559-2.308,5.579-2.308c2.022,0,4.044,0.771,5.584,2.309 c1.469,1.47,2.311,3.504,2.311,5.582S49.006,474.186,47.537,475.653z M103.481,418.489l-15.681,5.737l5.737-15.681 l144.133-144.133l9.944,9.944L103.481,418.489z M454.019,97.422L297.594,253.847l-39.414-39.414L414.607,58.008 c5.263-5.265,12.261-8.164,19.706-8.164c7.445,0,14.443,2.899,19.706,8.163C464.887,68.873,464.887,86.555,454.019,97.422z\"\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgPipette = function SvgPipette(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 511.997 511.997\",\n    style: {\n      enableBackground: \"new 0 0 511.997 511.997\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgPipette, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/pipette.1fc4aeaa.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { changeColor } from '../../reducers/preview'\r\nimport './color-picker.scss'\r\nimport { ChromePicker } from 'react-color'\r\nimport { ReactComponent as Pipette } from './pipette.svg'\r\n\r\nfunction ColorPicker({ part, changeColor, partsData, current }) {\r\n  const [showPicker, setShowPicker] = useState(false)\r\n  const [currentColor, setCurrentColor] = useState((current[part] && current[part].color) || '#3333ee');\r\n  const colors = partsData[part].colors;\r\n\r\n  const onBackgroundClick = () => {\r\n    setShowPicker(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('click', onBackgroundClick, false)\r\n    return function cleanup() {\r\n      window.removeEventListener('click', onBackgroundClick)\r\n    }\r\n  }, [])\r\n\r\n  if (!colors || !colors.length) return null;\r\n\r\n  return (\r\n    <div className=\"ColorPicker\" onClick={e => e.stopPropagation()}>\r\n      <div className=\"color color-pipette\"\r\n         onClick={() => {\r\n           setShowPicker(!showPicker)\r\n         }}><Pipette/>\r\n      </div>\r\n      {colors.map(color => (\r\n       <div className=\"color\"\r\n            style={{background: color}}\r\n            key={color}\r\n            onClick={() => changeColor(part, color)}>\r\n       </div>\r\n      ))}\r\n      { showPicker &&\r\n        <ChromePicker\r\n          className=\"chromePicker\"\r\n          disableAlpha={true}\r\n          color={currentColor}\r\n\r\n          onChange={(color) => {\r\n            setCurrentColor(color.hex);\r\n            changeColor(part, color.hex);\r\n          }}\r\n        />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    partsData: state.partsData,\r\n    current: state.current\r\n  }),\r\n  dispatch => ({\r\n    changeColor: (part, color) => dispatch(changeColor(part, color)),\r\n  })\r\n)(ColorPicker)\r\n","import React from 'react';\r\nimport FacePartContainer from '../components/face-part-container'\r\nimport { connect } from 'react-redux'\r\nimport { changeColor } from '../reducers/preview'\r\nimport ColorPicker from '../components/color-picker'\r\n\r\nfunction Base({partsData, sprites, current, selectPart, part}) {\r\n  if (!(partsData && partsData[part] && partsData[part].images && partsData[part].images.length)) return 'No items on this layer'\r\n\r\n  return (\r\n    <div>\r\n      { partsData[part].images.map((item, index) => (\r\n        <FacePartContainer\r\n          active={current && current[part] && (current[part]._id === item._id)}\r\n          position={100 * index / (partsData[part].images.length - 1)}\r\n          key={item._id}\r\n          id={item._id}\r\n          part={part}\r\n          url={sprites[part]}\r\n          index={index}\r\n          selectPart={(_id, part) => selectPart(_id, part, index)}\r\n        />\r\n      )) }\r\n      <br/>\r\n      { !partsData[part].inheritColorFrom && <ColorPicker part={part} /> }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    sprites: state.sprites,\r\n    spritesLength: state.spritesLength,\r\n    partsData: state.partsData,\r\n    current: state.current\r\n  }),\r\n  dispatch => ({\r\n    changeColor: (part, color) => dispatch(changeColor(part, color)),\r\n    selectPart: (_id, part, index) => dispatch({ type: 'SELECT_PART', payload: { _id, part, index } })\r\n  })\r\n)(Base)\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './main-tabs.scss'\r\nimport { Tab, TabList, TabPanel, Tabs } from 'react-tabs'\r\nimport Base from '../../face-parts/Base'\r\n\r\nfunction MainTabs({ PARTS, partsData }) {\r\n  if (!PARTS || !PARTS.length) {\r\n    return <div></div>\r\n  }\r\n  return (\r\n    <div className=\"MainTabs\">\r\n      <Tabs defaultIndex={0}>\r\n        <TabList>\r\n          {PARTS.map((part, index) => (\r\n            <Tab key={index}>{partsData[part].title}</Tab>\r\n          ))}\r\n        </TabList>\r\n\r\n        {PARTS.map((part, index) => (\r\n          <TabPanel>\r\n            <Base  key={index} part={part}/>\r\n          </TabPanel>\r\n        ))}\r\n\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    PARTS: state.PARTS,\r\n    partsData: state.partsData\r\n  })\r\n)(MainTabs)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { randomizeFace, saveImage } from '../../reducers/preview'\r\nimport './avatar-page.scss'\r\n\r\nimport Preview from '../../components/preview'\r\nimport ButtonActions from '../../components/button-actions'\r\nimport { loadFaceParts } from '../../reducers/preview'\r\nimport MainTabs from '../../components/main-tabs'\r\n\r\n\r\nfunction AvatarPage(props) {\r\n\r\n  useEffect(() => {\r\n    props.loadFaceParts(props.match.params.setName);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"AvatarPage\">\r\n      <aside className=\"App-left-col\">\r\n        <div className=\"left-col-container\">\r\n          <Preview setName={props.match.params.setName}/>\r\n          <br/>\r\n          <ButtonActions setName={props.match.params.setName}/>\r\n        </div>\r\n      </aside>\r\n      <main className=\"App-main\">\r\n        <MainTabs />\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  null,\r\n  {\r\n    loadFaceParts\r\n  }\r\n)(AvatarPage)\r\n","import React, {useEffect} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { getSets } from '../../reducers/preview'\r\nimport './select-set.scss'\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\n\r\nfunction SelectSet(props) {\r\n\r\n  useEffect(() => {\r\n    props.getSets()\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"SelectSet\">\r\n      <h3>Select Art Set</h3>\r\n      <ul>\r\n        {props.sets.map(set => (\r\n          <li>\r\n            <Link to={set._id}>\r\n              {set.name}\r\n            </Link>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default connect(\r\n  state => ({\r\n    sets: state.sets\r\n  }),\r\n  {\r\n    getSets\r\n  }\r\n)(SelectSet)\r\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\nimport \"react-tabs/style/react-tabs.css\";\nimport './App.scss';\nimport AvatarPage from './components/avatar-page'\nimport SelectSet from './components/select-set'\n\n\nexport default class App extends React.Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Router basename='/avatar-platform'>\n        {/*<Router>*/}\n          <Switch>\n            <Route path=\"/\" exact component={SelectSet} />\n            <Route path=\"/:setName\" exact component={AvatarPage} />\n          </Switch>\n        </Router>\n      </div>\n    );\n  }\n}\n\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux'\nimport reducer from './reducers/preview'\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly'\nimport ReduxThunk from 'redux-thunk'\n\n\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(ReduxThunk)));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}